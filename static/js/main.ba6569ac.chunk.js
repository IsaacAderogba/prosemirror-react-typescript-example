(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{111:function(e,t,n){e.exports=n(262)},261:function(e,t,n){},262:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n(28),i=n.n(o),a=n(107),c=n(17),l=n(29),s=n(10),p=n(11),u=n(32),d=n(30),h=n(33),m=n(31),f=n(99),v=n.n(f),b=n(8),O=n(101),k=n(13),w=new k.Schema({nodes:{doc:{content:"block+"},paragraph:{group:"block",content:"inline*",attrs:{spellcheck:{default:"false"}},parseDOM:[{tag:"p"}],toDOM:function(e){return["p",e.attrs,0]}},underline:{group:"block",content:"inline*",attrs:{spellcheck:{default:"false"}},parseDOM:[{tag:"p"}],toDOM:function(e){return["p",e.attrs,0]}},text:{group:"inline"}}}),y=n(102),E=n(74),j=n(103),C=n(16);function g(e,t){var n=e.selection,r=n.$from,o=n.$to;if(e.selection instanceof b.NodeSelection&&e.selection.node.isBlock)return!(!r.parentOffset||!Object(C.canSplit)(e.doc,r.pos))&&(t&&t(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.parent.isBlock)return!1;if(t){var i=o.parentOffset==o.parent.content.size,a=e.tr;e.selection instanceof b.TextSelection&&a.deleteSelection();var c=0==r.depth?void 0:r.node(-1).contentMatchAt(r.indexAfter(-1)).defaultType,l=i&&c?[{type:c}]:void 0,s=Object(C.canSplit)(a.doc,a.mapping.map(r.pos),1,l);if(!l&&!s&&c&&Object(C.canSplit)(a.doc,a.mapping.map(r.pos),1,c&&[{type:c}])&&(l=[{type:c}],s=!0),s&&c){a.split(a.mapping.map(r.pos),1,l);var p=!i&&!r.parentOffset&&r.parent.type!=c,u=r.node(-1).canReplace(r.index(-1),r.indexAfter(-1),k.Fragment.from(c.create()));p&&u&&a.setNodeMarkup(a.mapping.map(r.before()),c)}t(a.scrollIntoView())}return!0}function M(e,t){var n=e.selection,r=n.$from,o=n.$to;if(r.parent.inlineContent||o.parent.inlineContent)return!1;var i=r.parent.contentMatchAt(o.indexAfter()).defaultType;if(!i||!i.isTextblock)return!1;var a=i.createAndFill();if(t&&a){var c=(!r.parentOffset&&o.index()<o.parent.childCount?r:o).pos,l=e.tr.insert(c,a);l.setSelection(b.TextSelection.create(l.doc,c+1)),t(l.scrollIntoView())}return!0}function x(e,t){var n=e.selection,r=n.$from,o=(n.$to,w.nodes.underline.createAndFill()),i=r.end();o&&t(e.tr.insert(i+1,o));return!1}var S=function(){var e=[];return e.push(Object(y.history)()),e.push(Object(E.keymap)(j.baseKeymap)),e.push(Object(E.keymap)({"Ctrl-n":x,"Ctrl-p":M,"Ctrl-s":g})),e},D=function(){function e(){Object(s.a)(this,e),this.portals=new Map}return Object(p.a)(e,[{key:"render",value:function(e,t){this.portals.set(t,{component:e}),i.a.render(e,t)}},{key:"remove",value:function(e){this.portals.delete(e),i.a.unmountComponentAtNode(e)}}]),e}();function P(){var e=Object(l.a)(["\n  text-decoration: underline;\n"]);return P=function(){return e},e}var R=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).hole=void 0,n.hole=r.createRef(),n}return Object(h.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.hole.current.appendChild(this.props.contentDOM)}},{key:"render",value:function(){var e=this.props.attrs;return r.createElement(V,{ref:this.hole,spellCheck:e.spellcheck})}}]),t}(r.Component),V=m.a.p(P()),A=function(){function e(t,n,o,i,a,c){Object(s.a)(this,e),this.dom=void 0,this.contentDOM=void 0,this.ref=void 0,this.node=void 0,this.view=void 0,this.getPos=void 0,this.decorations=void 0,this.attrs=void 0,this.portalProvider=void 0,this.reactComponent=void 0,this.attrs=t.attrs,this.node=t,this.view=n,this.getPos=o,this.decorations=i,this.portalProvider=a,this.reactComponent=c,this.ref=r.createRef(),this.dom=document.createElement("span"),this.contentDOM=document.createElement("span"),this.dom.classList.add("node__dom"),this.contentDOM.classList.add("node__content-dom"),this.renderReactComponent()}return Object(p.a)(e,[{key:"renderReactComponent",value:function(){this.portalProvider.render(r.createElement(this.reactComponent,{ref:this.ref,attrs:this.attrs,contentDOM:this.contentDOM}),this.dom)}},{key:"update",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return!0};return!(this.node.type!==e.type||!n(this.node,e))&&(this.ref&&!this.node.sameMarkup(e)&&(this.attrs=e.attrs,this.renderReactComponent()),this.node=e,this.decorations=t,!0)}},{key:"destroy",value:function(){this.portalProvider.remove(this.dom)}}],[{key:"fromComponent",value:function(t,n){return function(r,o,i,a){return new e(r,o,i,a,n,t)}}}]),e}();function T(){var e=Object(l.a)(["\n  border: 1px solid black;\n  #editor > .ProseMirror {\n    min-height: 140px;\n    overflow-wrap: break-word;\n    outline: none;\n    padding: 10px;\n    white-space: pre-wrap;\n  }\n"]);return T=function(){return e},e}var $=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(u.a)(this,Object(d.a)(t).call(this,e))).editorRef=void 0,n.editorState=void 0,n.editorView=void 0,n.portalProvider=void 0,n.editorState=b.EditorState.create({schema:w,plugins:S()}),n.editorRef=r.createRef(),n.portalProvider=new D,n}return Object(h.a)(t,e),Object(p.a)(t,[{key:"createEditorView",value:function(e){var t;null!==e&&(this.editorView=new O.EditorView(e,{nodeViews:(t=this.portalProvider,{underline:A.fromComponent(R,t)}),state:this.editorState}),v()(this.editorView))}},{key:"componentDidMount",value:function(){this.createEditorView(this.editorRef.current),this.forceUpdate()}},{key:"componentWillUnmount",value:function(){this.editorView&&this.editorView.destroy()}},{key:"shouldComponentUpdate",value:function(){return!1}},{key:"render",value:function(){return r.createElement(N,null,r.createElement("div",{id:"editor",ref:this.editorRef}))}}]),t}(r.Component),N=m.a.div(T());function I(){var e=Object(l.a)(["\n"]);return I=function(){return e},e}var _=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.createElement(B,null,r.createElement("header",null,r.createElement("h1",null,r.createElement("a",{href:"https://teemukoivisto.github.io/prosemirror-react-typescript-example/"},"ProseMirror React Typescript Example")),r.createElement("p",null,"Demo application to show how to combine ProseMirror with React"),r.createElement("p",null,r.createElement("a",{href:"https://teemukoivisto.github.io/prosemirror-react-typescript-example/"},"Github repo"))),r.createElement("div",null,r.createElement("ul",null,r.createElement("li",null,r.createElement("b",null,"Ctrl + n"),": New underline paragraph"),r.createElement("li",null,r.createElement("b",null,"Ctrl + p"),": New normal paragraph (not working)"),r.createElement("li",null,r.createElement("b",null,"Ctrl + s"),": Split current block")),r.createElement($,null)))}}]),t}(r.PureComponent),B=m.a.div(I());n(261);Object(o.render)(r.createElement(function(){return r.createElement(a.a,{basename:"/prosemirror-react-typescript-example"},r.createElement(c.d,null,r.createElement(c.b,{exact:!0,path:"/",component:_}),r.createElement(c.a,{to:"/"})))},null),document.getElementById("root"))}},[[111,1,2]]]);
//# sourceMappingURL=main.ba6569ac.chunk.js.map