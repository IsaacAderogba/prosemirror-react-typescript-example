{"version":3,"sources":["components/NavBar.tsx","components/WrappedRoute.tsx","../../full/dist/index.es.js","components/PageHeader.tsx","pages/FrontPage.tsx","../../minimal/dist/index.es.js","pages/MinimalPage.tsx","routes.tsx","index.tsx"],"names":["NavBar","props","className","Container","Nav","Link","to","exact","activeClassName","styled","div","nav","NavLink","WrappedRoute","Component","component","rest","render","MainWrapper","MainContainer","main","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","schema","Schema","nodes","doc","content","paragraph","group","attrs","spellcheck","default","parseDOM","tag","toDOM","node","underline","text","splitBlock","state","dispatch","_a","selection","$from","$to","NodeSelection","isBlock","parentOffset","canSplit","pos","tr","split","scrollIntoView","parent","atEnd","size","TextSelection","deleteSelection","deflt","depth","undefined","contentMatchAt","indexAfter","defaultType","types","type","can","mapping","map","isStuff","canReplace","index","Fragment","from","create","setNodeMarkup","before","createParagraphNear","inlineContent","isTextblock","empty","createAndFill","side","childCount","insert","setSelection","createNewUnderline","endOfBlock","end","plugins","push","history","keymap","baseKeymap","PortalProvider","this","portals","Map","container","set","ReactDOM","remove","delete","unmountComponentAtNode","Underline","contentDOM","ref","useRef","useLayoutEffect","current","appendChild","React","createElement","UnderlinedText","spellCheck","cooked","raw","templateObject_1","defineProperty","value","ReactNodeView","view","getPos","decorations","portalProvider","reactComponent","createRef","dom","document","classList","add","renderReactComponent","update","sameMarkup","destroy","fromComponent","css","insertAt","head","getElementsByTagName","style","firstChild","insertBefore","styleSheet","cssText","createTextNode","styleInject","Editor","_super","_this","editorState","EditorState","editorRef","__","constructor","__extends","createEditorView","element","editorView","EditorView","nodeViews","applyDevTools","componentDidMount","forceUpdate","componentWillUnmount","shouldComponentUpdate","id","PageHeader","children","href","FrontPage","MinimalPage","Routes","basename","process","path","getElementById"],"mappings":"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","file":"static/js/main.2c6bea09.chunk.js","sourcesContent":["import React from 'react'\nimport { NavLink } from 'react-router-dom'\nimport styled from 'styled-components'\n\nimport { RouteComponentProps } from 'react-router'\n\ninterface IProps extends RouteComponentProps<{}> {\n  className?: string\n}\n\nexport function NavBar(props: IProps) {\n  const { className } = props\n  return (\n    <Container className={className}>\n      <Nav>\n        <Link to=\"/\" exact activeClassName=\"current\">Full</Link>\n        <Link to=\"/minimal\" activeClassName=\"current\">Minimal</Link>\n      </Nav>\n    </Container>\n  )\n}\n\nconst Container = styled.div`\n  background: #551a8b;\n  box-shadow: 0 0 2px 2px rgba(0,0,0,0.18);\n  padding: 1rem;\n`\nconst Nav = styled.nav`\n  align-items: center;\n  display: flex;\n`\nconst Link = styled(NavLink)`\n  box-sizing: border-box;\n  color: #fff;\n  cursor: pointer;\n  font-size: 1rem;\n  padding: 0.5rem 1rem;\n  text-decoration: none;\n  transition: 0.2s hover;\n  &:hover {\n    text-decoration: underline;\n  }\n  &.current {\n    font-weight: 600;\n  }\n`\n","import * as React from 'react'\nimport { Route, RouteProps, RouteComponentProps } from 'react-router'\nimport styled from 'styled-components'\n\nimport { NavBar } from './NavBar'\n\ntype ReactComponent = React.ComponentClass<any> | React.StatelessComponent<any>\n\ninterface IWrappedRoute extends RouteProps {\n  component: ReactComponent\n}\n\nconst renderNoMainContainerWrapper = (Component: ReactComponent) => (props: RouteComponentProps<any>) =>\n  <MainWrapper>\n    <NavBar {...props}/>\n    <Component {...props}/>\n  </MainWrapper>\n\nconst renderWrapper = (Component: ReactComponent) => (props: RouteComponentProps<any>) =>\n  <MainWrapper>\n    <NavBar {...props}/>\n    <MainContainer>\n      <Component {...props}/>\n    </MainContainer>\n  </MainWrapper>\n\nexport const NoMainContainerRoute = ({ component, ...rest } : IWrappedRoute) =>\n  <Route {...rest} render={renderNoMainContainerWrapper(component)}/>\n\nexport const WrappedRoute = ({ component, ...rest } : IWrappedRoute) =>\n  <Route {...rest} render={renderWrapper(component)}/>\n\nconst MainWrapper = styled.div`\n  background: snow;\n  min-height: 100vh;\n`\nconst MainContainer = styled.main`\n  margin: 40px auto 0 auto;\n  max-width: 680px;\n  padding-bottom: 20px;\n  @media only screen and (max-width: 720px) {\n    margin: 40px 20px 0 20px;\n    padding-bottom: 20px;\n  }\n`\n","import React, { useRef, useLayoutEffect, createElement, createRef, Component } from 'react';\nimport applyDevTools from 'prosemirror-dev-tools';\nimport { NodeSelection, TextSelection, EditorState } from 'prosemirror-state';\nimport { EditorView } from 'prosemirror-view';\nimport { Schema, Fragment } from 'prosemirror-model';\nimport { history } from 'prosemirror-history';\nimport { keymap } from 'prosemirror-keymap';\nimport { baseKeymap } from 'prosemirror-commands';\nimport { canSplit } from 'prosemirror-transform';\nimport ReactDOM from 'react-dom';\nimport styled from 'styled-components';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nfunction __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nfunction __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n}\n\nvar schema = new Schema({\r\n    nodes: {\r\n        doc: {\r\n            content: 'block+'\r\n        },\r\n        paragraph: {\r\n            group: 'block',\r\n            content: 'inline*',\r\n            attrs: {\r\n                spellcheck: { default: 'false' },\r\n            },\r\n            parseDOM: [{ tag: 'p' }],\r\n            toDOM: function (node) { return ['p', node.attrs, 0]; }\r\n        },\r\n        underline: {\r\n            group: 'block',\r\n            content: 'inline*',\r\n            attrs: {\r\n                spellcheck: { default: 'false' },\r\n            },\r\n            parseDOM: [{ tag: 'p' }],\r\n            toDOM: function (node) { return ['p', node.attrs, 0]; }\r\n        },\r\n        text: {\r\n            group: 'inline'\r\n        },\r\n    }\r\n});\n\nfunction splitBlock(state, dispatch) {\r\n    var _a = state.selection, $from = _a.$from, $to = _a.$to;\r\n    if (state.selection instanceof NodeSelection && state.selection.node.isBlock) {\r\n        if (!$from.parentOffset || !canSplit(state.doc, $from.pos))\r\n            return false;\r\n        if (dispatch)\r\n            dispatch(state.tr.split($from.pos).scrollIntoView());\r\n        return true;\r\n    }\r\n    if (!$from.parent.isBlock)\r\n        return false;\r\n    if (dispatch) {\r\n        var atEnd = $to.parentOffset == $to.parent.content.size;\r\n        var tr = state.tr;\r\n        if (state.selection instanceof TextSelection)\r\n            tr.deleteSelection();\r\n        var deflt = $from.depth == 0 ? undefined : $from.node(-1).contentMatchAt($from.indexAfter(-1)).defaultType;\r\n        var types = atEnd && deflt ? [{ type: deflt }] : undefined;\r\n        var can = canSplit(tr.doc, tr.mapping.map($from.pos), 1, types);\r\n        if (!types && !can && deflt && canSplit(tr.doc, tr.mapping.map($from.pos), 1, deflt && [{ type: deflt }])) {\r\n            types = [{ type: deflt }];\r\n            can = true;\r\n        }\r\n        if (can && deflt) {\r\n            tr.split(tr.mapping.map($from.pos), 1, types);\r\n            var isStuff = !atEnd && !$from.parentOffset && $from.parent.type != deflt;\r\n            var canReplace = $from.node(-1).canReplace($from.index(-1), $from.indexAfter(-1), Fragment.from(deflt.create()));\r\n            if (isStuff && canReplace) {\r\n                tr.setNodeMarkup(tr.mapping.map($from.before()), deflt);\r\n            }\r\n        }\r\n        dispatch(tr.scrollIntoView());\r\n    }\r\n    return true;\r\n}\r\nfunction createParagraphNear(state, dispatch) {\r\n    var _a = state.selection, $from = _a.$from, $to = _a.$to;\r\n    if ($from.parent.inlineContent || $to.parent.inlineContent)\r\n        return false;\r\n    var type = $from.parent.contentMatchAt($to.indexAfter()).defaultType;\r\n    if (!type || !type.isTextblock)\r\n        return false;\r\n    var empty = type.createAndFill();\r\n    debugger;\r\n    if (dispatch && empty) {\r\n        var side = (!$from.parentOffset && $to.index() < $to.parent.childCount ? $from : $to).pos;\r\n        var tr = state.tr.insert(side, empty);\r\n        tr.setSelection(TextSelection.create(tr.doc, side + 1));\r\n        dispatch(tr.scrollIntoView());\r\n    }\r\n    return true;\r\n}\r\nfunction createNewUnderline(state, dispatch) {\r\n    var _a = state.selection, $from = _a.$from, $to = _a.$to;\r\n    var empty = schema.nodes.underline.createAndFill();\r\n    var endOfBlock = $from.end();\r\n    if (empty && dispatch) {\r\n        var tr = state.tr.insert(endOfBlock + 1, empty);\r\n        dispatch(tr);\r\n    }\r\n    return false;\r\n}\n\nvar plugins = function () {\r\n    var plugins = [];\r\n    plugins.push(history());\r\n    plugins.push(keymap(baseKeymap));\r\n    plugins.push(keymap({\r\n        'Ctrl-n': createNewUnderline,\r\n        'Ctrl-p': createParagraphNear,\r\n        'Ctrl-s': splitBlock,\r\n    }));\r\n    return plugins;\r\n};\n\n// Modified from https://bitbucket.org/atlassian/atlaskit-mk-2/src/0fcae893b790443a30f7dadae00638d6e4238b2f/packages/editor/editor-core/src/ui/PortalProvider/index.tsx?at=master\r\nvar PortalProvider = /** @class */ (function () {\r\n    function PortalProvider() {\r\n        this.portals = new Map();\r\n    }\r\n    PortalProvider.prototype.render = function (component, container) {\r\n        this.portals.set(container, { component: component });\r\n        ReactDOM.render(component, container);\r\n        // TODO something still wrong with this\r\n        // ReactDOM.createPortal(\r\n        //   component,\r\n        //   container,\r\n        // )\r\n    };\r\n    PortalProvider.prototype.remove = function (container) {\r\n        this.portals.delete(container);\r\n        ReactDOM.unmountComponentAtNode(container);\r\n    };\r\n    return PortalProvider;\r\n}());\n\n// Modified from https://gist.github.com/esmevane/7326b19e20a5670954b51ea8618d096d\r\nfunction Underline(props) {\r\n    var attrs = props.attrs, contentDOM = props.contentDOM;\r\n    var ref = useRef(null);\r\n    // You _have_ to use layoutEffect, otherwise the contentDOM is not appended when a new Underline node & nodeview\r\n    // is created with eg Ctrl+n\r\n    useLayoutEffect(function () {\r\n        if (ref.current)\r\n            ref.current.appendChild(contentDOM);\r\n    }, []);\r\n    return (React.createElement(UnderlinedText, { ref: ref, spellCheck: attrs.spellcheck }));\r\n}\r\nvar UnderlinedText = styled.p(templateObject_1 || (templateObject_1 = __makeTemplateObject([\"\\n  text-decoration: underline;\\n\"], [\"\\n  text-decoration: underline;\\n\"])));\r\nvar templateObject_1;\n\n// Modified from https://bitbucket.org/atlassian/atlaskit-mk-2/src/0fcae893b790443a30f7dadae00638d6e4238b2f/packages/editor/editor-core/src/nodeviews/ReactNodeView.tsx?at=master\r\nvar ReactNodeView = /** @class */ (function () {\r\n    function ReactNodeView(node, view, getPos, decorations, portalProvider, reactComponent) {\r\n        this.attrs = node.attrs;\r\n        this.node = node;\r\n        this.view = view;\r\n        this.getPos = getPos;\r\n        this.decorations = decorations;\r\n        this.portalProvider = portalProvider;\r\n        this.reactComponent = reactComponent;\r\n        this.ref = createRef();\r\n        // Here, we'll provide a container to render React into.\r\n        // Coincidentally, this is where ProseMirror will put its\r\n        // generated contentDOM.  React will throw out that content\r\n        // once rendered, and at the same time we'll append it into\r\n        // the component tree, like a fancy shell game.  This isn't\r\n        // obvious to the user, but would it be more obvious on an\r\n        // expensive render?\r\n        //\r\n        this.dom = document.createElement('span');\r\n        // Finally, we provide an element to render content into.\r\n        // We will be moving this node around as we need to.\r\n        //\r\n        this.contentDOM = document.createElement('span');\r\n        // Just example classes to help see the structure in the DOM\r\n        this.dom.classList.add('node__dom');\r\n        this.contentDOM.classList.add('node__content-dom');\r\n        this.renderReactComponent();\r\n    }\r\n    ReactNodeView.prototype.renderReactComponent = function () {\r\n        this.portalProvider.render(createElement(this.reactComponent, { ref: this.ref, attrs: this.attrs, contentDOM: this.contentDOM }), this.dom);\r\n    };\r\n    ReactNodeView.prototype.update = function (node, decorations) {\r\n        // If the markup has changed, update the React component.\r\n        // TODO only updates attrs, what about type or marks?\r\n        // Or well basically just marks, the previous check will return false if type has changed.\r\n        if (this.ref && !this.node.sameMarkup(node)) {\r\n            this.attrs = node.attrs;\r\n            this.renderReactComponent();\r\n        }\r\n        this.node = node;\r\n        this.decorations = decorations;\r\n        return true;\r\n    };\r\n    ReactNodeView.prototype.destroy = function () {\r\n        this.portalProvider.remove(this.dom);\r\n    };\r\n    ReactNodeView.fromComponent = function (component, portalProvider) {\r\n        return function (node, view, getPos, decorations) {\r\n            return new ReactNodeView(node, view, getPos, decorations, portalProvider, component);\r\n        };\r\n    };\r\n    return ReactNodeView;\r\n}());\n\nvar nodeViews = function (portalProvider) { return ({\r\n    underline: ReactNodeView.fromComponent(Underline, portalProvider),\r\n}); };\n\nfunction styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nvar css_248z = \"#full-editor {\\n  border: 1px solid black; }\\n  #full-editor > .ProseMirror {\\n    min-height: 140px;\\n    overflow-wrap: break-word;\\n    outline: none;\\n    padding: 10px;\\n    white-space: pre-wrap; }\\n\";\nstyleInject(css_248z);\n\nvar Editor = /** @class */ (function (_super) {\r\n    __extends(Editor, _super);\r\n    function Editor(props) {\r\n        var _this = _super.call(this, props) || this;\r\n        _this.editorState = EditorState.create({\r\n            schema: schema,\r\n            plugins: plugins(),\r\n        });\r\n        _this.editorRef = createRef();\r\n        _this.portalProvider = new PortalProvider();\r\n        return _this;\r\n    }\r\n    Editor.prototype.createEditorView = function (element) {\r\n        if (element !== null) {\r\n            this.editorView = new EditorView(element, {\r\n                nodeViews: nodeViews(this.portalProvider),\r\n                state: this.editorState,\r\n            });\r\n            applyDevTools(this.editorView);\r\n        }\r\n    };\r\n    Editor.prototype.componentDidMount = function () {\r\n        this.createEditorView(this.editorRef.current);\r\n        this.forceUpdate();\r\n    };\r\n    Editor.prototype.componentWillUnmount = function () {\r\n        if (this.editorView) {\r\n            this.editorView.destroy();\r\n        }\r\n    };\r\n    Editor.prototype.shouldComponentUpdate = function () {\r\n        return false;\r\n    };\r\n    Editor.prototype.render = function () {\r\n        return (createElement(\"div\", { id: \"full-editor\", ref: this.editorRef }));\r\n    };\r\n    return Editor;\r\n}(Component));\n\nexport { Editor };\n","import * as React from 'react'\nimport styled from 'styled-components'\n\ninterface IProps {\n  className?: string\n  children: React.ReactNode\n}\n\nexport function PageHeader(props: IProps) {\n  const { className, children } = props\n  return (\n    <Container className={className}>\n      <header>\n        <h1><a href=\"https://teemukoivisto.github.io/prosemirror-react-typescript-example/\">\n          ProseMirror React Typescript Example</a></h1>\n        <p>Demo application to show how to combine ProseMirror with React</p>\n        <p><a href=\"https://github.com/TeemuKoivisto/prosemirror-react-typescript-example\">Github repo</a></p>\n      </header>\n      <div>\n        <ul>\n          <li><b>Ctrl + n</b>: New underline paragraph</li>\n          <li><b>Ctrl + p</b>: New normal paragraph (not working)</li>\n          <li><b>Ctrl + s</b>: Split current block</li>\n        </ul>\n        { children }\n      </div>\n    </Container>\n  )\n}\n\nconst Container = styled.div`\n`\n","import * as React from 'react'\nimport styled from 'styled-components'\n\nimport { Editor } from 'full'\n\nimport { PageHeader } from '../components/PageHeader'\n\ninterface IProps {\n  className?: string\n}\n\nexport function FrontPage(props: IProps) {\n  const { className } = props\n  return (\n    <Container className={className}>\n      <PageHeader>\n        <Editor />\n      </PageHeader>\n    </Container>\n  )\n}\n\nconst Container = styled.div`\n`\n","import { createElement, createRef, Component } from 'react';\nimport { EditorState } from 'prosemirror-state';\nimport { EditorView } from 'prosemirror-view';\nimport { Schema } from 'prosemirror-model';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nfunction __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\n\nvar schema = new Schema({\r\n    nodes: {\r\n        doc: {\r\n            content: 'block+'\r\n        },\r\n        underline: {\r\n            group: 'block',\r\n            content: 'inline*',\r\n            parseDOM: [{ tag: 'p' }],\r\n            toDOM: function () { return ['p', 0]; }\r\n        },\r\n        text: {\r\n            group: 'inline'\r\n        },\r\n    }\r\n});\n\nfunction styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nvar css_248z = \"#editor {\\n  border: 1px solid black; }\\n\";\nstyleInject(css_248z);\n\nvar Editor = /** @class */ (function (_super) {\r\n    __extends(Editor, _super);\r\n    function Editor(props) {\r\n        var _this = _super.call(this, props) || this;\r\n        _this.createEditorView = function (element) {\r\n            if (element != null) {\r\n                _this.editorView = new EditorView(element, {\r\n                    // nodeViews,\r\n                    state: _this.editorState,\r\n                });\r\n                // debugger\r\n            }\r\n        };\r\n        _this.editorState = EditorState.create({\r\n            schema: schema,\r\n        });\r\n        _this.editorRef = createRef();\r\n        return _this;\r\n    }\r\n    Editor.prototype.componentDidMount = function () {\r\n        this.createEditorView(this.editorRef.current);\r\n        this.forceUpdate();\r\n    };\r\n    Editor.prototype.componentWillUnmount = function () {\r\n        if (this.editorView) {\r\n            this.editorView.destroy();\r\n        }\r\n    };\r\n    Editor.prototype.shouldComponentUpdate = function () {\r\n        return false;\r\n    };\r\n    Editor.prototype.render = function () {\r\n        return createElement(\"div\", { id: \"editor\", ref: this.editorRef });\r\n    };\r\n    return Editor;\r\n}(Component));\n\nexport { Editor };\n","import * as React from 'react'\nimport styled from 'styled-components'\n\nimport { Editor } from 'minimal'\n\nimport { PageHeader } from '../components/PageHeader'\n\ninterface IProps {\n  className?: string\n}\n\nexport function MinimalPage(props: IProps) {\n  const { className } = props\n  return (\n    <Container className={className}>\n      <PageHeader>\n        <Editor />\n      </PageHeader>\n    </Container>\n  )\n}\n\nconst Container = styled.div`\n`\n","import * as React from 'react'\nimport { BrowserRouter, Redirect, Switch } from 'react-router-dom'\n\nimport { WrappedRoute } from './components/WrappedRoute'\n\nimport { FrontPage } from './pages/FrontPage'\nimport { MinimalPage } from './pages/MinimalPage'\n\nexport const Routes = () => (\n  <BrowserRouter basename={process.env.PUBLIC_URL}>\n    <Switch>\n      <WrappedRoute exact path=\"/\" component={FrontPage}/>\n      <WrappedRoute exact path=\"/minimal\" component={MinimalPage}/>\n      <Redirect to=\"/\" />\n    </Switch>\n  </BrowserRouter>\n)\n","import * as React from 'react'\nimport { render } from 'react-dom'\n\nimport { Routes } from './routes'\n\nrender(\n  <Routes />,\n  document.getElementById('root')\n)\n"],"sourceRoot":""}