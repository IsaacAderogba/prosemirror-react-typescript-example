(this["webpackJsonpexample-app"]=this["webpackJsonpexample-app"]||[]).push([[0],{189:function(e,t,n){e.exports=n(428)},428:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),i=n(12),a=n.n(i),c=n(70),s=n(11),u=n(15),p=n(121),d=n(10);function l(){var e=Object(u.a)(["\n  box-sizing: border-box;\n  color: #fff;\n  cursor: pointer;\n  font-size: 1rem;\n  padding: 0.5rem 1rem;\n  text-decoration: none;\n  transition: 0.2s hover;\n  &:hover {\n    text-decoration: underline;\n  }\n  &.current {\n    font-weight: 600;\n  }\n"]);return l=function(){return e},e}function f(){var e=Object(u.a)(["\n  align-items: center;\n  display: flex;\n"]);return f=function(){return e},e}function h(){var e=Object(u.a)(["\n  background: #551a8b;\n  box-shadow: 0 0 2px 2px rgba(0,0,0,0.18);\n  padding: 1rem;\n"]);return h=function(){return e},e}function m(e){var t=e.className;return o.a.createElement(v,{className:t},o.a.createElement(g,null,o.a.createElement(b,{to:"/",exact:!0,activeClassName:"current"},"Full"),o.a.createElement(b,{to:"/minimal",activeClassName:"current"},"Minimal"),o.a.createElement(b,{to:"/atlassian",activeClassName:"current"},"Atlassian")))}var v=d.a.div(h()),g=d.a.nav(f()),b=Object(d.a)(c.b)(l());function y(){var e=Object(u.a)(["\n  margin: 40px auto 0 auto;\n  max-width: 680px;\n  padding-bottom: 20px;\n  @media only screen and (max-width: 720px) {\n    margin: 40px 20px 0 20px;\n    padding-bottom: 20px;\n  }\n"]);return y=function(){return e},e}function w(){var e=Object(u.a)(["\n  background: snow;\n  min-height: 100vh;\n"]);return w=function(){return e},e}var E=function(e){var t,n=e.component,o=Object(p.a)(e,["component"]);return r.createElement(s.b,Object.assign({},o,{render:(t=n,function(e){return r.createElement(O,null,r.createElement(m,e),r.createElement(P,null,r.createElement(t,e)))})}))},O=d.a.div(w()),P=d.a.main(y()),C=n(185),x=n(5),k=n(173),M=n(1),A=n(188),D=n(123),j=n(174),R=n(7),V=n(119),S=n.n(V),_=function(e,t){return(_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function I(e,t){function n(){this.constructor=e}_(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var T=new M.h({nodes:{doc:{content:"block+"},paragraph:{group:"block",content:"inline*",attrs:{spellcheck:{default:"false"}},parseDOM:[{tag:"p"}],toDOM:function(e){return["p",e.attrs,0]}},underline:{group:"block",content:"inline*",attrs:{spellcheck:{default:"false"}},parseDOM:[{tag:"p"}],toDOM:function(e){return["p",e.attrs,0]}},blockquote:{group:"block",content:"inline*",attrs:{spellcheck:{default:"false"}},parseDOM:[{tag:"blockquote"}],toDOM:function(e){return["blockquote",e.attrs,0]}},text:{group:"inline"}}});function N(e,t){var n=e.selection,r=n.$from,o=n.$to;if(e.selection instanceof x.c&&e.selection.node.isBlock)return!(!r.parentOffset||!Object(R.f)(e.doc,r.pos))&&(t&&t(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.parent.isBlock)return!1;if(t){var i=o.parentOffset==o.parent.content.size,a=e.tr;e.selection instanceof x.g&&a.deleteSelection();var c=0==r.depth?void 0:r.node(-1).contentMatchAt(r.indexAfter(-1)).defaultType,s=i&&c?[{type:c}]:void 0,u=Object(R.f)(a.doc,a.mapping.map(r.pos),1,s);if(!s&&!u&&c&&Object(R.f)(a.doc,a.mapping.map(r.pos),1,c&&[{type:c}])&&(s=[{type:c}],u=!0),u&&c){a.split(a.mapping.map(r.pos),1,s);var p=!i&&!r.parentOffset&&r.parent.type!=c,d=r.node(-1).canReplace(r.index(-1),r.indexAfter(-1),M.c.from(c.create()));p&&d&&a.setNodeMarkup(a.mapping.map(r.before()),c)}t(a.scrollIntoView())}return!0}function U(e,t){var n=e.selection,r=n.$from,o=n.$to;if(r.parent.inlineContent||o.parent.inlineContent)return!1;var i=r.parent.contentMatchAt(o.indexAfter()).defaultType;if(!i||!i.isTextblock)return!1;var a=i.createAndFill();if(t&&a){var c=(!r.parentOffset&&o.index()<o.parent.childCount?r:o).pos,s=e.tr.insert(c,a);s.setSelection(x.g.create(s.doc,c+1)),t(s.scrollIntoView())}return!0}function q(e,t){var n=e.selection,r=n.$from,o=(n.$to,T.nodes.underline.createAndFill()),i=r.end();o&&t&&t(e.tr.insert(i+1,o));return!1}function B(e,t){var n=e.selection,r=n.$from,o=(n.$to,T.nodes.blockquote.createAndFill()),i=r.end();o&&t&&t(e.tr.insert(i+1,o));return!1}var F=function(){var e=[];return e.push(Object(A.a)()),e.push(Object(D.a)(j.a)),e.push(Object(D.a)({"Ctrl-n":q,"Ctrl-b":B,"Ctrl-p":U,"Ctrl-s":N})),e},L=function(){function e(){this.portals=new Map}return e.prototype.createPortal=function(e,t){},e.prototype.render=function(e,t){var n=this.portals.set(t,{children:e});S.a.publish("portals-update",n)},e.prototype.remove=function(e){this.portals.delete(e),console.log("delete",this.portals),S.a.publish("portals-update",this.portals)},e}(),$=function(e){function t(){var t=e.call(this)||this;return t.portals=new Map,t.setContext=function(e){t.context=e},t}return I(t,e),t.prototype.render=function(e,t,n){void 0===n&&(n=!1),this.portals.set(t,{children:e,hasReactContext:n});var r=e();Object(i.unstable_renderSubtreeIntoContainer)(this.context,r,t)},t.prototype.forceUpdate=function(){var e=this;this.portals.forEach((function(t,n){if(t.hasReactContext){var r=t.children();Object(i.unstable_renderSubtreeIntoContainer)(e.context,r,n)}}))},t.prototype.remove=function(e){this.portals.delete(e);try{Object(i.unmountComponentAtNode)(e)}catch(t){console.warn("Race condition in PortalProviderAPI where PM removed DOM node before React unmounted it")}},t}(function(){function e(){this.listeners={}}return e.prototype.on=function(e,t){this.listeners[e]||(this.listeners[e]=new Set),this.listeners[e].add(t)},e.prototype.off=function(e,t){this.listeners[e]&&this.listeners[e].has(t)&&this.listeners[e].delete(t)},e.prototype.emit=function(e,t){this.listeners[e]&&this.listeners[e].forEach((function(e){return e(t)}))},e.prototype.destroy=function(){this.listeners={}},e}()),z=function(e){function t(t){var n=e.call(this,t)||this;return n.portalProviderAPI=new $,n}return I(t,e),t.prototype.render=function(){return this.props.render(this.portalProviderAPI)},t.prototype.componentDidUpdate=function(){this.portalProviderAPI.forceUpdate()},t.displayName="PortalProvider",t}(o.a.Component),W=function(e){function t(t){var n=e.call(this,t)||this;return n.handleUpdate=function(e){return n.setState({portals:e})},t.portalProviderAPI.setContext(n),t.portalProviderAPI.on("update",n.handleUpdate),n.state={portals:new Map},n}return I(t,e),t.prototype.render=function(){var e=this.state.portals;return o.a.createElement(o.a.Fragment,null,Array.from(e.entries()).map((function(e){var t=e[0],n=e[1];return Object(i.createPortal)(n,t)})))},t}(o.a.Component);function K(e){var t=e.attrs,n=e.contentDOM,i=Object(r.useRef)(null);return Object(r.useLayoutEffect)((function(){i.current&&i.current.appendChild(n)}),[]),o.a.createElement(J,{ref:i,spellCheck:t.spellcheck})}var G,H,Q,J=d.a.p(Q||(G=["\n  text-decoration: underline;\n"],H=["\n  text-decoration: underline;\n"],Object.defineProperty?Object.defineProperty(G,"raw",{value:H}):G.raw=H,Q=G));function X(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!==typeof document){var r=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===n&&r.firstChild?r.insertBefore(o,r.firstChild):r.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}function Y(e){return o.a.createElement("blockquote",{className:"quote"})}X("blockquote.quote {\n  background-color: #e7e7e7;\n  margin: 0;\n  padding: 1rem; }\n");var Z=function(){function e(e,t,n,r,i){this.attrs=e.attrs,this.node=e,this.view=t,this.getPos=n,this.decorations=r,this.reactComponent=i,this.ref=o.a.createRef(),this.dom=document.createElement("span"),this.contentDOM=document.createElement("span"),this.dom.classList.add("node__dom"),this.contentDOM.classList.add("node__content-dom"),this.renderReactComponent()}return e.prototype.renderReactComponent=function(){a.a.render(o.a.createElement(this.reactComponent,{attrs:this.attrs,contentDOM:this.contentDOM}),this.dom)},e.prototype.update=function(e,t){return this.contentDOM&&!this.node.sameMarkup(e)&&(this.attrs=e.attrs,this.renderReactComponent()),this.node=e,this.decorations=t,!0},e.prototype.destroy=function(){a.a.unmountComponentAtNode(this.dom)},e.fromComponent=function(t){return function(n,r,o,i){return new e(n,r,o,i,t)}},e}(),ee=o.a.createContext({node:void 0,view:void 0,getPos:void 0,decorations:void 0});function te(e){var t=e.contentDOM,n=e.Component,i=e.node,a=e.view,c=e.getPos,s=e.decorations,u=e.attrs,p=Object(r.useRef)(null);return Object(r.useLayoutEffect)((function(){console.log(p.current),p.current&&t&&!i.isLeaf&&p.current.firstChild.appendChild(t)}),[]),console.log("nodeview wrapper"),o.a.createElement("div",{ref:p,className:"ProseMirror__react-node-view"},o.a.createElement(ee.Provider,{value:{node:i,view:a,getPos:c,decorations:s}},o.a.createElement(n,{attrs:u})))}var ne=function(){function e(e,t,n,o,i,a){this.attrs=e.attrs,this.node=e,this.view=t,this.getPos=n,this.decorations=o,this.portalProvider=i,this.reactComponent=a,this.ref=Object(r.createRef)(),this.dom=document.createElement("span"),this.contentDOM=document.createElement("span"),this.dom.classList.add("ProseMirror__dom"),this.contentDOM.classList.add("ProseMirror__content-dom"),this.dom.appendChild(this.contentDOM),this.renderReactComponent()}return e.prototype.renderReactComponent=function(){this.portalProvider.createPortal(Object(r.createElement)(te,{Component:this.reactComponent,contentDOM:this.contentDOM,attrs:this.attrs,node:this.node,view:this.view,getPos:this.getPos,decorations:this.decorations}),this.dom)},e.prototype.update=function(e,t){return this.ref&&!this.node.sameMarkup(e)&&(this.attrs=e.attrs,this.renderReactComponent()),this.node=e,this.decorations=t,!0},e.prototype.destroy=function(){console.log("destory!"),this.portalProvider.remove(this.dom),a.a.unmountComponentAtNode(this.contentDOM)},e.fromComponent=function(t,n){return function(r,o,i,a){return new e(r,o,i,a,n,t)}},e}();X("#full-editor {\n  border: 1px solid black; }\n  #full-editor > .ProseMirror {\n    min-height: 140px;\n    overflow-wrap: break-word;\n    outline: none;\n    padding: 10px;\n    white-space: pre-wrap; }\n");var re=function(e){function t(t){var n=e.call(this,t)||this;return n.editorState=x.b.create({schema:T,plugins:F()}),n.editorRef=Object(r.createRef)(),n.portalProvider=new L,n}return I(t,e),t.prototype.createEditorView=function(e){var t;null!==e&&(this.editorView=new k.a(e,{nodeViews:(t=this.portalProvider,{underline:Z.fromComponent(K),blockquote:ne.fromComponent(Y,t)}),state:this.editorState}),Object(C.a)(this.editorView))},t.prototype.componentDidMount=function(){this.createEditorView(this.editorRef.current),this.forceUpdate()},t.prototype.componentWillUnmount=function(){this.editorView&&this.editorView.destroy()},t.prototype.shouldComponentUpdate=function(){return!1},t.prototype.render=function(){var e=this;return Object(r.createElement)(z,{render:function(t){return Object(r.createElement)(r.Fragment,null,Object(r.createElement)("div",{id:"full-editor",ref:e.editorRef}),Object(r.createElement)(W,{portalProviderAPI:t}))}})},t}(r.Component);function oe(){var e=Object(u.a)(["\n"]);return oe=function(){return e},e}function ie(e){var t=e.className,n=e.children;return r.createElement(ae,{className:t},r.createElement("header",null,r.createElement("h1",null,r.createElement("a",{href:"https://teemukoivisto.github.io/prosemirror-react-typescript-example/"},"ProseMirror React Typescript Example")),r.createElement("p",null,"Demo application to show how to combine ProseMirror with React"),r.createElement("p",null,r.createElement("a",{href:"https://github.com/TeemuKoivisto/prosemirror-react-typescript-example"},"Github repo"))),r.createElement("div",null,r.createElement("ul",null,r.createElement("li",null,r.createElement("b",null,"Ctrl + n"),": New underline paragraph"),r.createElement("li",null,r.createElement("b",null,"Ctrl + b"),": New blockquote"),r.createElement("li",null,r.createElement("b",null,"Ctrl + p"),": New normal paragraph (not working)"),r.createElement("li",null,r.createElement("b",null,"Ctrl + s"),": Split current block")),n))}var ae=d.a.div(oe());function ce(){var e=Object(u.a)(["\n"]);return ce=function(){return e},e}function se(e){var t=e.className;return r.createElement(ue,{className:t},r.createElement(ie,null,r.createElement(re,null)))}var ue=d.a.div(ce()),pe=n(24),de=n(6),le=n(175),fe=n(3),he=n(187),me=n(124),ve=n(176),ge=n(120),be=n.n(ge),ye=function(e,t){return(ye=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function we(e,t){function n(){this.constructor=e}ye(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var Ee=new fe.h({nodes:{doc:{content:"block+"},underline:{group:"block",content:"inline*",parseDOM:[{tag:"p"}],toDOM:function(){return["p",0]}},text:{group:"inline"}}});function Oe(e,t){var n=e.selection,r=(n.$from,n.$to),o=Ee.nodes.underline.createAndFill(null);if(o){var i=e.tr.insert(r.pos,o);return t&&t(i),!0}return!1}var Pe=function(){var e=[];return e.push(Object(he.a)()),e.push(Object(me.a)(ve.a)),e.push(Object(me.a)({"Ctrl-n":Oe})),e},Ce=function(e){function t(t){var n=e.call(this,t)||this;return n.hole=Object(pe.createRef)(),n}return we(t,e),t.prototype.append=function(e){this.hole&&this.hole.current.appendChild(e)},t.prototype.render=function(){return Object(pe.createElement)("p",{ref:this.hole,style:{textDecoration:"underline"}})},t}(pe.Component),xe=function(){function e(e,t,n,r){var o=this;this.putContentDomInRef=function(){o.ref.current.append(o.contentDOM)},this.attrs=e.attrs,this.node=e,this.view=t,this.getPos=n,this.decorations=r,this.ref=Object(pe.createRef)(),this.dom=document.createElement("span"),this.contentDOM=document.createElement("span"),this.dom.classList.add("node__dom"),this.contentDOM.classList.add("node__content-dom"),be.a.render(Object(pe.createElement)(Ce,{ref:this.ref}),this.dom,this.putContentDomInRef)}return e.prototype.update=function(e){return!0},e.prototype.destroy=function(){be.a.unmountComponentAtNode(this.dom)},e}(),ke={underline:function(e,t,n,r){return new xe(e,t,n,r)}};!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!==typeof document){var r=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===n&&r.firstChild?r.insertBefore(o,r.firstChild):r.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}("#editor {\n  border: 1px solid black; }\n");var Me=function(e){function t(t){var n=e.call(this,t)||this;return n.createEditorView=function(e){null!=e&&(n.editorView=new le.a(e,{nodeViews:ke,state:n.editorState}))},n.editorState=de.b.create({schema:Ee,plugins:Pe()}),n.editorRef=Object(pe.createRef)(),n}return we(t,e),t.prototype.componentDidMount=function(){this.createEditorView(this.editorRef.current),this.forceUpdate()},t.prototype.componentWillUnmount=function(){this.editorView&&this.editorView.destroy()},t.prototype.shouldComponentUpdate=function(){return!1},t.prototype.render=function(){return Object(pe.createElement)("div",{id:"editor",ref:this.editorRef})},t}(pe.Component);function Ae(){var e=Object(u.a)(["\n"]);return Ae=function(){return e},e}function De(e){var t=e.className;return r.createElement(je,{className:t},r.createElement(ie,null,r.createElement(Me,null)))}var je=d.a.div(Ae()),Re=n(184),Ve=n(4),Se=n(182),_e=n(186),Ie=n(71),Te=n(183),Ne=n(8),Ue=n(2),qe=n(14),Be=n.n(qe),Fe=function(e,t){return(Fe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function Le(e,t){function n(){this.constructor=e}Fe(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var $e=function(){return($e=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function ze(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var We,Ke=function(){function e(){this.listeners={}}return e.prototype.on=function(e,t){this.listeners[e]||(this.listeners[e]=new Set),this.listeners[e].add(t)},e.prototype.off=function(e,t){this.listeners[e]&&this.listeners[e].has(t)&&this.listeners[e].delete(t)},e.prototype.emit=function(e,t){this.listeners[e]&&this.listeners[e].forEach((function(e){return e(t)}))},e.prototype.destroy=function(){this.listeners={}},e}();function Ge(){return void 0===We&&(We="undefined"!==typeof window&&"performance"in window&&["measure","clearMeasures","clearMarks","getEntriesByName","getEntriesByType","now"].every((function(e){return!!performance[e]}))),We}var He=new Map;function Qe(e){Ge()&&(performance.mark(e+"::start"),He.set(e,performance.now()))}function Je(e,t){if(Ge()){performance.mark(e+"::end");var n=t?He.get(e):void 0;try{performance.measure(e,e+"::start",e+"::end")}catch(o){}finally{if(t){var r=performance.getEntriesByName(e).pop();r?t(r.duration,r.startTime):n&&t(performance.now()-n,n)}!function(e){if(!Ge())return;He.delete(e),performance.clearMarks(e+"::start"),performance.clearMarks(e+"::end"),performance.clearMeasures(e)}(e)}}}var Xe,Ye=function(e){try{e.check()}catch(t){return!1}return!0};!function(e){e[e.selectedInRange=0]="selectedInRange",e[e.selectedInside=1]="selectedInside"}(Xe||(Xe={}));var Ze=function(e,t){var n={type:e.type.name,pos:t,nodeSize:e.nodeSize},r=et(e.content,t);r.length>0&&(n.content=r);var o=nt(e);return o.length>0&&(n.marks=o),n},et=function(e,t){if(!e||!e.content||!e.content.length)return[];var n=[],r=e.content;if(r[0].isBlock){var o;n=r.map((function(e){return t+=o?o.nodeSize:1,o=e,Ze(e,t)}))}else{var i=tt(r,t);n=i.inlineNodes,t=i.pos}return n},tt=function(e,t){return{inlineNodes:e.map((function(e){var n=e.nodeSize,r={type:e.type.name,pos:t,nodeSize:n},o=nt(e);return o.length>0&&(r.marks=o),t+=n,r})),pos:t}},nt=function(e){return e.marks.map((function(e){return e.type.name}))},rt={plugins:["underline","blockquote"],nodes:["doc","paragraph","text","bulletList","orderedList","listItem","heading","blockquote","codeBlock"],marks:["link","em","strong","textColor","strike","subsup","underline","code","typeAheadQuery","alignment","breakout","indentation","annotation","unsupportedMark","unsupportedNodeAttribute"]};function ot(e){return function(t,n){return rt[e].indexOf(t.name)-rt[e].indexOf(n.name)}}function it(e){var t=e.reduce((function(e,t){return t.pluginsOptions&&Object.keys(t.pluginsOptions).forEach((function(n){e[n]||(e[n]=[]),e[n].push(t.pluginsOptions[n])})),e}),{});return e.reduce((function(e,n){var r,o,i;return n.pmPlugins&&(r=e.pmPlugins).push.apply(r,n.pmPlugins(n.name?t[n.name]:void 0)),n.nodes&&(o=e.nodes).push.apply(o,n.nodes()),n.marks&&(i=e.marks).push.apply(i,n.marks()),n.primaryToolbarComponent&&e.primaryToolbarComponents.push(n.primaryToolbarComponent),e}),{nodes:[],marks:[],pmPlugins:[],primaryToolbarComponents:[]})}function at(e){var t=e.editorConfig,n=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["editorConfig"]);return t.pmPlugins.sort(ot("plugins")).map((function(e){return(0,e.plugin)(n)})).filter((function(e){return"undefined"!==typeof e}))}var ct={content:"block+"},st={content:"paragraph+",group:"block",defining:!0,selectable:!1,parseDOM:[{tag:"blockquote"}],toDOM:function(){return["blockquote",0]}},ut={content:"inline*",group:"block",selectable:!1,parseDOM:[{tag:"p"}],toDOM:function(){return["p",0]}},pt={group:"inline",toDebugString:function(){return"text_node"}};function dt(e,t){var n=e.selection,r=n.$from,o=n.$to;if(e.selection instanceof Ve.c&&e.selection.node.isBlock)return!(!r.parentOffset||!Object(Ne.f)(e.doc,r.pos))&&(t&&t(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.parent.isBlock)return!1;if(t){var i=o.parentOffset==o.parent.content.size,a=e.tr;e.selection instanceof Ve.g&&a.deleteSelection();var c=0==r.depth?void 0:r.node(-1).contentMatchAt(r.indexAfter(-1)).defaultType,s=i&&c?[{type:c}]:void 0,u=Object(Ne.f)(a.doc,a.mapping.map(r.pos),1,s);if(!s&&!u&&c&&Object(Ne.f)(a.doc,a.mapping.map(r.pos),1,c&&[{type:c}])&&(s=[{type:c}],u=!0),u&&c){a.split(a.mapping.map(r.pos),1,s);var p=!i&&!r.parentOffset&&r.parent.type!=c,d=r.node(-1).canReplace(r.index(-1),r.indexAfter(-1),Ue.c.from(c.create()));p&&d&&a.setNodeMarkup(a.mapping.map(r.before()),c)}t(a.scrollIntoView())}return!0}function lt(e,t){var n=e.selection,r=n.$from,o=n.$to;if(r.parent.inlineContent||o.parent.inlineContent)return!1;var i=r.parent.contentMatchAt(o.indexAfter()).defaultType;if(!i||!i.isTextblock)return!1;var a=i.createAndFill();if(t&&a){var c=(!r.parentOffset&&o.index()<o.parent.childCount?r:o).pos,s=e.tr.insert(c,a);s.setSelection(Ve.g.create(s.doc,c+1)),t(s.scrollIntoView())}return!0}var ft,ht=function(e){return{name:"base",pmPlugins:function(){return[{name:"history",plugin:function(){return Object(_e.a)()}},{name:"baseKeyMap",plugin:function(){return Object(Ie.a)(Te.a)}},{name:"otherKeyMap",plugin:function(){return Object(Ie.a)({"Ctrl-p":lt,"Ctrl-s":dt})}}]},nodes:function(){return[{name:"doc",node:ct},{name:"paragraph",node:ut},{name:"text",node:pt}]}}},mt=function(){function e(e,t,n,r,o,i,a,c,s){var u=this;void 0===c&&(c=!1),this.handleRef=function(e){return u._handleRef(e)},this.node=e,this.view=t,this.getPos=n,this.portalProviderAPI=r,this.reactComponentProps=i||{},this.reactComponent=a,this.hasContext=c,this._viewShouldUpdate=s,this.eventDispatcher=o}return e.prototype.init=function(){var e=this;this.domRef=this.createDomRef(),this.setDomAttrs(this.node,this.domRef);var t=this.getContentDOM()||{dom:void 0,contentDOM:void 0},n=t.dom,r=t.contentDOM;return this.domRef&&n&&(this.domRef.appendChild(n),this.contentDOM=r||n,this.contentDOMWrapper=n||r),this.domRef.classList.add(this.node.type.name+"View-content-wrap"),this.renderReactComponent((function(){return e.render(e.reactComponentProps,e.handleRef)})),this},e.prototype.renderReactComponent=function(e){this.domRef&&e&&this.portalProviderAPI.render(e,this.domRef,this.hasContext)},e.prototype.createDomRef=function(){return this.node.isInline?document.createElement("span"):document.createElement("div")},e.prototype.getContentDOM=function(){},e.prototype._handleRef=function(e){var t=this.contentDOMWrapper||this.contentDOM;e&&t&&!e.contains(t)&&e.appendChild(t)},e.prototype.render=function(e,t){return this.reactComponent?o.a.createElement(this.reactComponent,$e({view:this.view,getPos:this.getPos,node:this.node,forwardRef:t},e)):null},e.prototype.update=function(e,t,n){var r=this;return void 0===n&&(n=function(){return!0}),!(this.node.type!==e.type||!n(this.node,e))&&(this.domRef&&!this.node.sameMarkup(e)&&this.setDomAttrs(e,this.domRef),this.viewShouldUpdate(e)?(this.node=e,this.renderReactComponent((function(){return r.render(r.reactComponentProps,r.handleRef)})),!0):(this.node=e,!0))},e.prototype.viewShouldUpdate=function(e){return!this._viewShouldUpdate||this._viewShouldUpdate(e)},e.prototype.setDomAttrs=function(e,t){Object.keys(e.attrs||{}).forEach((function(n){t.setAttribute(n,e.attrs[n])}))},Object.defineProperty(e.prototype,"dom",{get:function(){return this.domRef},enumerable:!1,configurable:!0}),e.prototype.destroy=function(){this.domRef&&(this.portalProviderAPI.remove(this.domRef),this.domRef=void 0,this.contentDOM=void 0)},e.fromComponent=function(t,n,r,o,i){return function(a,c,s){return new e(a,c,s,n,r,o,t,!1,i).init()}},e}(),vt=Object(r.forwardRef)((function(e,t){return o.a.createElement(gt,{ref:t})})),gt=d.a.blockquote(ft||(ft=ze(["\n  box-sizing: border-box;\n  color: #6a737d;\n  padding: 0 1em;\n  border-left: 4px solid #dfe2e5;\n  margin: 0.2rem 0 0 0;\n  margin-right: 0;\n\n  [dir='rtl'] & {\n    padding-left: 0;\n    padding-right: 4px;\n  }\n\n  &:first-child {\n    margin-top: 0;\n  }\n\n  &::before {\n    content: '';\n  }\n\n  &::after {\n    content: none;\n  }\n\n  & p {\n    display: block;\n  }\n\n  & table,\n  & table:last-child {\n    display: inline-table;\n  }\n"],["\n  box-sizing: border-box;\n  color: #6a737d;\n  padding: 0 1em;\n  border-left: 4px solid #dfe2e5;\n  margin: 0.2rem 0 0 0;\n  margin-right: 0;\n\n  [dir='rtl'] & {\n    padding-left: 0;\n    padding-right: 4px;\n  }\n\n  &:first-child {\n    margin-top: 0;\n  }\n\n  &::before {\n    content: '';\n  }\n\n  &::after {\n    content: none;\n  }\n\n  & p {\n    display: block;\n  }\n\n  & table,\n  & table:last-child {\n    display: inline-table;\n  }\n"]))),bt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Le(t,e),t.prototype.getContentDOM=function(){var e=document.createElement("div");return e.classList.add(this.node.type.name+"-dom-wrapper"),{dom:e}},t.prototype.render=function(e,t){return o.a.createElement(vt,{ref:t})},t}(mt);function yt(e,t,n){return function(r,o,i){return new bt(r,o,i,e,t,{options:n}).init()}}var wt=new Ve.e("blockQuotePlugin");var Et={mac:!1,ie:!1,ie_version:0,gecko:!1,chrome:!1,chrome_version:0,android:!1,ios:!1,webkit:!1};if("undefined"!==typeof navigator){var Ot=/Edge\/(\d+)/.exec(navigator.userAgent),Pt=/MSIE \d/.test(navigator.userAgent),Ct=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);Et.mac=/Mac/.test(navigator.platform);var xt=Et.ie=!!(Pt||Ct||Ot);Et.ie_version=Pt?document.documentMode||6:Ct?+Ct[1]:Ot?+Ot[1]:null,Et.gecko=!xt&&/gecko\/\d/i.test(navigator.userAgent),Et.chrome=!xt&&/Chrome\//.test(navigator.userAgent),Et.chrome_version=parseInt((navigator.userAgent.match(/Chrome\/(\d{2})/)||[])[1],10),Et.android=/Android \d/.test(navigator.userAgent),Et.ios=!xt&&/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),Et.webkit=!xt&&!!document.documentElement&&"WebkitAppearance"in document.documentElement.style}var kt=Et;Rt("Bold","Mod-b"),Rt("Italic","Mod-i"),Rt("Underline","Mod-u"),Rt("Code","Mod-Shift-m"),Rt("Normal text","Mod-Alt-0"),Rt("Heading 1","Mod-Alt-1");var Mt=Rt("Quote","Ctrl-b"),At=(Rt("Insert new line","Shift-Enter"),Rt("Shift Backspace","Shift-Backspace"),Rt("Split code block","Enter"),Rt("Undo","Mod-z"),Rt("Move up","ArrowUp"),Rt("Move down","ArrowDown"),Rt("Move left","ArrowLeft"),Rt("Move right","ArrowRight"),Rt("Backspace","Backspace"),Rt("Delete","Delete"),Rt("Space","Space"),Rt("Escape","Escape"),Rt("Next cell","Tab"),Rt("Previous cell","Shift-Tab"),Rt("Table","Shift-Alt-t"),Rt("Cut","Mod-x"),Rt("Copy","Mod-c"),Rt("Paste","Mod-v"),Rt("Paste","Mod-Shift-v"),Rt("Find","Mod-f"),{ARROWLEFT:"\u2190",ARROWRIGHT:"\u2192",ARROWUP:"\u2191",ARROWDOWN:"\u2193"}),Dt=d.a.span(jt||(jt=ze(["\n  border-radius: 2px;\n  background-color: blue;\n  padding: 0 2px;\n"],["\n  border-radius: 2px;\n  background-color: blue;\n  padding: 0 2px;\n"])));var jt;o.a.memo((function(e){var t=e.description,n=e.shortcutOverride,r=e.keymap,i=n||r&&function(e){var t=(kt.mac?e.mac.replace(/Cmd/i,"\u2318").replace(/Shift/i,"\u21e7").replace(/Ctrl/i,"\u2303").replace(/Alt/i,"\u2325").replace(/Backspace/i,"\u232b").replace(/Enter/i,"\u23ce"):e.windows.replace(/Backspace/i,"\u232b")).split("-"),n=t[t.length-1];return 1===n.length&&(n=n.toUpperCase()),t[t.length-1]=At[n.toUpperCase()]||n,t.join(kt.mac?"":"+")}(r);return i||t?o.a.createElement(o.a.Fragment,null,t,i&&t&&"\xa0",i&&o.a.createElement(Dt,null,i)):null}));function Rt(e,t){return function(e,t,n,r){return{description:e,windows:t,mac:n,common:r}}(e,t.replace(/Mod/i,"Ctrl"),t.replace(/Mod/i,"Cmd"),t)}var Vt=function(e){return void 0===e&&(e={}),{name:"blockquote",nodes:function(){return[{name:"blockquote",node:st}]},pmPlugins:function(){return[{name:"blockquote",plugin:function(t){return function(e,t,n){return new Ve.d({state:{init:function(e,t){return{count:0}},apply:function(e,t,n,r){if(e.docChanged||e.selectionSet){r.selection;return $e($e({},t),{count:t.count+1})}return t}},key:wt,props:{nodeViews:{blockquote:yt(e,t,n)}}})}(t.portalProviderAPI,t.eventDispatcher,e)}},{name:"blockquoteKeyMap",plugin:function(){return function(){var e={};return function(e,t,n){var r=n[e],o=t;n[e]&&(o=function(e,n,o){return r(e,n)||t(e,n,o)}),n[e]=o}(Mt.common,(function(e,t){var n=e.selection,r=n.$from,o=(n.$to,e.schema.nodes.blockquote.createAndFill()),i=r.end();return o&&t&&t(e.tr.insert(i+1,o)),!1}),e),Object(Ie.a)(e)}()}}]},pluginsOptions:{}}},St=function(){function e(){this.plugins=[]}return e.prototype.add=function(e){return this.plugins.push(e),this},e.prototype.has=function(e){return this.plugins.some((function(t){return Array.isArray(t)?t[0]===e:t===e}))},e.prototype.getEditorPlugins=function(e){var t=this.processEditorPlugins();return this.removeExcludedPlugins(t,e)},e.prototype.processEditorPlugins=function(){var e=new Map;this.plugins.forEach((function(t){if(Array.isArray(t)){var n=t[0],r=t[1];e.set(n,r)}else{if(e.has(t)&&void 0===e.get(t))throw new Error(t+" is already included!");e.set(t,void 0)}}));var t=[];return e.forEach((function(e,n){t.push(n(e))})),t},e.prototype.removeExcludedPlugins=function(e,t){return t?e.filter((function(e){return!e||!t.has(e.name)})):e},e}();function _t(e){var t=function(e){var t=Object.keys(e),n=new Set(t.map((function(t){return e[t].group})));return t.forEach((function(t){var r=e[t];r.excludes&&(r.excludes=r.excludes.split(" ").filter((function(e){return n.has(e)})).join(" "))})),e}(e.marks.sort(ot("marks")).reduce((function(e,t){return e[t.name]=t.mark,e}),{})),n=e.nodes.sort(ot("nodes")).reduce((function(e,t){return e[t.name]=t.node,e}),{});return new Ue.h({nodes:n,marks:t})}var It=function(e){function t(t){var n,r=e.call(this,t)||this;return r.canDispatchTransactions=!0,r.createEditorState=function(e){if(r.editorView)return console.warn("The editor does not support changing the schema dynamically."),r.editorState;r.config=it(r.getPlugins(e.props.editorProps,void 0));var t=_t(r.config),n=at({schema:t,dispatch:r.dispatch,editorConfig:r.config,eventDispatcher:r.eventDispatcher,portalProviderAPI:r.props.portalProviderAPI});return Ve.b.create({schema:t,plugins:n,doc:void 0,selection:void 0})},r.reconfigureState=function(e){if(r.editorView){r.editorView.dom instanceof HTMLElement&&r.editorView.hasFocus()&&r.editorView.dom.blur(),r.config=it(r.getPlugins(e.editorProps,r.props.editorProps));var t=r.editorState,n=at({schema:t.schema,dispatch:r.dispatch,editorConfig:r.config,eventDispatcher:r.eventDispatcher,portalProviderAPI:e.portalProviderAPI}),o=t.reconfigure({plugins:n});return r.editorView.updateState(o),r.editorView.update($e($e({},r.editorView.props),{state:o}))}},r.dispatchTransaction=function(e){if(r.editorView){Qe("\ud83e\udd89 ReactEditorView::dispatchTransaction");var t=function(e){var t=[];return(e.steps||[]).forEach((function(n){for(var r=n.to,o=n.from,i=n.slice,a=i&&i.content?i.content.size:0,c=function(n){if(n<=e.doc.content.size){var r=e.doc.resolve(n).node(1);r&&!t.find((function(e){return e===r}))&&t.push(r)}},s=o;s<=r+a;s++)c(s)})),t}(e);if(function(e){return e.every(Ye)}(t)){var n=r.editorView.state;Qe("\ud83e\udd89 EditorView::state::apply");var o=r.editorView.state.apply(e);if(Je("\ud83e\udd89 EditorView::state::apply"),o===n)return;Qe("\ud83e\udd89 EditorView::updateState"),r.editorView.updateState(o),Je("\ud83e\udd89 EditorView::updateState"),r.editorState=o}else{var i=t.filter((function(e){return!Ye(e)})).map((function(e){return function(e){try{return Ze(e,0)}catch(t){return"Error logging document structure: "+t}}(e)}));console.error("Invalid nodes in transaction"),console.log(e),console.log(i)}Je("\ud83e\udd89 ReactEditorView::dispatchTransaction",(function(){}))}},r.getDirectEditorProps=function(e){return{state:e||r.editorState,dispatchTransaction:function(e){r.canDispatchTransactions&&r.dispatchTransaction(e)},editable:function(e){return!0},attributes:{"data-gramm":"false"}}},r.handleEditorViewRef=function(e){if(!r.editorView&&e){r.createEditorView(e);var t=r.editorView;r.props.editorProps.shouldFocus&&(r.focusTimeoutId=function(e){if(e.hasFocus())return;return window.setTimeout((function(){e.focus()}),0)}(t)),r.forceUpdate()}else r.editorView&&!e&&(r.editorView.destroy(),r.editorView=void 0)},r.editor=o.a.createElement("div",{className:kt.chrome?"ua-chrome":kt.ie?"ua-ie":kt.gecko?"ua-firefox":"",key:"ProseMirror",ref:r.handleEditorViewRef}),r.eventDispatcher=new Ke,r.dispatch=(n=r.eventDispatcher,function(e,t){if(!e)throw new Error("event name is required!");var r="string"===typeof e?e:e.key;n.emit(r,t)}),r.editorState=r.createEditorState({props:t,replaceDoc:!0}),r}return Le(t,e),t.prototype.componentDidMount=function(){this.canDispatchTransactions=!0},t.prototype.componentWillUnmount=function(){if(this.eventDispatcher.destroy(),clearTimeout(this.focusTimeoutId),this.editorView){var e=this.editorView.state;e.plugins.forEach((function(t){var n=t.getState(e);n&&n.destroy&&n.destroy()}))}},t.prototype.getPlugins=function(e,t){return function(e,t){var n=new St;return n.add(ht),n.add(Vt),n.getEditorPlugins()}()},t.prototype.createEditorView=function(e){this.editorView=new Se.a({mount:e},this.getDirectEditorProps()),Object(Re.a)(this.editorView)},t.prototype.render=function(){return this.props.render?this.props.render({editor:this.editor,view:this.editorView,config:this.config,eventDispatcher:this.eventDispatcher}):this.editor},t}(o.a.Component);var Tt=function(){function e(){this.listeners=[]}return e.from=function(t,n,r){var o=new e;return o._privateRegisterEditor(t,n,r),o},e.prototype._privateGetEditorView=function(){return this.editorView},e.prototype._privateGetEventDispatcher=function(){return this.eventDispatcher},e.prototype._privateRegisterEditor=function(e,t,n){if(this.contentTransformer=n,this.eventDispatcher=t,!this.editorView&&e)this.editorView=e,this.listeners.forEach((function(n){return n(e,t)}));else if(this.editorView!==e)throw new Error("Editor has already been registered! It's not allowed to re-register editor with the new Editor instance.");this.contentTransformer&&(this.contentEncode=this.contentTransformer.encode.bind(this.contentTransformer))},e.prototype._privateUnregisterEditor=function(){this.editorView=void 0,this.contentTransformer=void 0,this.contentEncode=void 0,this.eventDispatcher=void 0},e.prototype._privateSubscribe=function(e){this.editorView&&this.eventDispatcher&&e(this.editorView,this.eventDispatcher),this.listeners.push(e)},e.prototype._privateUnsubscribe=function(e){this.listeners=this.listeners.filter((function(t){return t!==e}))},e.prototype.focus=function(){return!(!this.editorView||this.editorView.hasFocus())&&(this.editorView.focus(),this.editorView.dispatch(this.editorView.state.tr.scrollIntoView()),!0)},e.prototype.blur=function(){return!(!this.editorView||!this.editorView.hasFocus())&&(this.editorView.dom.blur(),!0)},e.prototype.clear=function(){if(!this.editorView)return!1;var e=this.editorView,t=e.state,n=e.state.tr.setSelection(Ve.g.create(t.doc,0,t.doc.nodeSize-2)).deleteSelection();return e.dispatch(n),!0},e.prototype.appendText=function(e){if(!this.editorView||!e)return!1;var t=this.editorView.state,n=t.doc.lastChild;if(n&&n.type!==t.schema.nodes.paragraph)return!1;var r=t.tr.insertText(e).scrollIntoView();return this.editorView.dispatch(r),!0},e}(),Nt=function(e){function t(t){var n=e.call(this,t)||this;return n.editorActions=t.editorActions||new Tt,n}return Le(t,e),t.prototype.getChildContext=function(){return{editorActions:this.editorActions}},t.prototype.render=function(){return o.a.Children.only(this.props.children)},t.childContextTypes={editorActions:Be.a.object},t}(o.a.Component),Ut=function(e){function t(){var t=e.call(this)||this;return t.portals=new Map,t.setContext=function(e){t.context=e},t}return Le(t,e),t.prototype.render=function(e,t,n){void 0===n&&(n=!1),this.portals.set(t,{children:e,hasReactContext:n});var r=e();Object(i.unstable_renderSubtreeIntoContainer)(this.context,r,t)},t.prototype.forceUpdate=function(){var e=this;this.portals.forEach((function(t,n){if(t.hasReactContext){var r=t.children();Object(i.unstable_renderSubtreeIntoContainer)(e.context,r,n)}}))},t.prototype.remove=function(e){this.portals.delete(e);try{Object(i.unmountComponentAtNode)(e)}catch(t){console.warn("Race condition in PortalProviderAPI where PM removed DOM node before React unmounted it")}},t}(Ke),qt=function(e){function t(t){var n=e.call(this,t)||this;return n.portalProviderAPI=new Ut,n}return Le(t,e),t.prototype.render=function(){return this.props.render(this.portalProviderAPI)},t.prototype.componentDidUpdate=function(){this.portalProviderAPI.forceUpdate()},t.displayName="PortalProvider",t}(o.a.Component),Bt=function(e){function t(t){var n=e.call(this,t)||this;return n.handleUpdate=function(e){return n.setState({portals:e})},t.portalProviderAPI.setContext(n),t.portalProviderAPI.on("update",n.handleUpdate),n.state={portals:new Map},n}return Le(t,e),t.prototype.render=function(){var e=this.state.portals;return o.a.createElement(o.a.Fragment,null,Array.from(e.entries()).map((function(e){var t=e[0],n=e[1];return Object(i.createPortal)(n,t)})))},t}(o.a.Component);function Ft(e){return o.a.createElement(Wt,null,o.a.createElement(Kt,null))}var Lt,$t,zt,Wt=d.a.div(Lt||(Lt=ze(["\n  background: snow;\n  border: 1px solid black;\n  border-bottom: 0;\n  padding: 10px;\n  & > h2 {\n    margin: 0 0 5px 0;\n  }\n"],["\n  background: snow;\n  border: 1px solid black;\n  border-bottom: 0;\n  padding: 10px;\n  & > h2 {\n    margin: 0 0 5px 0;\n  }\n"]))),Kt=d.a.div($t||($t=ze(["\n  display: flex;\n"],["\n  display: flex;\n"])));d.a.div(zt||(zt=ze(["\n  display: flex;\n"],["\n  display: flex;\n"])));function Gt(e){var t=e.className,n=e.editorDOMElement;return o.a.createElement(Jt,{className:t},o.a.createElement(Ft,null),o.a.createElement(Xt,null,n))}var Ht,Qt,Jt=d.a.div(Ht||(Ht=ze([""],[""]))),Xt=d.a.div(Qt||(Qt=ze(["\n  border: 1px solid black;\n  & > .ProseMirror {\n    min-height: 140px;\n    overflow-wrap: break-word;\n    outline: none;\n    padding: 10px;\n    white-space: pre-wrap;\n  }\n"],["\n  border: 1px solid black;\n  & > .ProseMirror {\n    min-height: 140px;\n    overflow-wrap: break-word;\n    outline: none;\n    padding: 10px;\n    white-space: pre-wrap;\n  }\n"])));function Yt(e){var t=e.appearance,n=void 0===t?"full-page":t,i=Object(r.useState)(new Tt)[0];return o.a.createElement(Nt,{editorActions:i},o.a.createElement(qt,{render:function(t){return o.a.createElement(o.a.Fragment,null,o.a.createElement(It,{editorProps:e,portalProviderAPI:t,render:function(e){var t=e.editor,r=e.view,a=e.eventDispatcher,c=e.config;return o.a.createElement(Gt,{appearance:n,editorActions:i,editorDOMElement:t,editorView:r,eventDispatcher:a,primaryToolbarComponents:c.primaryToolbarComponents})}}),o.a.createElement(Bt,{portalProviderAPI:t}))}}))}function Zt(){var e=Object(u.a)(["\n"]);return Zt=function(){return e},e}function en(e){var t=e.className;return r.createElement(tn,{className:t},r.createElement(ie,null,r.createElement(Yt,{performanceTracking:!0})))}var tn=d.a.div(Zt()),nn=function(){return r.createElement(c.a,{basename:"/prosemirror-react-typescript-example"},r.createElement(s.d,null,r.createElement(E,{exact:!0,path:"/",component:se}),r.createElement(E,{exact:!0,path:"/minimal",component:De}),r.createElement(E,{exact:!0,path:"/atlassian",component:en}),r.createElement(s.a,{to:"/"})))};Object(i.render)(r.createElement(nn,null),document.getElementById("root"))}},[[189,1,2]]]);
//# sourceMappingURL=main.ec292594.chunk.js.map