/*! For license information please see main.a7f77b72.chunk.js.LICENSE.txt */
(this["webpackJsonpexample-app"]=this["webpackJsonpexample-app"]||[]).push([[0],{198:function(e,t,n){e.exports=n(443)},443:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),i=n(14),a=n(73),s=n(11),c=n(15),u=n(131),l=n(6);function p(){var e=Object(c.a)(["\n  box-sizing: border-box;\n  color: #fff;\n  cursor: pointer;\n  font-size: 1rem;\n  padding: 0.5rem 1rem;\n  text-decoration: none;\n  transition: 0.2s hover;\n  &:hover {\n    text-decoration: underline;\n  }\n  &.current {\n    font-weight: 600;\n  }\n"]);return p=function(){return e},e}function d(){var e=Object(c.a)(["\n  align-items: center;\n  display: flex;\n"]);return d=function(){return e},e}function f(){var e=Object(c.a)(["\n  background: #551a8b;\n  box-shadow: 0 0 2px 2px rgba(0,0,0,0.18);\n  padding: 1rem;\n"]);return f=function(){return e},e}function h(e){var t=e.className;return o.a.createElement(m,{className:t},o.a.createElement(v,null,o.a.createElement(g,{to:"/",exact:!0,activeClassName:"current"},"Full"),o.a.createElement(g,{to:"/minimal",activeClassName:"current"},"Minimal"),o.a.createElement(g,{to:"/atlassian",activeClassName:"current"},"Atlassian")))}var m=l.default.div(f()),v=l.default.nav(d()),g=Object(l.default)(a.b)(p());function b(){var e=Object(c.a)(["\n  margin: 40px auto 0 auto;\n  max-width: 680px;\n  padding-bottom: 20px;\n  @media only screen and (max-width: 720px) {\n    margin: 40px 20px 0 20px;\n    padding-bottom: 20px;\n  }\n"]);return b=function(){return e},e}function y(){var e=Object(c.a)(["\n  background: snow;\n  min-height: 100vh;\n"]);return y=function(){return e},e}var x=function(e){var t,n=e.component,o=Object(u.a)(e,["component"]);return r.createElement(s.b,Object.assign({},o,{render:(t=n,function(e){return r.createElement(w,null,r.createElement(h,e),r.createElement(E,null,r.createElement(t,e)))})}))},w=l.default.div(y()),E=l.default.main(b()),k=n(177),O=n(5),P=n(193),C=n(40),S=n.n(C),M=n(3),A=n(196),D=n(130),I=n(122),R=n(9),j=n(127),T=function(){function e(){}return e.prototype.init=function(e){this._editorView=e},Object.defineProperty(e.prototype,"editorView",{get:function(){if(!this._editorView)throw Error("EditorActions editorView accessed without editorView instance");return this._editorView},enumerable:!1,configurable:!0}),e.prototype.focus=function(){return!(!this._editorView||this._editorView.hasFocus())&&(this._editorView.focus(),this._editorView.dispatch(this._editorView.state.tr.scrollIntoView()),!0)},e.prototype.blur=function(){return!(!this._editorView||!this._editorView.hasFocus())&&(this._editorView.dom.blur(),!0)},e}(),V=function(){function e(){this.portals=new Map}return e.prototype.render=function(e,t){if(!this.portals.has(t)){var n=Object(i.createPortal)(e,t);this.portals.set(t,n),S.a.publish("portals-update",{portal:n,container:t})}},e.prototype.remove=function(e){var t=this.portals.get(e);this.portals.delete(e),S.a.publish("portals-delete",{portal:t,container:e})},e}(),_=Object(r.createContext)({editorActions:new T,portalProvider:new V}),F=function(){return Object(r.useContext)(_)},B=new M.h({nodes:{doc:{content:"block+"},paragraph:{group:"block",content:"inline*",attrs:{spellcheck:{default:"false"}},parseDOM:[{tag:"p"}],toDOM:function(e){return["p",e.attrs,0]}},underline:{group:"block",content:"inline*",attrs:{spellcheck:{default:"false"}},parseDOM:[{tag:"p"}],toDOM:function(e){return["p",e.attrs,0]}},blockquote:{content:"paragraph+",group:"block",defining:!0,selectable:!1,parseDOM:[{tag:"blockquote"}],toDOM:function(){return["blockquote",0]}},pmblockquote:{content:"paragraph+",group:"block",defining:!0,selectable:!1,attrs:{class:{default:"pm-blockquote"}},parseDOM:[{tag:"blockquote"}],toDOM:function(e){return["blockquote",e.attrs,0]}},text:{group:"inline"}},marks:{em:{parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style=italic"}],toDOM:function(){return["em",0]}},strong:{parseDOM:[{tag:"strong"},{tag:"b",getAttrs:function(e){return e instanceof HTMLElement?"normal"!==e.style.fontWeight&&null:null}},{style:"font-weight",getAttrs:function(e){return"string"===typeof e?/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null:null}}],toDOM:function(){return["strong",0]}}}});function N(e,t){var n=e.selection,r=n.$from,o=n.$to;if(e.selection instanceof O.c&&e.selection.node.isBlock)return!(!r.parentOffset||!Object(R.f)(e.doc,r.pos))&&(t&&t(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.parent.isBlock)return!1;if(t){var i=o.parentOffset==o.parent.content.size,a=e.tr;e.selection instanceof O.g&&a.deleteSelection();var s=0==r.depth?void 0:r.node(-1).contentMatchAt(r.indexAfter(-1)).defaultType,c=i&&s?[{type:s}]:void 0,u=Object(R.f)(a.doc,a.mapping.map(r.pos),1,c);if(!c&&!u&&s&&Object(R.f)(a.doc,a.mapping.map(r.pos),1,s&&[{type:s}])&&(c=[{type:s}],u=!0),u&&s){a.split(a.mapping.map(r.pos),1,c);var l=!i&&!r.parentOffset&&r.parent.type!=s,p=r.node(-1).canReplace(r.index(-1),r.indexAfter(-1),M.c.from(s.create()));l&&p&&a.setNodeMarkup(a.mapping.map(r.before()),s)}t(a.scrollIntoView())}return!0}function q(e,t){var n=e.selection,r=n.$from,o=(n.$to,B.nodes.underline.createAndFill()),i=r.end();o&&t&&t(e.tr.insert(i+1,o));return!1}function U(e,t){var n=e.selection,r=n.$from,o=(n.$to,e.schema.nodes.blockquote.createAndFill()),i=r.end();o&&t&&t(e.tr.insert(i+1,o));return!1}function z(e,t){var n=e.selection,r=n.$from,o=(n.$to,e.schema.nodes.pmblockquote.createAndFill()),i=r.end();o&&t&&t(e.tr.insert(i+1,o));return!1}var L=function(){var e=[];return e.push(Object(A.a)()),e.push(Object(D.a)(I.a)),e.push(Object(D.a)({"Ctrl-n":q,"Ctrl-b":U,"Ctrl-p":z,"Ctrl-s":N})),e},H=function(e,t){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function W(e,t){function n(){this.constructor=e}H(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var $=function(){return($=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function K(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var Q,G=function(){function e(e,t,n,r,o,i,a){var s=this;this.handleRef=function(e){return s._handleRef(e)},this.node=e,this.view=t,this.getPos=n,this.portalProvider=r,this.reactComponentProps=o||{},this.reactComponent=i,this._viewShouldUpdate=a}return Object.defineProperty(e.prototype,"dom",{get:function(){return this.domRef},enumerable:!1,configurable:!0}),e.prototype.init=function(){var e;this.domRef=this.createDOM(),this.setDomAttrs(this.node,this.domRef),this.domRef.classList.add(this.node.type.name+"__nodeview-dom");var t=null!==(e=this.createContentDOM())&&void 0!==e?e:{},n=t.wrapper,r=t.contentDOM;return n&&(this.domRef.appendChild(n),this.contentDOM=null!==r&&void 0!==r?r:n,this.contentDOMWrapper=n),this.renderReactComponent(this.render(this.reactComponentProps,this.handleRef)),this},e.prototype.renderReactComponent=function(e){this.domRef&&e&&this.portalProvider.render(e,this.domRef)},e.prototype.createDOM=function(){return this.node.isInline?document.createElement("span"):document.createElement("div")},e.prototype.createContentDOM=function(){},e.prototype._handleRef=function(e){var t=this.contentDOMWrapper||this.contentDOM;e&&t&&!e.contains(t)&&e.appendChild(t)},e.prototype.render=function(e,t){return this.reactComponent?o.a.createElement(this.reactComponent,$({view:this.view,getPos:this.getPos,node:this.node,forwardRef:t},e)):null},e.prototype.update=function(e,t){return this.domRef&&!this.node.sameMarkup(e)&&this.setDomAttrs(e,this.domRef),this.node=e,!this.viewShouldUpdate(e)||(this.renderReactComponent(this.render(this.reactComponentProps,this.handleRef)),!0)},e.prototype.viewShouldUpdate=function(e){return!this._viewShouldUpdate||this._viewShouldUpdate(e)},e.prototype.setDomAttrs=function(e,t){Object.keys(e.attrs||{}).forEach((function(n){t.setAttribute(n,e.attrs[n])}))},e.prototype.destroy=function(){this.domRef&&(this.portalProvider.remove(this.domRef),this.domRef=void 0,this.contentDOM=void 0)},e.fromComponent=function(t,n,r,o){return function(i,a,s){return new e(i,a,s,n,r,t,o).init()}},e}(),Y=Object(r.forwardRef)((function(e,t){return o.a.createElement(X,{ref:t})})),X=l.default.blockquote(Q||(Q=K(["\n  box-sizing: border-box;\n  color: #6a737d;\n  padding: 0 1em;\n  border-left: 4px solid #dfe2e5;\n  margin: 0.2rem 0 0 0;\n  margin-right: 0;\n\n  [dir='rtl'] & {\n    padding-left: 0;\n    padding-right: 4px;\n  }\n\n  &:first-child {\n    margin-top: 0;\n  }\n\n  &::before {\n    content: '';\n  }\n\n  &::after {\n    content: none;\n  }\n\n  & p {\n    display: block;\n  }\n\n  & table,\n  & table:last-child {\n    display: inline-table;\n  }\n"],["\n  box-sizing: border-box;\n  color: #6a737d;\n  padding: 0 1em;\n  border-left: 4px solid #dfe2e5;\n  margin: 0.2rem 0 0 0;\n  margin-right: 0;\n\n  [dir='rtl'] & {\n    padding-left: 0;\n    padding-right: 4px;\n  }\n\n  &:first-child {\n    margin-top: 0;\n  }\n\n  &::before {\n    content: '';\n  }\n\n  &::after {\n    content: none;\n  }\n\n  & p {\n    display: block;\n  }\n\n  & table,\n  & table:last-child {\n    display: inline-table;\n  }\n"]))),J=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return W(t,e),t.prototype.createContentDOM=function(){var e=document.createElement("div");return e.classList.add(this.node.type.name+"__content-dom-wrapper"),{wrapper:e}},t.prototype.render=function(e,t){return o.a.createElement(Y,{ref:t})},t}(G);function Z(e){return function(t,n,r){return new J(t,n,r,e).init()}}var ee=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return W(t,e),t.prototype.createContentDOM=function(){var e=document.createElement("div");return e.classList.add(this.node.type.name+"__content-dom-wrapper"),{wrapper:e}},t.prototype.render=function(e,t){return o.a.createElement("p",{ref:t,style:{textDecoration:"underline"}})},t}(G);function te(e){return function(t,n,r){return new ee(t,n,r,e).init()}}var ne=function(e){return{underline:te(e),blockquote:Z(e)}};function re(e){e.editorProps;var t=e.EditorLayoutComponent,n=F(),i=n.editorActions,a=n.portalProvider,s=Object(r.useRef)(null),c=Object(r.useState)(),u=(c[0],c[1]),l=Object(r.useState)(),p=(l[0],l[1]);return Object(r.useLayoutEffect)((function(){var e=O.b.create({schema:B,plugins:L()});u(e);var t=s.current;if(t){var n=function(e,t){var n=new k.a({mount:e},{state:t,nodeViews:ne(a)});return Object(P.a)(n),n}(t,e);p(n),i.init(n)}}),[]),o.a.createElement(t,null,o.a.createElement("div",{ref:s}))}var oe=new Map;function ie(){var e=Object(r.useReducer)((function(e){return e+1}),0),t=(e[0],e[1]);Object(r.useEffect)((function(){var e=S.a.subscribe("portals-update",n),t=S.a.subscribe("portals-delete",n);return function(){S.a.unsubscribe(e),S.a.unsubscribe(t)}}),[]);var n=function(e,n){"portals-update"===e?oe.set(n.container,n.portal):oe.delete(n.container),t()};return o.a.createElement(o.a.Fragment,null,Array.from(oe.entries()).map((function(e){e[0];return e[1]})))}var ae,se,ce,ue=l.default.span(ae||(ae=K(["\n  display: flex;\n"],["\n  display: flex;\n"]))),le=l.default.button(se||(se=K(["\n  background: ",";\n  border: ",";\n  cursor: pointer;\n  display: flex;\n  margin-right: 5px;\n  padding: 1px;\n  &:hover {\n    background: #f0f8ff;\n    opacity: 0.6;\n  }\n"],["\n  background: ",";\n  border: ",";\n  cursor: pointer;\n  display: flex;\n  margin-right: 5px;\n  padding: 1px;\n  &:hover {\n    background: #f0f8ff;\n    opacity: 0.6;\n  }\n"])),(function(e){return e.active?"#f0f8ff":"transparent"}),(function(e){return e.active?"1px solid #5a6ecd":"1px solid transparent"})),pe=Object(l.default)((function(e){var t=e.className,n=e.active,r=e.name,i=e.icon,a=e.onClick;return o.a.createElement(le,{className:t,active:n,name:r,onClick:a},o.a.createElement(ue,null,i))}))(ce||(ce=K([""],[""])));function de(e){var t=F().editorActions;function n(e){var n=t.editorView;Object(I.b)(e)(n.state,n.dispatch),t.focus()}return o.a.createElement(me,null,o.a.createElement(ve,null,o.a.createElement(pe,{active:!1,name:"bold",icon:o.a.createElement(j.a,{size:24}),onClick:function(){n(t.editorView.state.schema.marks.strong)}}),o.a.createElement(pe,{active:!1,name:"italic",icon:o.a.createElement(j.b,{size:24}),onClick:function(){n(t.editorView.state.schema.marks.em)}})))}var fe,he,me=l.default.div(fe||(fe=K(["\n  background: snow;\n  border: 1px solid black;\n  border-bottom: 0;\n  padding: 10px;\n"],["\n  background: snow;\n  border: 1px solid black;\n  border-bottom: 0;\n  padding: 10px;\n"]))),ve=l.default.div(he||(he=K(["\n  display: flex;\n"],["\n  display: flex;\n"])));var ge,be,ye=l.default.div(ge||(ge=K([""],[""]))),xe=l.default.div(be||(be=K(["\nborder: 1px solid black;\n& > .ProseMirror {\n  min-height: 140px;\n  overflow-wrap: break-word;\n  outline: none;\n  padding: 10px;\n  white-space: pre-wrap;\n}\n\n.pm-blockquote {\n  box-sizing: border-box;\n  color: #2d82e1;\n  padding: 0 1em;\n  border-left: 4px solid #48a1fa;\n  margin: 0.2rem 0 0 0;\n  margin-right: 0;\n}\n"],["\nborder: 1px solid black;\n& > .ProseMirror {\n  min-height: 140px;\n  overflow-wrap: break-word;\n  outline: none;\n  padding: 10px;\n  white-space: pre-wrap;\n}\n\n.pm-blockquote {\n  box-sizing: border-box;\n  color: #2d82e1;\n  padding: 0 1em;\n  border-left: 4px solid #48a1fa;\n  margin: 0.2rem 0 0 0;\n  margin-right: 0;\n}\n"]))),we={"full-page":function(e){var t=e.className,n=e.children;return o.a.createElement(ye,{className:t},o.a.createElement(de,null),o.a.createElement(xe,null,n))}};function Ee(e){var t=e.appearance,n=void 0===t?"full-page":t,i=Object(r.useMemo)((function(){return we[n]}),[n]);return o.a.createElement(_.Provider,{value:{editorActions:new T,portalProvider:new V}},o.a.createElement(re,{editorProps:e,EditorLayoutComponent:i}),o.a.createElement(ie,null))}function ke(){var e=Object(c.a)(["\n"]);return ke=function(){return e},e}function Oe(e){var t=e.className,n=e.children;return r.createElement(Pe,{className:t},r.createElement("header",null,r.createElement("h1",null,r.createElement("a",{href:"https://teemukoivisto.github.io/prosemirror-react-typescript-example/"},"ProseMirror React Typescript Example")),r.createElement("p",null,"Demo application to show how to combine ProseMirror with React"),r.createElement("p",null,r.createElement("a",{href:"https://github.com/TeemuKoivisto/prosemirror-react-typescript-example"},"Github repo"))),r.createElement("div",null,r.createElement("ul",null,r.createElement("li",null,r.createElement("b",null,"Ctrl + n"),": New underline paragraph"),r.createElement("li",null,r.createElement("b",null,"Ctrl + b"),": New blockquote"),r.createElement("li",null,r.createElement("b",null,"Ctrl + p"),": New ProseMirror-managed blockquote"),r.createElement("li",null,r.createElement("b",null,"Ctrl + s"),": Split current block"),r.createElement("li",null,r.createElement("b",null,"/"),": Quick insert (Atlassian editor only)")),n))}var Pe=l.default.div(ke());function Ce(){var e=Object(c.a)(["\n"]);return Ce=function(){return e},e}function Se(e){var t=e.className;return r.createElement(Me,{className:t},r.createElement(Oe,null,r.createElement(Ee,null)))}var Me=l.default.div(Ce()),Ae=n(24),De=n(7),Ie=n(183),Re=n(4),je=n(197),Te=n(128),Ve=n(184),_e=n(74),Fe=n.n(_e),Be=function(e,t){return(Be=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function Ne(e,t){function n(){this.constructor=e}Be(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var qe=new Re.h({nodes:{doc:{content:"block+"},underline:{group:"block",content:"inline*",parseDOM:[{tag:"p"}],toDOM:function(){return["p",0]}},text:{group:"inline"}}});function Ue(e,t){var n=e.selection,r=(n.$from,n.$to),o=qe.nodes.underline.createAndFill(null);if(o){var i=e.tr.insert(r.pos,o);return t&&t(i),!0}return!1}var ze=function(){var e=[];return e.push(Object(je.a)()),e.push(Object(Te.a)(Ve.a)),e.push(Object(Te.a)({"Ctrl-n":Ue})),e},Le=function(e){function t(t){var n=e.call(this,t)||this;return n.hole=Object(Ae.createRef)(),n}return Ne(t,e),t.prototype.append=function(e){this.hole&&this.hole.current.appendChild(e)},t.prototype.render=function(){return Object(Ae.createElement)("p",{ref:this.hole,style:{textDecoration:"underline"}})},t}(Ae.Component),He=function(){function e(e,t,n,r){var o=this;this.putContentDomInRef=function(){o.ref.current.append(o.contentDOM)},this.attrs=e.attrs,this.node=e,this.view=t,this.getPos=n,this.decorations=r,this.ref=Object(Ae.createRef)(),this.dom=document.createElement("span"),this.contentDOM=document.createElement("span"),this.dom.classList.add("node__dom"),this.contentDOM.classList.add("node__content-dom"),Fe.a.render(Object(Ae.createElement)(Le,{ref:this.ref}),this.dom,this.putContentDomInRef)}return e.prototype.update=function(e){return!0},e.prototype.destroy=function(){Fe.a.unmountComponentAtNode(this.dom),Fe.a.unmountComponentAtNode(this.contentDOM)},e}(),We={underline:function(e,t,n,r){return new He(e,t,n,r)}};!function(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!==typeof document){var r=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===n&&r.firstChild?r.insertBefore(o,r.firstChild):r.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}("#editor {\n  border: 1px solid black; }\n");var $e=function(e){function t(t){var n=e.call(this,t)||this;return n.createEditorView=function(e){null!=e&&(n.editorView=new Ie.a(e,{nodeViews:We,state:n.editorState}))},n.editorState=De.b.create({schema:qe,plugins:ze()}),n.editorRef=Object(Ae.createRef)(),n}return Ne(t,e),t.prototype.componentDidMount=function(){this.createEditorView(this.editorRef.current),this.forceUpdate()},t.prototype.componentWillUnmount=function(){this.editorView&&this.editorView.destroy()},t.prototype.shouldComponentUpdate=function(){return!1},t.prototype.render=function(){return Object(Ae.createElement)("div",{id:"editor",ref:this.editorRef})},t}(Ae.Component);function Ke(){var e=Object(c.a)(["\n"]);return Ke=function(){return e},e}function Qe(e){var t=e.className;return r.createElement(Ge,{className:t},r.createElement(Oe,null,r.createElement($e,null)))}var Ge=l.default.div(Ke()),Ye=n(192),Xe=n(1),Je=n(190),Ze=n(195),et=n(39),tt=n(123),nt=n(8),rt=n(2),ot=n(194),it=n(13),at=n.n(it),st=n(124),ct=n(125),ut=n(191),lt=n(126),pt=n.n(lt),dt=function(e,t){return(dt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function ft(e,t){function n(){this.constructor=e}dt(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var ht=function(){return(ht=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function mt(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}function vt(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(t){i(t)}}function s(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))}function gt(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}function bt(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r}function yt(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var xt,wt=function(){function e(){this.listeners={}}return e.prototype.on=function(e,t){this.listeners[e]||(this.listeners[e]=new Set),this.listeners[e].add(t)},e.prototype.off=function(e,t){this.listeners[e]&&this.listeners[e].has(t)&&this.listeners[e].delete(t)},e.prototype.emit=function(e,t){this.listeners[e]&&this.listeners[e].forEach((function(e){return e(t)}))},e.prototype.destroy=function(){this.listeners={}},e}();function Et(){return void 0===xt&&(xt="undefined"!==typeof window&&"performance"in window&&["measure","clearMeasures","clearMarks","getEntriesByName","getEntriesByType","now"].every((function(e){return!!performance[e]}))),xt}var kt=new Map;function Ot(e){Et()&&(performance.mark(e+"::start"),kt.set(e,performance.now()))}function Pt(e,t){if(Et()){performance.mark(e+"::end");var n=t?kt.get(e):void 0;try{performance.measure(e,e+"::start",e+"::end")}catch(o){}finally{if(t){var r=performance.getEntriesByName(e).pop();r?t(r.duration,r.startTime):n&&t(performance.now()-n,n)}!function(e){if(!Et())return;kt.delete(e),performance.clearMarks(e+"::start"),performance.clearMarks(e+"::end"),performance.clearMeasures(e)}(e)}}}var Ct,St=function(e){try{e.check()}catch(t){return!1}return!0};!function(e){e[e.selectedInRange=0]="selectedInRange",e[e.selectedInside=1]="selectedInside"}(Ct||(Ct={}));var Mt=function(e,t){var n={type:e.type.name,pos:t,nodeSize:e.nodeSize},r=At(e.content,t);r.length>0&&(n.content=r);var o=It(e);return o.length>0&&(n.marks=o),n},At=function(e,t){if(!e||!e.content||!e.content.length)return[];var n=[],r=e.content;if(r[0].isBlock){var o;n=r.map((function(e){return t+=o?o.nodeSize:1,o=e,Mt(e,t)}))}else{var i=Dt(r,t);n=i.inlineNodes,t=i.pos}return n},Dt=function(e,t){return{inlineNodes:e.map((function(e){var n=e.nodeSize,r={type:e.type.name,pos:t,nodeSize:n},o=It(e);return o.length>0&&(r.marks=o),t+=n,r})),pos:t}},It=function(e){return e.marks.map((function(e){return e.type.name}))},Rt={plugins:["underline","blockquote","quickInsert","typeAhead"],nodes:["doc","paragraph","text","bulletList","orderedList","listItem","heading","blockquote","codeBlock"],marks:["link","em","strong","textColor","strike","subsup","underline","code","typeAheadQuery","alignment","breakout","indentation","annotation","unsupportedMark","unsupportedNodeAttribute"]};function jt(e){return function(t,n){return Rt[e].indexOf(t.name)-Rt[e].indexOf(n.name)}}function Tt(e){var t=e.reduce((function(e,t){return t.pluginsOptions&&Object.keys(t.pluginsOptions).forEach((function(n){e[n]||(e[n]=[]),e[n].push(t.pluginsOptions[n])})),e}),{});return e.reduce((function(e,n){var r,o,i;return n.pmPlugins&&(r=e.pmPlugins).push.apply(r,n.pmPlugins(n.name?t[n.name]:void 0)),n.nodes&&(o=e.nodes).push.apply(o,n.nodes()),n.marks&&(i=e.marks).push.apply(i,n.marks()),n.contentComponent&&e.contentComponents.push(n.contentComponent),n.primaryToolbarComponent&&e.primaryToolbarComponents.push(n.primaryToolbarComponent),e}),{nodes:[],marks:[],pmPlugins:[],contentComponents:[],primaryToolbarComponents:[]})}function Vt(e){var t=e.editorConfig,n=mt(e,["editorConfig"]);return t.pmPlugins.sort(jt("plugins")).map((function(e){return(0,e.plugin)(n)})).filter((function(e){return"undefined"!==typeof e}))}var _t={content:"block+"},Ft={content:"paragraph+",group:"block",defining:!0,selectable:!1,parseDOM:[{tag:"blockquote"}],toDOM:function(){return["blockquote",0]}},Bt={content:"inline*",group:"block",selectable:!1,parseDOM:[{tag:"p"}],toDOM:function(){return["p",0]}},Nt={group:"inline",toDebugString:function(){return"text_node"}};function qt(e,t){var n=e.selection,r=n.$from,o=n.$to;if(e.selection instanceof Xe.NodeSelection&&e.selection.node.isBlock)return!(!r.parentOffset||!Object(nt.f)(e.doc,r.pos))&&(t&&t(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.parent.isBlock)return!1;if(t){var i=o.parentOffset==o.parent.content.size,a=e.tr;e.selection instanceof Xe.TextSelection&&a.deleteSelection();var s=0==r.depth?void 0:r.node(-1).contentMatchAt(r.indexAfter(-1)).defaultType,c=i&&s?[{type:s}]:void 0,u=Object(nt.f)(a.doc,a.mapping.map(r.pos),1,c);if(!c&&!u&&s&&Object(nt.f)(a.doc,a.mapping.map(r.pos),1,s&&[{type:s}])&&(c=[{type:s}],u=!0),u&&s){a.split(a.mapping.map(r.pos),1,c);var l=!i&&!r.parentOffset&&r.parent.type!=s,p=r.node(-1).canReplace(r.index(-1),r.indexAfter(-1),rt.Fragment.from(s.create()));l&&p&&a.setNodeMarkup(a.mapping.map(r.before()),s)}t(a.scrollIntoView())}return!0}function Ut(e,t){var n=e.selection,r=n.$from,o=n.$to;if(r.parent.inlineContent||o.parent.inlineContent)return!1;var i=r.parent.contentMatchAt(o.indexAfter()).defaultType;if(!i||!i.isTextblock)return!1;var a=i.createAndFill();if(t&&a){var s=(!r.parentOffset&&o.index()<o.parent.childCount?r:o).pos,c=e.tr.insert(s,a);c.setSelection(Xe.TextSelection.create(c.doc,s+1)),t(c.scrollIntoView())}return!0}var zt,Lt=function(e){return{name:"base",pmPlugins:function(){return[{name:"history",plugin:function(){return Object(Ze.a)()}},{name:"baseKeyMap",plugin:function(){return Object(et.b)(tt.a)}},{name:"otherKeyMap",plugin:function(){return Object(et.b)({"Ctrl-p":Ut,"Ctrl-s":qt})}}]},nodes:function(){return[{name:"doc",node:_t},{name:"paragraph",node:Bt},{name:"text",node:Nt}]}}},Ht=function(){function e(e,t,n,r,o,i,a,s,c){var u=this;void 0===s&&(s=!1),this.handleRef=function(e){return u._handleRef(e)},this.node=e,this.view=t,this.getPos=n,this.portalProviderAPI=r,this.reactComponentProps=i||{},this.reactComponent=a,this.hasContext=s,this._viewShouldUpdate=c,this.eventDispatcher=o}return e.prototype.init=function(){var e=this;this.domRef=this.createDomRef(),this.setDomAttrs(this.node,this.domRef);var t=this.getContentDOM()||{dom:void 0,contentDOM:void 0},n=t.dom,r=t.contentDOM;return this.domRef&&n&&(this.domRef.appendChild(n),this.contentDOM=r||n,this.contentDOMWrapper=n||r),this.domRef.classList.add(this.node.type.name+"View-content-wrap"),this.renderReactComponent((function(){return e.render(e.reactComponentProps,e.handleRef)})),this},e.prototype.renderReactComponent=function(e){this.domRef&&e&&this.portalProviderAPI.render(e,this.domRef,this.hasContext)},e.prototype.createDomRef=function(){return this.node.isInline?document.createElement("span"):document.createElement("div")},e.prototype.getContentDOM=function(){},e.prototype._handleRef=function(e){var t=this.contentDOMWrapper||this.contentDOM;e&&t&&!e.contains(t)&&e.appendChild(t)},e.prototype.render=function(e,t){return this.reactComponent?o.a.createElement(this.reactComponent,ht({view:this.view,getPos:this.getPos,node:this.node,forwardRef:t},e)):null},e.prototype.update=function(e,t,n){var r=this;return void 0===n&&(n=function(){return!0}),!(this.node.type!==e.type||!n(this.node,e))&&(this.domRef&&!this.node.sameMarkup(e)&&this.setDomAttrs(e,this.domRef),this.viewShouldUpdate(e)?(this.node=e,this.renderReactComponent((function(){return r.render(r.reactComponentProps,r.handleRef)})),!0):(this.node=e,!0))},e.prototype.viewShouldUpdate=function(e){return!this._viewShouldUpdate||this._viewShouldUpdate(e)},e.prototype.setDomAttrs=function(e,t){Object.keys(e.attrs||{}).forEach((function(n){t.setAttribute(n,e.attrs[n])}))},Object.defineProperty(e.prototype,"dom",{get:function(){return this.domRef},enumerable:!1,configurable:!0}),e.prototype.destroy=function(){this.domRef&&(this.portalProviderAPI.remove(this.domRef),this.domRef=void 0,this.contentDOM=void 0)},e.fromComponent=function(t,n,r,o,i){return function(a,s,c){return new e(a,s,c,n,r,o,t,!1,i).init()}},e}(),Wt=Object(r.forwardRef)((function(e,t){return o.a.createElement($t,{ref:t})})),$t=l.default.blockquote(zt||(zt=yt(["\n  box-sizing: border-box;\n  color: #6a737d;\n  padding: 0 1em;\n  border-left: 4px solid #dfe2e5;\n  margin: 0.2rem 0 0 0;\n  margin-right: 0;\n\n  [dir='rtl'] & {\n    padding-left: 0;\n    padding-right: 4px;\n  }\n\n  &:first-child {\n    margin-top: 0;\n  }\n\n  &::before {\n    content: '';\n  }\n\n  &::after {\n    content: none;\n  }\n\n  & p {\n    display: block;\n  }\n\n  & table,\n  & table:last-child {\n    display: inline-table;\n  }\n"],["\n  box-sizing: border-box;\n  color: #6a737d;\n  padding: 0 1em;\n  border-left: 4px solid #dfe2e5;\n  margin: 0.2rem 0 0 0;\n  margin-right: 0;\n\n  [dir='rtl'] & {\n    padding-left: 0;\n    padding-right: 4px;\n  }\n\n  &:first-child {\n    margin-top: 0;\n  }\n\n  &::before {\n    content: '';\n  }\n\n  &::after {\n    content: none;\n  }\n\n  & p {\n    display: block;\n  }\n\n  & table,\n  & table:last-child {\n    display: inline-table;\n  }\n"]))),Kt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ft(t,e),t.prototype.getContentDOM=function(){var e=document.createElement("div");return e.classList.add(this.node.type.name+"-dom-wrapper"),{dom:e}},t.prototype.render=function(e,t){return o.a.createElement(Wt,{ref:t})},t}(Ht);function Qt(e,t,n){return function(r,o,i){return new Kt(r,o,i,e,t,{options:n}).init()}}var Gt=new Xe.PluginKey("blockQuotePlugin");var Yt={mac:!1,ie:!1,ie_version:0,gecko:!1,chrome:!1,chrome_version:0,android:!1,ios:!1,webkit:!1};if("undefined"!==typeof navigator){var Xt=/Edge\/(\d+)/.exec(navigator.userAgent),Jt=/MSIE \d/.test(navigator.userAgent),Zt=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);Yt.mac=/Mac/.test(navigator.platform);var en=Yt.ie=!!(Jt||Zt||Xt);Yt.ie_version=Jt?document.documentMode||6:Zt?+Zt[1]:Xt?+Xt[1]:null,Yt.gecko=!en&&/gecko\/\d/i.test(navigator.userAgent),Yt.chrome=!en&&/Chrome\//.test(navigator.userAgent),Yt.chrome_version=parseInt((navigator.userAgent.match(/Chrome\/(\d{2})/)||[])[1],10),Yt.android=/Android \d/.test(navigator.userAgent),Yt.ios=!en&&/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),Yt.webkit=!en&&!!document.documentElement&&"WebkitAppearance"in document.documentElement.style}var tn=Yt;vn("Bold","Mod-b"),vn("Italic","Mod-i"),vn("Underline","Mod-u"),vn("Code","Mod-Shift-m"),vn("Normal text","Mod-Alt-0"),vn("Heading 1","Mod-Alt-1");var nn=vn("Quote","Ctrl-b"),rn=vn("Insert new line","Shift-Enter"),on=(vn("Shift Backspace","Shift-Backspace"),vn("Split code block","Enter"),vn("Undo","Mod-z"),vn("Move up","ArrowUp")),an=vn("Move down","ArrowDown"),sn=(vn("Move left","ArrowLeft"),vn("Move right","ArrowRight"),vn("Open Help","Mod-/"),vn("Link","Mod-k"),vn("Annotate","Mod-Alt-c"),vn("Submit Content","Mod-Enter"),vn("Enter","Enter")),cn=(vn("Shift Enter","Shift-Enter"),vn("Tab","Tab")),un=(vn("Backspace","Backspace"),vn("Delete","Delete"),vn("Space","Space")),ln=vn("Escape","Escape"),pn=(vn("Next cell","Tab"),vn("Previous cell","Shift-Tab"),vn("Table","Shift-Alt-t"),vn("Cut","Mod-x"),vn("Copy","Mod-c"),vn("Paste","Mod-v"),vn("Paste","Mod-Shift-v"),vn("Find","Mod-f"),{ARROWLEFT:"\u2190",ARROWRIGHT:"\u2192",ARROWUP:"\u2191",ARROWDOWN:"\u2193"}),dn=l.default.span(mn||(mn=yt(["\n  border-radius: 2px;\n  background-color: blue;\n  padding: 0 2px;\n"],["\n  border-radius: 2px;\n  background-color: blue;\n  padding: 0 2px;\n"])));function fn(e){var t=(tn.mac?e.mac.replace(/Cmd/i,"\u2318").replace(/Shift/i,"\u21e7").replace(/Ctrl/i,"\u2303").replace(/Alt/i,"\u2325").replace(/Backspace/i,"\u232b").replace(/Enter/i,"\u23ce"):e.windows.replace(/Backspace/i,"\u232b")).split("-"),n=t[t.length-1];return 1===n.length&&(n=n.toUpperCase()),t[t.length-1]=pn[n.toUpperCase()]||n,t.join(tn.mac?"":"+")}function hn(e,t){if(e){var n=fn(e);return t?t+" "+n:n}}var mn;o.a.memo((function(e){var t=e.description,n=e.shortcutOverride,r=e.keymap,i=n||r&&fn(r);return i||t?o.a.createElement(o.a.Fragment,null,t,i&&t&&"\xa0",i&&o.a.createElement(dn,null,i)):null}));function vn(e,t){return function(e,t,n,r){return{description:e,windows:t,mac:n,common:r}}(e,t.replace(/Mod/i,"Ctrl"),t.replace(/Mod/i,"Cmd"),t)}function gn(e,t,n){var r=n[e],o=t;n[e]&&(o=function(e,n,o){return r(e,n)||t(e,n,o)}),n[e]=o}function bn(e){var t=e.label,n=void 0===t?"":t;return o.a.createElement("svg",{"aria-label":n,width:40,height:40,fillRule:"evenodd"},o.a.createElement("path",{fill:"#fff",d:"M0 0h40v40H0z"}),o.a.createElement("path",{fill:"#ebecf0",d:"M13 6h26v28H13z"}),o.a.createElement("path",{d:"M9 6h4v28H9a2 2 0 01-2-2V8a2 2 0 012-2z",fill:"#dfe1e6"}),o.a.createElement("g",{fill:"#a5adba"},o.a.createElement("rect",{x:9,y:9,width:2,height:1,rx:.5}),o.a.createElement("rect",{x:16,y:9,width:9,height:1,rx:.5}),o.a.createElement("rect",{x:22,y:21,width:9,height:1,rx:.5}),o.a.createElement("rect",{x:22,y:29,width:9,height:1,rx:.5})),o.a.createElement("g",{fill:"#4c9aff"},o.a.createElement("rect",{x:28,y:25,width:9,height:1,rx:.5}),o.a.createElement("rect",{x:16,y:13,width:13,height:1,rx:.5})),o.a.createElement("g",{fill:"#ff7452"},o.a.createElement("rect",{x:16,y:17,width:13,height:1,rx:.5}),o.a.createElement("rect",{x:19,y:25,width:7,height:1,rx:.5})),o.a.createElement("g",{fill:"#a5adba"},o.a.createElement("rect",{x:9,y:13,width:2,height:1,rx:.5}),o.a.createElement("rect",{x:9,y:17,width:2,height:1,rx:.5}),o.a.createElement("rect",{x:9,y:21,width:2,height:1,rx:.5}),o.a.createElement("rect",{x:9,y:25,width:2,height:1,rx:.5}),o.a.createElement("rect",{x:9,y:29,width:2,height:1,rx:.5})))}var yn=function(e){return void 0===e&&(e={}),{name:"blockquote",nodes:function(){return[{name:"blockquote",node:Ft}]},pmPlugins:function(){return[{name:"blockquote",plugin:function(t){return function(e,t,n){return new Xe.Plugin({state:{init:function(e,t){return{count:0}},apply:function(e,t,n,r){if(e.docChanged||e.selectionSet){r.selection;return ht(ht({},t),{count:t.count+1})}return t}},key:Gt,props:{nodeViews:{blockquote:Qt(e,t,n)}}})}(t.portalProviderAPI,t.eventDispatcher,e)}},{name:"blockquoteKeyMap",plugin:function(){return function(){var e={};return gn(nn.common,(function(e,t){var n=e.selection,r=n.$from,o=(n.$to,e.schema.nodes.blockquote.createAndFill()),i=r.end();return o&&t&&t(e.tr.insert(i+1,o)),!1}),e),Object(et.b)(e)}()}}]},pluginsOptions:{quickInsert:[{id:"blockquote",title:"Quote",description:"Quote some text",priority:1300,keyshortcut:hn(nn),icon:function(){return o.a.createElement(bn,{label:"Quote"})},action:function(e,t){return e(t.schema.nodes.blockquote.createChecked({},t.schema.nodes.paragraph.createChecked()))}}]}}},xn=new Xe.PluginKey("quickInsertPluginKey"),wn={threshold:.3,keys:[{name:"title",weight:.5},{name:"priority",weight:.3},{name:"keywords",weight:.15},{name:"description",weight:.04},{name:"keyshortcut",weight:.01}]};var En=function(e,t){return function(n,r){var o=t&&t.disableDefaultItems?[]:e.lazyDefaultItems(),i=e.providedItems;return function(e,t){var n=new ot.a(t,wn);return""===e?t.slice(0).sort((function(e,t){return(e.priority||Number.POSITIVE_INFINITY)-(t.priority||Number.POSITIVE_INFINITY)})):n.search(e).map((function(e){return e.item}))}(n||"",i?function(e,t){void 0===e&&(e=[]),void 0===t&&(t=function(e){return e});var n=new Set;return e.forEach((function(e){return n.add(t(e))})),e.filter((function(e){var r=t(e);return!!n.has(r)&&(n.delete(r),!0)}))}(bt(o,i),(function(e){return e.title})):o)}},kn=function(e){return{name:"quickInsert",pmPlugins:function(e){return[{name:"quickInsert",plugin:function(t){var n=t.providerFactory,r=t.dispatch;return function(e,t,n){return new Xe.Plugin({key:xn,state:{init:function(){return{isElementBrowserModalOpen:!1,lazyDefaultItems:function(){return function(e){On.en||(On.en=e.reduce((function(e,t){return e.concat(t)}),[]));return On.en}(e||[])}}},apply:function(e,t){var r=e.getMeta(xn);if(r&&Object.keys(r).some((function(e){return t[e]!==r[e]}))){var o=ht(ht({},t),r);return n(xn,o),o}return t}},view:function(e){var n=this,r=function(t,r){return vt(n,void 0,void 0,(function(){var t,n,o;return gt(this,(function(i){switch(i.label){case 0:if(!r)return[3,5];i.label=1;case 1:return i.trys.push([1,4,,5]),[4,r];case 2:return[4,(t=i.sent()).getItems()];case 3:return n=i.sent(),(a={provider:t,providedItems:n},function(e,t){return t&&t(e.tr.setMeta(xn,a)),!0})(e.state,e.dispatch),[3,5];case 4:return o=i.sent(),console.error("Error getting items from quick insert provider",o),[3,5];case 5:return[2]}var a}))}))};return t.subscribe("quickInsertProvider",r),{destroy:function(){t.unsubscribe("quickInsertProvider",r)}}}})}(e,n,r)}}]},pluginsOptions:{typeAhead:{trigger:"/",headless:e?e.headless:void 0,getItems:function(t,n,r,o){var i=xn.getState(n);return En(i,e)(t)},selectItem:function(e,t,n){return t.action(n,e)}}}}},On={};var Pn="#FFFFFF",Cn="#6B778C",Sn="rgba(9, 30, 66, 0.31)",Mn={inclusive:!0,group:"searchQuery",parseDOM:[{tag:"span[data-type-ahead-query]"}],toDOM:function(e){return["span",{"data-type-ahead-query":"true","data-trigger":e.attrs.trigger,style:"color: #0052CC"}]},attrs:{trigger:{default:""}}},An=function(e){function t(t,n){var r=e.call(this,t)||this;return r.listeners={},r.debounce=null,r.notAppliedState={},r.isSubscribed=!1,r.state={},r.handlePluginStateChange=function(e,t,n){return function(o){var i;(r.state[e]!==o||n)&&r.updateState({stateSubset:(i={},i[e]=o,i),pluginName:t})}},r.updateState=function(e){var t=e.stateSubset;e.pluginName;r.notAppliedState=ht(ht({},r.notAppliedState),t),r.debounce&&window.clearTimeout(r.debounce),r.debounce=window.setTimeout((function(){r.setState(r.notAppliedState),r.debounce=null,r.notAppliedState={}}),0)},r.onContextUpdate=function(){r.subscribe(r.props)},r.state=r.getPluginsStates(t.plugins,r.getEditorView(t,n)),r}return ft(t,e),t.prototype.getEditorView=function(e,t){var n=e||this.props,r=t||this.context;return n.editorView||r&&r.editorActions&&r.editorActions._privateGetEditorView()},t.prototype.getEventDispatcher=function(e){return(e||this.props).eventDispatcher||this.context&&this.context.editorActions&&this.context.editorActions._privateGetEventDispatcher()},t.prototype.getPluginsStates=function(e,t){return t&&e?Object.keys(e).reduce((function(n,r){var o=e[r];return o?(n[r]=o.getState(t.state),n):n}),{}):{}},t.prototype.subscribe=function(e){var t=this,n=e.plugins,r=this.getEventDispatcher(e),o=this.getEditorView(e);if(r&&o&&!this.isSubscribed){this.isSubscribed=!0;var i=this.getPluginsStates(n,o);this.setState(i),Object.keys(n).forEach((function(e){var o=n[e];if(o){var a=o.key,s=i[e],c=s&&s.subscribe,u=t.handlePluginStateChange(e,a,c);c?s.subscribe(u):r.on(o.key,u),t.listeners[o.key]={handler:u,pluginKey:o}}}))}},t.prototype.unsubscribe=function(){var e=this,t=this.getEventDispatcher(),n=this.getEditorView();t&&n&&this.isSubscribed&&(Object.keys(this.listeners).forEach((function(r){var o=e.listeners[r].pluginKey.getState(n.state);o&&o.unsubscribe?o.unsubscribe(e.listeners[r].handler):t.off(r,e.listeners[r].handler)})),this.listeners=[])},t.prototype.subscribeToContextUpdates=function(e){e&&e.editorActions&&e.editorActions._privateSubscribe(this.onContextUpdate)},t.prototype.unsubscribeFromContextUpdates=function(e){e&&e.editorActions&&e.editorActions._privateUnsubscribe(this.onContextUpdate)},t.prototype.componentDidMount=function(){this.subscribe(this.props),this.subscribeToContextUpdates(this.context)},t.prototype.UNSAFE_componentWillReceiveProps=function(e){this.isSubscribed||this.subscribe(e)},t.prototype.componentWillUnmount=function(){this.debounce&&window.clearTimeout(this.debounce),this.unsubscribeFromContextUpdates(this.context),this.unsubscribe()},t.prototype.render=function(){return(0,this.props.render)(this.state)},t.displayName="WithPluginState",t.contextTypes={editorActions:at.a.object,editorConfig:at.a.object},t}(o.a.Component);function Dn(e,t,n){return void 0===n&&(n=!1),function(e,t){void 0===t&&(t=!1);var n=e.handler;return e.handler=function(e,r,o,i){var a=t?In(e,o,i):Rn(e,o,i);if(!e.selection.$from.parent.type.spec.code&&e.selection instanceof Xe.TextSelection&&!a)return n(e,r,o,i)},e}(new st.a(e,t),n)}var In=function(e,t,n){var r=e.doc,o=e.schema.marks,i=!1,a=function(e){return e.type===o.code||e.type===o.link||e.type===o.typeAheadQuery};return r.nodesBetween(t,n,(function(e){i=i||e.marks.filter(a).length>0})),i},Rn=function(e,t,n){var r=e.doc,o=e.schema.marks,i=!1,a=function(e){return e.type===o.code};return r.nodesBetween(t,n,(function(e){i=i||e.marks.filter(a).length>0})),i};function jn(e,t){if(!function(e,t){return Object(tt.b)(e)(t)}(e,t))return!1;var n=t.selection,r=n.empty,o=n.$cursor,i=n.ranges;if(r&&!o)return!1;var a=function(t){return function(e,t){return!t.type.excludes(e)&&!e.excludes(t.type)}(e,t)};return!(t.tr.storedMarks&&!t.tr.storedMarks.every(a))&&(o?o.marks().every(a):i.every((function(e){var n=e.$from,r=e.$to,o=0!==n.depth||t.doc.marks.every(a);return t.doc.nodesBetween(n.pos,r.pos,(function(e){o=o&&e.marks.every(a)})),o})))}var Tn=new Xe.PluginKey("typeAheadPlugin");function Vn(e){var t=e.doc,n=e.schema.marks.typeAheadQuery,r=e.selection;return function(e,t,n,r){var o={start:-1,end:-1};return t.nodesBetween(n,r,(function(t,n){-1===o.start&&e.isInSet(t.marks)&&(o={start:n,end:n+Math.max(t.textContent.length,1)})})),o}(n,t,r.from-1,r.to)}var _n=function(){return function(e,t){var n=Vn(e);if(null===n)return!1;var r=n.start,o=n.end,i=e.schema.marks.typeAheadQuery;if(-1===r)return!1;var a=Tn.getState(e).typeAheadHandler;return a&&a.dismiss&&a.dismiss(e),t&&t(e.tr.removeMark(r,o,i).removeStoredMark(i)),!0}};var Fn="SELECT_PREV",Bn="SELECT_NEXT",Nn="SELECT_CURRENT",qn="SET_CURRENT_INDEX",Un="SET_QUERY",zn="ITEMS_LIST_UPDATED",Ln=tn.chrome&&!tn.android&&tn.chrome_version>=58,Hn=function(e,t){return void 0===t&&(t={}),function(n,r,o){if(!e)return r;var i,a=e instanceof rt.Fragment;try{i=e instanceof rt.Node||a?e:"string"===typeof e?n.schema.text(e):rt.Node.fromJSON(n.schema,e)}catch(u){return console.error(u),r}if(i.isText)r=r.replaceWith(o,o,i);else if(i.isBlock)r=Object(ct.safeInsert)(function(e,t){if(e.selection.$from.depth>1){if(t.attrs.layout&&"default"!==t.attrs.layout)return t.type.createChecked(ht(ht({},t.attrs),{layout:"default"}),t.content,t.marks);var n=e.schema.marks.breakout;if(n&&n.isInSet(t.marks)){var r=n.removeFromSet(t.marks);return t.type.createChecked(t.attrs,t.content,r)}}return t}(n,i),void 0,!0)(r);else if(i.isInline||a){var s=a?i:rt.Fragment.fromArray([i,n.schema.text(" ")]);if(r=r.replaceWith(o,o,s),Ln){var c=document.getSelection();c&&c.empty()}r=t.selectInlineNode?r.setSelection(Xe.NodeSelection.create(r.doc,o)):r.setSelection(Xe.Selection.near(r.doc.resolve(o+s.size)))}return r}},Wn=function(e){return void 0===e&&(e="selected"),function(t,n){var r=Tn.getState(t),o=r.active,i=r.currentIndex,a=r.items,s=r.typeAheadHandler;return!(!o||!s)&&(s.selectItem&&a[i]?Kn(s,a[i],e)(t,n):Gn(t,(function(e,r){return Qn(e,r)(t,n)})))}},$n=function(e){return function(t,n){var r=Tn.getState(t),o=r.active,i=r.items,a=r.typeAheadHandler;return!!(o&&a&&a.selectItem&&i[e])&&Kn(a,i[e])(t,n)}},Kn=function(e,t,n){return void 0===n&&(n="selected"),function(r,o){return Gn(r,(function(i,a){var s=e.selectItem(r,t,(function(e,t){void 0===t&&(t={});var n=r.tr;return n=n.setMeta(Tn,{action:Nn}).replaceWith(i,a,rt.Fragment.empty),Hn(e,t)(r,n,i)}),{mode:n});return!1===s?Qn(i,a)(r,o):(o&&o(s),!0)}))}},Qn=function(e,t){return function(n,r){var o=Tn.getState(n),i=o.query,a=o.trigger,s=n.schema.text(a+i);return r&&r(n.tr.replaceWith(e,t,s)),!0}},Gn=function(e,t){var n=Vn(e);return!(!n||-1===n.start)&&t(n.start,n.end)};function Yn(e,t,n,r){var o=!1;return t.nodesBetween(n,r,(function(t){!o&&e.isInSet(t.marks)&&(o=!0)})),o}function Xn(e,t){return void 0===e&&(e=!1),void 0===t&&(t=!0),{isAllowed:t,active:!1,prevActiveState:e,query:null,trigger:null,typeAheadHandler:null,currentIndex:0,items:[],itemsLoader:null,queryMarkPos:null,queryStarted:0,upKeyCount:0,downKeyCount:0}}function Jn(e,t){return new Xe.Plugin({key:Tn,state:{init:function(){return Xn()},apply:function(n,r,o,i){var a=n.getMeta(Tn)||{},s=a.action,c=a.params;switch(s){case qn:return function(e){var t=e.dispatch,n=e.pluginState,r=e.params;if(!r)return n;var o=ht(ht({},n),{currentIndex:r.currentIndex||0===r.currentIndex?r.currentIndex:n.currentIndex});return t(Tn,o),o}({dispatch:e,pluginState:r,tr:n,params:c});case Fn:return function(e){var t=e.dispatch,n=e.pluginState,r=n.currentIndex-1,o=ht(ht({},n),{currentIndex:r<0?n.items.length-1:r,upKeyCount:++n.upKeyCount});return t(Tn,o),o}({dispatch:e,pluginState:r,tr:n});case Bn:return function(e){var t=e.dispatch,n=e.pluginState,r=n.currentIndex+1,o=ht(ht({},n),{currentIndex:r>n.items.length-1?0:r,downKeyCount:++n.downKeyCount});return t(Tn,o),o}({dispatch:e,pluginState:r,tr:n});case zn:return function(e){var t=e.dispatch,n=e.pluginState,r=e.tr.getMeta(Tn).items,o=ht(ht({},n),{items:r,itemsLoader:null,currentIndex:0});return t(Tn,o),o}({dispatch:e,pluginState:r,tr:n});case Nn:var u=n.selection,l=u.from,p=u.to,d=i.schema.marks.typeAheadQuery;return n.doc.rangeHasMark(l-1,p,d)?Zn({dispatch:e,typeAhead:t,state:i,pluginState:r,tr:n}):function(e){var t=e.dispatch,n=Xn(!1);return t(Tn,n),n}({dispatch:e,pluginState:r,tr:n});case Un:return function(e){var t=e.dispatch,n=e.pluginState,r=e.params;if(!r)return n;var o=ht(ht({},n),{query:"string"===typeof r.query?r.query:null});return t(Tn,o),o}({dispatch:e,pluginState:r,tr:n,params:c});default:return Zn({dispatch:e,typeAhead:t,state:i,pluginState:r,tr:n})}}},view:function(){return{update:function(e){var t=Tn.getState(e.state);if(t){var n=e.state,r=e.dispatch,o=n.doc,i=n.selection,a=i.from,s=i.to,c=n.schema.marks.typeAheadQuery;!t.active||t.query||t.trigger?t.active&&0===(t.query||"").indexOf(" ")?_n()(n,r):t.active||!t.prevActiveState||o.rangeHasMark(a-1,s,c)?t.active&&t.itemsLoader&&t.itemsLoader.promise.then((function(t){return function(e){return function(t,n){return n&&n(t.tr.setMeta(Tn,{action:zn,items:e})),!0}}(t)(e.state,r)})):_n()(n,r):_n()(n,r)}}}},appendTransaction:function(e,t,n){var r,o=Tn.getState(n);return o.active&&o.query&&o.typeAheadHandler&&o.typeAheadHandler.forceSelect&&o.typeAheadHandler.forceSelect(o.query,o.items)?(Wn()(n,(function(e){return r=e})),r):null},props:{handleDOMEvents:{input:function(e,t){var n,r=e.state,o=e.dispatch,i=r.selection,a=r.schema;return!!(i instanceof Xe.TextSelection&&i.$cursor&&a.marks.typeAheadQuery.isInSet(i.$cursor.marks()))&&((n=t.data,function(e,t){var r=Vn(e),o=Yn(e.schema.marks.typeAheadQuery,e.doc,e.selection.from,e.selection.to);return null!==r&&!1!==o&&(t&&t(e.tr.setMeta(Tn,{action:Un,params:{query:n}})),!0)})(r,o),!1)},compositionend:function(e,n){var r,o,i=e.state,a=e.dispatch,s=i.selection,c=i.schema;return!(!(-1!==t.map((function(e){return e.trigger})).indexOf(n.data)&&s instanceof Xe.TextSelection&&s.$cursor)||c.marks.typeAheadQuery.isInSet(s.$cursor.marks()))&&((r=n.data,void 0===(o=!0)&&(o=!1),function(e,t){if(!t)return!1;if(o){var n=e.tr,i=e.selection,a=i.$from.marks();return t(n.setSelection(Xe.TextSelection.create(n.doc,i.$from.pos-1,i.$from.pos)).replaceSelectionWith(e.doc.type.schema.text(r,bt([e.schema.marks.typeAheadQuery.create({trigger:r})],a)),!1)),!0}return t(Object(ct.safeInsert)(e.schema.text(r,[e.schema.marks.typeAheadQuery.create({trigger:r})]))(e.tr)),!0})(i,a),!0)}}}})}function Zn(e){var t=e.dispatch,n=e.typeAhead,r=e.pluginState,o=e.state,i=e.tr,a=o.schema.marks.typeAheadQuery,s=o.doc,c=o.selection,u=Yn(a,s,c.from-1,c.to),l=jn(a,o);if(!l&&!u){if(r&&r.active===u&&r.isAllowed===l)return r;var p=Xn(r.active,l);return t(Tn,p),p}var d=c.$from.nodeBefore;if(!u||!d||!r){var f=Xn(!!r&&r.active);return r&&!r.active&&r.isAllowed||t(Tn,f),f}var h=a.isInSet(d.marks||[]);if(!h||!h.attrs.trigger)return r;var m=d.textContent||"",v=h.attrs.trigger.replace(/([^\x00-\xFF]|[\s\n])+/g,"");if(!m.includes(v)){var g=ht(ht({},Xn(!0)),{active:!0});return t(Tn,g),g}var b=m.replace(/^([^\x00-\xFF]|[\s\n])+/g,"").replace(v,""),y=n.find((function(e){return e.trigger===v})),x=[],w=null,E=null;try{x=y.getItems(b,o,{prevActive:r.prevActiveState,queryChanged:b!==r.query||v!==r.trigger},i,t),y.getHighlight&&(E=y.getHighlight(o)),r.itemsLoader&&r.itemsLoader.cancel(),Array.isArray(x)||(w=function(e){var t=!1;return{promise:new Promise((function(n,r){e.then((function(e){return!t&&n(e)})).catch((function(e){return!t&&r(e)}))})),cancel:function(){t=!0}}}(x),x=r.items)}catch(P){}var k=Vn(o),O={isAllowed:l,query:b,trigger:v,typeAheadHandler:y,active:!0,prevActiveState:r.active,items:x,itemsLoader:w,currentIndex:r.currentIndex,queryMarkPos:null!==k?k.start:null,queryStarted:Date.now(),upKeyCount:0,downKeyCount:0,highlight:E};return t(Tn,O),O}function er(e,t){var n=t.map((function(e){return e.customRegex||e.trigger})).join("|");if(n.length){var r=function(e,t){var n=t.rules;return Object(st.b)({rules:n})}(0,{rules:[Dn(new RegExp("(^|[.!?\\s\ufffc])("+n+")$"),(function(t,n){var r=Tn.getState(t),o=n[3]||n[2];if(!r.isAllowed||!o)return null;var i=e.mark("typeAheadQuery",{trigger:o}),a=t.tr,s=t.selection.$from.marks();return a.replaceSelectionWith(e.text(o,bt([i],s)),!1)}))]});return r.key,r}}function tr(){var e={};return gn(sn.common,(function(e,t){var n=Tn.getState(e);return!(!n||!n.active)&&Wn("enter")(e,t)}),e),gn(on.common,(function(e,t){var n=Tn.getState(e);return!(!n||!n.active)&&(t&&t(e.tr.setMeta(Tn,{action:Fn})),!0)}),e),gn(an.common,(function(e,t){var n=Tn.getState(e);return!(!n||!n.active)&&(t&&t(e.tr.setMeta(Tn,{action:Bn})),!0)}),e),gn(rn.common,(function(e,t){var n=Tn.getState(e);return!(!n||!n.active)&&Wn("shift-enter")(e,t)}),e),gn(cn.common,(function(e,t){var n=Tn.getState(e);return!(!n||!n.active)&&Wn("tab")(e,t)}),e),gn(ln.common,(function(e,t){var n=Tn.getState(e);return!(!n||!n.active)&&(window.event&&window.event.stopPropagation(),_n()(e,t))}),e),gn(un.common,(function(e,t){var n,r=Tn.getState(e);return!(!r||!r.active)&&(void 0===(n="space")&&(n="selected"),function(e,t){var r=Tn.getState(e),o=r.active,i=r.items,a=r.typeAheadHandler;return!!(o&&a&&a.selectItem)&&(1===i.length?Kn(a,i[0],n)(e,t):(i&&0!==i.length||_n()(e,t),!1))})(e,t)}),e),Object(et.b)(e)}function nr(e){return e===document.body}function rr(e){return e&&3===e.nodeType}function or(e,t,n,r,o){if(o&&r)return r;if(!n)return"bottom";rr(e)&&(e=e.parentElement);var i=t.getBoundingClientRect(),a=i.height,s=nr(t)?0:i.top,c=e.getBoundingClientRect(),u=c.top,l=c.height,p=u-(s-t.scrollTop),d=s+a-(u+l);return d>=n||d>=p?"bottom":"top"}function ir(e,t,n,r,o){if(o&&r)return r;if(!n)return r||"left";rr(e)&&(e=e.parentElement);var i=e.getBoundingClientRect(),a=i.left,s=i.width,c=t.getBoundingClientRect(),u=c.left,l=a-u+s,p=u+c.width-a;return r&&l>n&&p>n?r:p>=n||p>=l&&!r?"left":"right"}var ar=function(e,t,n){return n<e+t&&(e=n-t-1),Math.max(1,e)};function sr(e){var t=e.placement,n=e.target,r=e.popup,o=e.offset,i=e.stick,a=e.allowOutOfBounds,s=void 0!==a&&a,c=e.rect,u={};if(!n||!r||!r.offsetParent)return u;rr(n)&&(n=n.parentElement);var l=r.offsetParent,p=l.style,d=0;p&&p.borderBottomWidth&&(d=parseInt(p.borderBottomWidth,10));var f=t[0],h=t[1],m=c||l.getBoundingClientRect(),v=m.top,g=m.left,b=m.right,y=m.height,x=n.getBoundingClientRect(),w=x.top,E=x.left,k=x.right,O=x.height,P=x.width,C=nr(l),S=function(e){var t=e.placement,n=e.targetTop,r=e.targetHeight,o=e.isPopupParentBody,i=e.popupOffsetParentHeight,a=e.popupOffsetParentTop,s=e.popupOffsetParentScrollTop,c=e.borderBottomWidth,u=e.offset,l={};if("top"===t)l.bottom=Math.ceil(i-(n-a)-(o?0:s)-c+u[1]);else if("start"===t)l.top=Math.ceil(n-a-u[1]+(o?0:s));else{var p=Math.ceil(n-a+r+(o?0:s)-c+u[1]);l.top=p}return l}({placement:f,targetTop:w,isPopupParentBody:C,popupOffsetParentHeight:y,popupOffsetParentTop:v,popupOffsetParentScrollTop:l.scrollTop||0,targetHeight:O,borderBottomWidth:d,offset:o});u=ht(ht({},u),S),"top"!==f&&"start"!==f||!i||(u=function(e){var t=e.target,n=e.targetTop,r=e.targetHeight,o=e.popupOffsetParentHeight,i=e.popupOffsetParent,a=e.offset,s=e.position,c=e.placement,u=ur(t),l=ht({},s);if(u){var p=u.getBoundingClientRect().top,d=n-p,f=u.scrollTop;if(d<0){var h=n+(f-p)+r+a[1]<f;"top"===c&&(l.bottom=h?o-(d+i.scrollTop+r):d+(l.bottom||0)),"start"===c&&(l.top=h?d+i.scrollTop+r:Math.abs(d)+(l.top||0)+a[1])}}return l}({target:n,targetTop:w,targetHeight:O,popupOffsetParentHeight:y,popupOffsetParent:l,popup:r,offset:o,position:u,placement:f})),"top"!==f&&"start"!==f&&i&&(u=function(e){var t=e.target,n=e.targetTop,r=e.targetHeight,o=e.popup,i=e.offset,a=e.position,s=ur(t),c=ht({},a);if(s){var u=n-s.getBoundingClientRect().top,l=r+u;if(s.clientHeight-l<=o.clientHeight+2*i[1]&&u<s.clientHeight){var p=l-s.clientHeight+2*i[1],d=c.top||0;d-=p+o.clientHeight,c.top=d}}return c}({target:n,targetTop:w,targetHeight:O,popup:r,offset:o,position:u}));var M=function(e){var t=e.placement,n=e.targetLeft,r=e.targetRight,o=e.targetWidth,i=e.isPopupParentBody,a=e.popupOffsetParentLeft,s=e.popupOffsetParentRight,c=e.popupOffsetParentScrollLeft,u=e.popupOffsetParentClientWidth,l=e.popupClientWidth,p=e.offset,d=e.allowOutOfBounds,f=void 0!==d&&d,h={};if("left"===t)h.left=Math.ceil(n-a+(i?0:c)+p[0]);else if("center"===t)h.left=Math.ceil(n-a+(i?0:c)+p[0]+o/2-l/2);else if("end"===t){var m=Math.ceil(r-a+(i?0:c)+p[0]);h.left=m}else h.right=Math.ceil(s-r-(i?0:c)+p[0]);return f||(void 0!==h.left&&(h.left=ar(h.left,l,u)),void 0!==h.right&&(h.right=ar(h.right,l,u))),h}({placement:h,targetLeft:E,targetRight:k,targetWidth:P,isPopupParentBody:C,popupOffsetParentLeft:g,popupOffsetParentRight:b,popupOffsetParentScrollLeft:l.scrollLeft||0,popupOffsetParentClientWidth:r.offsetParent.clientWidth,popupClientWidth:r.clientWidth||0,offset:o,allowOutOfBounds:s});return u=ht(ht({},u),M)}function cr(e){return!(!e||!e.offsetParent)}function ur(e){var t=e;if(!t)return!1;for(;t=t.parentElement;){var n=window.getComputedStyle(t);if("scroll"===n.overflow||"scroll"===n.overflowX||"scroll"===n.overflowY||t.classList.contains("fabric-editor-popup-scroll-parent"))return t}return!1}var lr=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={overflowScrollParent:!1,validPosition:!0},t.placement=["",""],t.handleRef=function(e){e&&t.initPopup(e)},t.scheduledUpdatePosition=Object(ut.a)((function(e){return t.updatePosition(e)})),t.onResize=function(){return t.scheduledUpdatePosition(t.props)},t}return ft(t,e),t.prototype.updatePosition=function(e,t){void 0===e&&(e=this.props),void 0===t&&(t=this.state);var n=e.target,r=e.fitHeight,o=e.fitWidth,i=e.boundariesElement,a=e.offset,s=e.onPositionCalculated,c=e.onPlacementChanged,u=e.alignX,l=e.alignY,p=e.stick,d=e.forcePlacement,f=e.allowOutOfBounds,h=e.rect,m=t.popup;if(n&&m){var v=function(e,t,n,r,o,i,a){return[or(e,t,r,i,a),ir(e,t,n,o,a)]}(n,i||document.body,o,r,u,l,d);c&&this.placement.join("")!==v.join("")&&(c(v),this.placement=v);var g=sr({placement:v,popup:m,target:n,stick:p,offset:a,allowOutOfBounds:f,rect:h});g=s?s(g):g,this.setState({position:g,validPosition:cr(n)})}},t.prototype.cannotSetPopup=function(e,t,n){return!t||document.body.contains(t)&&e.offsetParent&&!e.offsetParent.contains(t)||n&&!n.contains(e.offsetParent)},t.prototype.initPopup=function(e){var t=this,n=this.props.target,r=ur(e);this.cannotSetPopup(e,n,r)||this.setState({popup:e,overflowScrollParent:r},(function(){return t.scheduledUpdatePosition(t.props)}))},t.prototype.UNSAFE_componentWillReceiveProps=function(e){this.scheduledUpdatePosition(e)},t.prototype.componentDidMount=function(){window.addEventListener("resize",this.onResize);var e=this.props.stick;this.scrollElement=e?ur(this.props.target):this.props.scrollableElement,this.scrollElement&&this.scrollElement.addEventListener("scroll",this.onResize)},t.prototype.componentWillUnmount=function(){window.removeEventListener("resize",this.onResize),this.scrollElement&&this.scrollElement.removeEventListener("scroll",this.onResize),this.scheduledUpdatePosition.cancel()},t.prototype.renderPopup=function(){var e=this.state.position,t=this.props.shouldRenderPopup;return t&&!t(e||{})?null:o.a.createElement("div",{ref:this.handleRef,style:ht({position:"absolute",zIndex:this.props.zIndex||10},e),"aria-label":this.props.ariaLabel||"Popup","data-editor-popup":!0},this.props.children)},t.prototype.render=function(){var e=this.props,t=e.target,n=e.mountTo,r=this.state.validPosition;return t&&r?n?Object(i.createPortal)(this.renderPopup(),n):this.renderPopup():null},t.defaultProps={offset:[0,0],allowOutOfBound:!1},t}(o.a.Component),pr=function(){return 8},dr=function(){return 11};var fr,hr,mr,vr,gr,br,yr,xr,wr,Er,kr,Or,Pr,Cr,Sr,Mr,Ar,Dr,Ir,Rr,jr,Tr,Vr,_r,Fr,Br,Nr=function(e){return function(t,n){return n&&n(t.tr.setMeta(Tn,{action:qn,params:{currentIndex:e}})),!0}},qr="@atlaskit-shared-theme/item",Ur={afterItemSpacing:{compact:8,default:8},beforeItemSpacing:{compact:8,default:8},borderRadius:3,focus:{outline:"#4C9AFF"},height:{compact:0,default:0},width:{compact:"auto",default:"auto"},padding:{default:{bottom:4,left:4,right:4,top:4},compact:{bottom:8,left:8,right:8,top:8}},default:{background:"#FFFFFF",text:"#091E42",secondaryText:Cn},selected:{background:"#DEEBFF",text:"#42526E",secondaryText:Cn},active:{background:"#DEEBFF",text:"#0052CC",secondaryText:Cn},hover:{background:"#EBECF0",text:"#172B4D",secondaryText:Cn},disabled:{background:Pn,text:Cn,secondaryText:Cn},dragging:{background:"#F4F5F7",text:"#172B4D",secondaryText:Cn}},zr=function(e){return void 0!==e&&null!==e&&""!==e},Lr=function(e,t,n){var r=function(e,t,n){return n?e&&e[n]&&zr(e[n][t])?e:Ur:e&&zr(e[t])?e:Ur}(e,t,n);return n?r[n][t]:r[t]},Hr=function(e){return function(t){var n=t.theme,r=Lr(n[qr],e);return Object(l.css)(fr||(fr=yt(["\n    background-color: ",";\n    color: ",";\n    fill: ",";\n    text-decoration: none;\n\n    &:focus {\n      color: ",";\n    }\n  "],["\n    background-color: ",";\n    color: ",";\n    fill: ",";\n    text-decoration: none;\n\n    &:focus {\n      color: ",";\n    }\n  "])),r.background,r.text,r.background,r.text)}},Wr=function(e){var t=e.isCompact,n=e.theme,r=e.description,o=t?"compact":"default",i=Lr(n[qr],o,"padding"),a=i.bottom,s=void 0===a?0:a,c=i.left,u=void 0===c?0:c,p=i.right,d=void 0===p?0:p,f=i.top,h=void 0===f?0:f,m="function"===typeof h?h():h,v="function"===typeof s?s():s;return m=Math.max(r?m-1:m,0),v=Math.max(v-1,0),Object(l.css)(hr||(hr=yt(["\n    padding: ","px ","px ","px ","px;\n  "],["\n    padding: ","px ","px ","px ","px;\n  "])),m,d,v,u)},$r=function(e){var t=e.isCompact,n=e.theme,r=t?"compact":"default",o=Lr(n[qr],r,"height");return o?Object(l.css)(mr||(mr=yt(["\n        height: ","px;\n      "],["\n        height: ","px;\n      "])),o):""},Kr=function(e){var t=e.isCompact,n=e.theme,r=t?"compact":"default",o=Lr(n[qr],r,"width");return o?"number"===typeof o?Object(l.css)(vr||(vr=yt(["\n        width: ","px;\n      "],["\n        width: ","px;\n      "])),o):Object(l.css)(gr||(gr=yt(["\n        width: ",";\n      "],["\n        width: ",";\n      "])),o):""},Qr=function(e){var t=e.theme,n=e.isDisabled,r=e.isDragging,o=e.isSelected;if(r)return Object(l.css)(br||(br=yt(["\n      "," box-shadow: 0 4px 8px -2px ",",\n        0 0 1px ",";\n    "],["\n      "," box-shadow: 0 4px 8px -2px ",",\n        0 0 1px ",";\n    "])),Hr("dragging"),Sn,Sn);var i=Object(l.css)(yr||(yr=yt(["\n    &:focus {\n      box-shadow: 0 0 0 2px\n        "," inset;\n      text-decoration: none;\n    }\n  "],["\n    &:focus {\n      box-shadow: 0 0 0 2px\n        "," inset;\n      text-decoration: none;\n    }\n  "])),Lr(t[qr],"outline","focus"));return n?Object(l.css)(xr||(xr=yt(["\n      cursor: not-allowed;\n      ","\n      ",";\n    "],["\n      cursor: not-allowed;\n      ","\n      ",";\n    "])),Hr("disabled"),i):o?Object(l.css)(wr||(wr=yt(["\n      "," &:hover {\n        ",";\n      }\n\n      &:active {\n        ",";\n      }\n\n      ",";\n    "],["\n      "," &:hover {\n        ",";\n      }\n\n      &:active {\n        ",";\n      }\n\n      ",";\n    "])),Hr("selected"),Hr("hover"),Hr("active"),i):Object(l.css)(Er||(Er=yt(["\n    &:hover {\n      ",";\n    }\n\n    &:active {\n      ",";\n    }\n\n    ",";\n  "],["\n    &:hover {\n      ",";\n    }\n\n    &:active {\n      ",";\n    }\n\n    ",";\n  "])),Hr("hover"),Hr("active"),i)},Gr=function(e){var t=e.theme;return Object(l.css)(kr||(kr=yt(["\n  && {\n    align-items: center;\n    border-radius: ","px;\n    box-sizing: border-box;\n    cursor: pointer;\n    display: ",";\n    flex: none;\n    "," "," "," "," "," &:focus {\n      /* focus shadow drawn by getInteractiveStyles */\n\n      outline: none;\n      /* relative position prevents bgcolor of a hovered element from\n      obfuscating focus ring of a focused sibling element */\n      position: relative;\n    }\n  }\n"],["\n  && {\n    align-items: center;\n    border-radius: ","px;\n    box-sizing: border-box;\n    cursor: pointer;\n    display: ",";\n    flex: none;\n    "," "," "," "," "," &:focus {\n      /* focus shadow drawn by getInteractiveStyles */\n\n      outline: none;\n      /* relative position prevents bgcolor of a hovered element from\n      obfuscating focus ring of a focused sibling element */\n      position: relative;\n    }\n  }\n"])),Lr(t[qr],"borderRadius"),(function(e){return e.isHidden?"none":"flex"}),Hr("default"),Wr,Qr,$r,Kr)},Yr=(l.default.span(Sr||(Sr=yt(["\n  display: flex;\n  margin: 0 2px;\n"],["\n  display: flex;\n  margin: 0 2px;\n"]))),l.default.span(Mr||(Mr=yt(["\n  align-items: center;\n  display: flex;\n  flex-shrink: 0;\n  /* Fix windows line-height issue */\n  padding-bottom: 1px;\n"],["\n  align-items: center;\n  display: flex;\n  flex-shrink: 0;\n  /* Fix windows line-height issue */\n  padding-bottom: 1px;\n"])))),Xr=Object(l.default)(Yr)(Dr||(Dr=yt(["\n  ",";\n"],["\n  ",";\n"])),(function(e){var t=e.isCompact,n=e.theme,r=t?"compact":"default",o=Lr(n[qr],r,"beforeItemSpacing");return Object(l.css)(Ar||(Ar=yt(["\n    margin-right: ","px;\n  "],["\n    margin-right: ","px;\n  "])),o)})),Jr=Object(l.default)(Yr)(Rr||(Rr=yt(["\n  ",";\n"],["\n  ",";\n"])),(function(e){var t=e.isCompact,n=e.theme,r=t?"compact":"default",o=Lr(n[qr],r,"afterItemSpacing");return Object(l.css)(Ir||(Ir=yt(["\n    margin-left: ","px;\n  "],["\n    margin-left: ","px;\n  "])),o)})),Zr=l.default.span(jr||(jr=yt(["\n  display: flex;\n  flex-direction: column;\n  flex-grow: 1;\n  margin: 0;\n  overflow: hidden;\n\n  &:first-child {\n    margin: 0;\n  }\n"],["\n  display: flex;\n  flex-direction: column;\n  flex-grow: 1;\n  margin: 0;\n  overflow: hidden;\n\n  &:first-child {\n    margin: 0;\n  }\n"]))),eo=l.default.span(Tr||(Tr=yt(["\n  display: block;\n  flex: 1 1 auto;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: ",";\n  line-height: ",";\n  /* Fix windows line-height issue */\n  padding-bottom: 1px;\n"],["\n  display: block;\n  flex: 1 1 auto;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: ",";\n  line-height: ",";\n  /* Fix windows line-height issue */\n  padding-bottom: 1px;\n"])),(function(e){return e.allowMultiline?"normal":"nowrap"}),16/14),to=l.default.span(Br||(Br=yt(["\n  flex: 1 1 auto;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  ",";\n  ",";\n"],["\n  flex: 1 1 auto;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  ",";\n  ",";\n"])),(function(e){var t=e.isDisabled,n=e.theme;return t?Object(l.css)(Vr||(Vr=yt(["\n      color: ",";\n    "],["\n      color: ",";\n    "])),Lr(n[qr],"secondaryText","disabled")):Object(l.css)(_r||(_r=yt(["\n    color: ",";\n\n    /* This detects hover on the grandparent. Saves us having to maintain isHovered\n       state in the grandparent. */\n    *:hover > * > & {\n      color: ",";\n    }\n\n    *:active > * > & {\n      color: ",";\n    }\n  "],["\n    color: ",";\n\n    /* This detects hover on the grandparent. Saves us having to maintain isHovered\n       state in the grandparent. */\n    *:hover > * > & {\n      color: ",";\n    }\n\n    *:active > * > & {\n      color: ",";\n    }\n  "])),Lr(n[qr],"secondaryText","default"),(function(){return Lr(n[qr],"secondaryText","hover")}),(function(){return Lr(n[qr],"secondaryText","active")}))}),(function(e){var t=e.isCompact,n=t?10:11,r=t?1.2:14/n;return Object(l.css)(Fr||(Fr=yt(["\n    font-size: ","px;\n    line-height: ",";\n    /* Fix windows line-height issue */\n    padding-bottom: 1px;\n  "],["\n    font-size: ","px;\n    line-height: ",";\n    /* Fix windows line-height issue */\n    padding-bottom: 1px;\n  "])),n,r)})),no=function(e){function t(t){var n=e.call(this,t)||this;return n.setRef=function(e){n.ref=e},n.href=function(){return n.props.isDisabled?null:n.props.href},n.rootComponent=function(e){var t=e.href,n=e.linkComponent;return n?Object(l.default)(n)(Or||(Or=yt(["\n      ",";\n    "],["\n      ",";\n    "])),Gr):t?l.default.a(Pr||(Pr=yt(["\n      ",";\n    "],["\n      ",";\n    "])),Gr):l.default.span(Cr||(Cr=yt(["\n    ",";\n  "],["\n    ",";\n  "])),Gr)}({href:n.href(),linkComponent:t.linkComponent}),n.ref=o.a.createRef(),n}return ft(t,e),t.prototype.componentDidMount=function(){this.ref&&this.props.autoFocus&&this.ref.focus()},t.prototype.render=function(){var e=this,t=this.props,n=t.onClick,r=t.onKeyDown,i=t.isCompact,a=t.isDisabled,s=t.isDragging,c=t.isHidden,u=t.isSelected,l=t.onMouseEnter,p=t.onMouseLeave,d=t.role,f=t.dnd,h=mt(t,["onClick","onKeyDown","isCompact","isDisabled","isDragging","isHidden","isSelected","onMouseEnter","onMouseLeave","role","dnd"]),m=this.rootComponent,v=f&&f.dragHandleProps||null,g={onClick:function(e){e.defaultPrevented||!a&&n&&n(e)},onMouseDown:function(e){v&&v.onMouseDown&&v.onMouseDown(e),e.preventDefault()},onKeyDown:function(e){s||(v&&v.onKeyDown&&v.onKeyDown(e),e.defaultPrevented||a||r&&r(e))}};return o.a.createElement(m,ht({"aria-disabled":a,href:this.href(),isCompact:i,isDisabled:a,isDragging:s,isHidden:c,isSelected:u,onMouseEnter:l,onMouseLeave:p,role:d,tabIndex:a||c||this.props.href?null:0,target:this.props.target,title:this.props.title,ref:function(t){e.setRef(t),f&&f.ref&&f.ref(t)}},f&&f.draggableProps,v,g,h),!!this.props.elemBefore&&o.a.createElement(Xr,{isCompact:i},this.props.elemBefore),o.a.createElement(Zr,null,o.a.createElement(eo,{allowMultiline:this.props.shouldAllowMultiline},this.props.children),!!this.props.description&&o.a.createElement(to,{isCompact:this.props.isCompact,isDisabled:this.props.isDisabled},this.props.description)),!!this.props.elemAfter&&o.a.createElement(Jr,{isCompact:i},this.props.elemAfter))},t.defaultProps={autoFocus:!1,description:"",isCompact:!1,isDisabled:!1,isHidden:!1,role:"button",shouldAllowMultiline:!1},t}(o.a.Component),ro=l.default.div(ao||(ao=yt(["\n  align-items: center;\n  color: ",";\n  display: flex;\n  flex: 1 1 auto;\n  ",";\n"],["\n  align-items: center;\n  color: ",";\n  display: flex;\n  flex: 1 1 auto;\n  ",";\n"])),(function(e){var t=e.theme;return Lr(t[qr],"secondaryText","default")}),(function(e){var t=e.isCompact,n=e.theme,r=t?"compact":"default",o=Lr(n[qr],r,"padding"),i=o.bottom,a=void 0===i?0:i,s=o.left,c=void 0===s?0:s,u=o.right,p=void 0===u?0:u,d=o.top,f=void 0===d?0:d;return Object(l.css)(io||(io=yt(["\n    padding: ","px ","px ","px ","px;\n  "],["\n    padding: ","px ","px ","px ","px;\n  "])),f,p,a,c)}));ro.displayName="ItemGroupTitle";var oo=l.default.div(so||(so=yt(["\n  flex: 0 0 auto;\n  margin-right: -","px;\n"],["\n  flex: 0 0 auto;\n  margin-right: -","px;\n"])),4);oo.displayName="ItemGroupTitleAfter";var io,ao,so,co,uo=l.default.div(co||(co=yt(["\n  flex: 1 1 auto;\n  font-size: ","px;\n  line-height: 1;\n  text-transform: uppercase;\n  /* Required for children to truncate */\n  min-width: 0;\n"],["\n  flex: 1 1 auto;\n  font-size: ","px;\n  line-height: 1;\n  text-transform: uppercase;\n  /* Required for children to truncate */\n  min-width: 0;\n"])),dr);uo.displayName="ItemGroupTitleText";var lo,po,fo,ho,mo=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return ft(t,e),t.prototype.render=function(){var e,t=this.props,n=t.children,r=t.elemAfter,i=t.isCompact,a=t.title,s=t.label,c=t.innerRef,u=t.role,l=null!==(e=null!==s&&void 0!==s?s:a)&&void 0!==e?e:"";return o.a.createElement("div",{"aria-label":l.toString(),role:u,ref:c},a?o.a.createElement(ro,{"aria-hidden":"true",isCompact:i},o.a.createElement(uo,null,a),r?o.a.createElement(oo,null,r):null):null,n)},t.defaultProps={role:"group"},t}(o.a.Component),vo=(Object(l.css)(lo||(lo=yt(["\n  box-shadow: 0 0 1px rgba(9, 30, 66, 0.31),\n    0 4px 8px -2px rgba(9, 30, 66, 0.25);\n"],["\n  box-shadow: 0 0 1px rgba(9, 30, 66, 0.31),\n    0 4px 8px -2px rgba(9, 30, 66, 0.25);\n"]))),l.default.div(po||(po=yt(["\n  background-color: rgba(223, 225, 229, 0.5); /* N60 at 50% */\n  color: ",";\n  border-radius: ","px;\n  padding: 4px;\n  line-height: 12px;\n  font-size: 11.67px;\n  align-self: flex-end;\n  @media (max-width: ","px) {\n    display: none;\n  }\n"],["\n  background-color: rgba(223, 225, 229, 0.5); /* N60 at 50% */\n  color: ",";\n  border-radius: ","px;\n  padding: 4px;\n  line-height: 12px;\n  font-size: 11.67px;\n  align-self: flex-end;\n  @media (max-width: ","px) {\n    display: none;\n  }\n"])),"#7A869A",3,0));l.default.div(fo||(fo=yt(["\n  &::before {\n    background: ",";\n  }\n"],["\n  &::before {\n    background: ",";\n  }\n"])),(function(e){return e.selectedColor}));function go(e){var t=e.label,n=void 0===t?"":t;return o.a.createElement("svg",{"aria-label":n,width:40,height:40},o.a.createElement("defs",null,o.a.createElement("linearGradient",{x1:"-26.046%",y1:"100%",x2:"62.626%",y2:"0%",id:"fallback-a"},o.a.createElement("stop",{stopColor:"#B3BAC5",offset:"0%"}),o.a.createElement("stop",{stopColor:"#A5ADBA",offset:"100%"}))),o.a.createElement("g",{fill:"none",fillRule:"evenodd"},o.a.createElement("path",{fill:"#FFF",d:"M0 0h40v40H0z"}),o.a.createElement("path",{fill:"#DFE1E6",d:"M20 16h12v12H20z"}),o.a.createElement("path",{fill:"url(#fallback-a)",d:"M8 16h12v12H8z"}),o.a.createElement("path",{d:"M20 16c-4 .5-6.029 2.5-6.086 6-.057 3.5-2.028 5.5-5.914 6h12V16z",fill:"#A5ADBA"}),o.a.createElement("path",{fill:"#B3BAC5",d:"M17.5 13h5v3h-5z"}),o.a.createElement("path",{fill:"#A5ADBA",d:"M10 13h5v3h-5z"}),o.a.createElement("path",{fill:"#DFE1E6",d:"M25 13h5v3h-5z"})))}var bo={overflow:"hidden"},yo=((ho={})[qr]={padding:{default:{bottom:12,left:12,right:12,top:12}},beforeItemSpacing:{default:function(){return 12}},borderRadius:function(){return 0},hover:{text:"#091E42",secondaryText:Cn},selected:{background:"#F4F5F7",text:"#172B4D",secondaryText:Cn}},ho),xo=l.default.div(Po||(Po=yt(["\n  width: 40px;\n  height: 40px;\n  overflow: hidden;\n  border: 1px solid rgba(223, 225, 229, 0.5); /* N60 at 50% */\n  border-radius: ","px;\n  box-sizing: border-box;\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  div {\n    width: 40px;\n    height: 40px;\n  }\n"],["\n  width: 40px;\n  height: 40px;\n  overflow: hidden;\n  border: 1px solid rgba(223, 225, 229, 0.5); /* N60 at 50% */\n  border-radius: ","px;\n  box-sizing: border-box;\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  div {\n    width: 40px;\n    height: 40px;\n  }\n"])),3),wo=l.default.div(Co||(Co=yt(["\n  display: flex;\n  flex-direction: row;\n  flex-wrap: nowrap;\n  justify-content: space-between;\n  line-height: 1.4;\n"],["\n  display: flex;\n  flex-direction: row;\n  flex-wrap: nowrap;\n  justify-content: space-between;\n  line-height: 1.4;\n"]))),Eo=l.default.div(So||(So=yt(["\n  white-space: initial;\n  .item-description {\n    font-size: 11.67px;\n    color: ",";\n    margin-top: 4px;\n  }\n"],["\n  white-space: initial;\n  .item-description {\n    font-size: 11.67px;\n    color: ",";\n    margin-top: 4px;\n  }\n"])),Cn),ko=l.default.div(Mo||(Mo=yt(["\n  flex: 0 0 auto;\n"],["\n  flex: 0 0 auto;\n"])));function Oo(e){var t=e.items,n=e.currentIndex,r=e.insertByIndex,i=e.setCurrentIndex;return Array.isArray(t)?o.a.createElement(l.ThemeProvider,{theme:yo},o.a.createElement(mo,null,t.map((function(e,t){return o.a.createElement(Ro,{key:e.key||e.title,item:e,index:t,currentIndex:n,insertByIndex:r,setCurrentIndex:i})})))):null}var Po,Co,So,Mo,Ao,Do,Io,Ro=function(e){function t(t){var n=e.call(this,t)||this;return n.insertByIndex=function(){n.props.insertByIndex(n.props.index)},n.setCurrentIndex=function(){n.isSelected(n.props)||n.props.setCurrentIndex(n.props.index)},n.handleRef=function(e){},n.ref=o.a.createRef(),n}return ft(t,e),t.prototype.shouldComponentUpdate=function(e){return this.isSelected(this.props)!==this.isSelected(e)},t.prototype.isSelected=function(e){return e.index===e.currentIndex},t.prototype.componentDidUpdate=function(){this.props.index===this.props.currentIndex&&this.ref&&this.ref.current&&function(e){var t=e.offsetTop,n=e.offsetHeight,r=e.offsetParent,o=r,i=o.offsetHeight,a=o.scrollTop,s=t+n>i+a?1:a>t?-1:0;0!==s&&r&&(r.scrollTop=1===s?t+n-i:t)}(this.ref.current)},t.prototype.render=function(){var e,t=this.props.item;return t.render?o.a.createElement("div",{onMouseMove:this.setCurrentIndex,style:bo},o.a.createElement(t.render,{onClick:this.insertByIndex,onHover:this.setCurrentIndex,isSelected:this.isSelected(this.props)})):o.a.createElement(no,{onClick:this.insertByIndex,onMouseMove:this.setCurrentIndex,elemBefore:o.a.createElement(xo,null,t.icon?t.icon():(e=t.title,o.a.createElement(go,{label:e}))),isSelected:this.isSelected(this.props),"aria-describedby":t.title,ref:this.handleRef},o.a.createElement(wo,null,o.a.createElement(Eo,null,o.a.createElement("div",{className:"item-title"},t.title),t.description&&o.a.createElement("div",{className:"item-description"},t.description)),o.a.createElement(ko,null,t.keyshortcut&&o.a.createElement(vo,null,t.keyshortcut))))},t}(o.a.Component),jo=l.default.div(Io||(Io=yt(["\n  background: ",";\n  border-radius: ","px;\n  box-shadow: 0 0 1px ",", 0 4px 8px -2px ",";\n  padding: ","px 0;\n  width: 320px;\n  max-height: 380px; /* ~5.5 visibile items */\n  overflow-y: auto;\n  -ms-overflow-style: -ms-autohiding-scrollbar;\n  position: relative;\n"],["\n  background: ",";\n  border-radius: ","px;\n  box-shadow: 0 0 1px ",", 0 4px 8px -2px ",";\n  padding: ","px 0;\n  width: 320px;\n  max-height: 380px; /* ~5.5 visibile items */\n  overflow-y: auto;\n  -ms-overflow-style: -ms-autohiding-scrollbar;\n  position: relative;\n"])),Pn,3,Sn,"rgba(9, 30, 66, 0.25)",(Ao=pr,Do=2,function(e){return Ao(e)/Do})),To=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.composing=!1,t.handleKeyPress=function(){t.composing=!0},t.handleMouseMove=function(){t.composing=!1},t.componentDidMount=function(){window.addEventListener("keypress",t.handleKeyPress),window.addEventListener("mousemove",t.handleMouseMove)},t.componentWillUnmount=function(){window.removeEventListener("keypress",t.handleKeyPress),window.removeEventListener("mousemove",t.handleMouseMove)},t.insertByIndex=function(e){$n(e)(t.props.editorView.state,t.props.editorView.dispatch)},t.setCurrentIndex=function(e){t.composing||e!==t.props.currentIndex&&Nr(e)(t.props.editorView.state,t.props.editorView.dispatch)},t}return ft(t,e),t.prototype.render=function(){var e=this.props,t=e.active,n=e.items,r=e.isLoading,i=e.anchorElement,a=e.currentIndex,s=e.popupsMountPoint,c=e.popupsBoundariesElement,u=e.popupsScrollableElement,l=e.highlight;return t&&i&&n&&n.length?o.a.createElement(lr,{zIndex:410,target:i,mountTo:s,boundariesElement:c,scrollableElement:u,fitHeight:300,fitWidth:340,offset:[0,8]},o.a.createElement(jo,{className:"fabric-editor-typeahead"},l,Array.isArray(n)?o.a.createElement(Oo,{insertByIndex:this.insertByIndex,setCurrentIndex:this.setCurrentIndex,items:n,currentIndex:a}):!n&&r?"loading...":"no items")):null},t.displayName="TypeAhead",t}(o.a.Component),Vo=function(){return{name:"typeAhead",marks:function(){return[{name:"typeAheadQuery",mark:Mn}]},pmPlugins:function(e){return void 0===e&&(e=[]),[{name:"typeAhead",plugin:function(t){return Jn(t.dispatch,e)}},{name:"typeAheadInputRule",plugin:function(t){return er(t.schema,e)}},{name:"typeAheadKeymap",plugin:function(){return tr()}}]},contentComponent:function(e){var t=e.editorView,n=e.popupsMountPoint,r=e.popupsBoundariesElement,i=e.popupsScrollableElement;return o.a.createElement(An,{plugins:{typeAhead:Tn},render:function(e){var a=e.typeAhead,s=void 0===a?Xn():a;if(s.typeAheadHandler&&s.typeAheadHandler.headless)return null;var c=s.queryMarkPos,u=null;if(null!==c)try{u=t.domAtPos(c)}catch(p){return null}var l=u?u.node.childNodes[u.offset]:void 0;return o.a.createElement(To,{editorView:t,popupsMountPoint:n,popupsBoundariesElement:r,popupsScrollableElement:i,anchorElement:l,active:s.active,isLoading:!!s.itemsLoader,items:s.items,currentIndex:s.currentIndex,highlight:s.highlight})}})}}},_o=function(){function e(){this.plugins=[]}return e.prototype.add=function(e){return this.plugins.push(e),this},e.prototype.has=function(e){return this.plugins.some((function(t){return Array.isArray(t)?t[0]===e:t===e}))},e.prototype.getEditorPlugins=function(e){var t=this.processEditorPlugins();return this.removeExcludedPlugins(t,e)},e.prototype.processEditorPlugins=function(){var e=new Map;this.plugins.forEach((function(t){if(Array.isArray(t)){var n=t[0],r=t[1];e.set(n,r)}else{if(e.has(t)&&void 0===e.get(t))throw new Error(t+" is already included!");e.set(t,void 0)}}));var t=[];return e.forEach((function(e,n){t.push(n(e))})),t},e.prototype.removeExcludedPlugins=function(e,t){return t?e.filter((function(e){return!e||!t.has(e.name)})):e},e}();function Fo(e){var t=function(e){var t=Object.keys(e),n=new Set(t.map((function(t){return e[t].group})));return t.forEach((function(t){var r=e[t];r.excludes&&(r.excludes=r.excludes.split(" ").filter((function(e){return n.has(e)})).join(" "))})),e}(e.marks.sort(jt("marks")).reduce((function(e,t){return e[t.name]=t.mark,e}),{})),n=e.nodes.sort(jt("nodes")).reduce((function(e,t){return e[t.name]=t.node,e}),{});return new rt.Schema({nodes:n,marks:t})}var Bo=function(e){function t(t){var n,r=e.call(this,t)||this;return r.canDispatchTransactions=!0,r.createEditorState=function(e){if(r.editorView)return console.warn("The editor does not support changing the schema dynamically."),r.editorState;r.config=Tt(r.getPlugins(e.props.editorProps,void 0));var t=Fo(r.config),n=Vt({schema:t,dispatch:r.dispatch,editorConfig:r.config,eventDispatcher:r.eventDispatcher,providerFactory:e.props.providerFactory,portalProviderAPI:r.props.portalProviderAPI});return Xe.EditorState.create({schema:t,plugins:n,doc:void 0,selection:void 0})},r.reconfigureState=function(e){if(r.editorView){r.editorView.dom instanceof HTMLElement&&r.editorView.hasFocus()&&r.editorView.dom.blur(),r.config=Tt(r.getPlugins(e.editorProps,r.props.editorProps));var t=r.editorState,n=Vt({schema:t.schema,dispatch:r.dispatch,editorConfig:r.config,eventDispatcher:r.eventDispatcher,providerFactory:e.providerFactory,portalProviderAPI:e.portalProviderAPI}),o=t.reconfigure({plugins:n});return r.editorView.updateState(o),r.editorView.update(ht(ht({},r.editorView.props),{state:o}))}},r.dispatchTransaction=function(e){if(r.editorView){Ot("\ud83e\udd89 ReactEditorView::dispatchTransaction");var t=function(e){var t=[];return(e.steps||[]).forEach((function(n){for(var r=n.to,o=n.from,i=n.slice,a=i&&i.content?i.content.size:0,s=function(n){if(n<=e.doc.content.size){var r=e.doc.resolve(n).node(1);r&&!t.find((function(e){return e===r}))&&t.push(r)}},c=o;c<=r+a;c++)s(c)})),t}(e);if(function(e){return e.every(St)}(t)){var n=r.editorView.state;Ot("\ud83e\udd89 EditorView::state::apply");var o=r.editorView.state.apply(e);if(Pt("\ud83e\udd89 EditorView::state::apply"),o===n)return;Ot("\ud83e\udd89 EditorView::updateState"),r.editorView.updateState(o),Pt("\ud83e\udd89 EditorView::updateState"),r.editorState=o}else{var i=t.filter((function(e){return!St(e)})).map((function(e){return function(e){try{return Mt(e,0)}catch(t){return"Error logging document structure: "+t}}(e)}));console.error("Invalid nodes in transaction"),console.log(e),console.log(i)}Pt("\ud83e\udd89 ReactEditorView::dispatchTransaction",(function(){}))}},r.getDirectEditorProps=function(e){return{state:e||r.editorState,dispatchTransaction:function(e){r.canDispatchTransactions&&r.dispatchTransaction(e)},editable:function(e){return!0},attributes:{"data-gramm":"false"}}},r.handleEditorViewRef=function(e){if(!r.editorView&&e){r.createEditorView(e);var t=r.editorView;r.props.onEditorCreated({view:t,config:r.config,eventDispatcher:r.eventDispatcher}),r.props.editorProps.shouldFocus&&(r.focusTimeoutId=function(e){if(e.hasFocus())return;return window.setTimeout((function(){e.focus()}),0)}(t)),r.forceUpdate()}else r.editorView&&!e&&(r.props.onEditorDestroyed({view:r.editorView,config:r.config,eventDispatcher:r.eventDispatcher}),r.editorView.destroy(),r.editorView=void 0)},r.editor=o.a.createElement("div",{className:tn.chrome?"ua-chrome":tn.ie?"ua-ie":tn.gecko?"ua-firefox":"",key:"ProseMirror",ref:r.handleEditorViewRef}),r.eventDispatcher=new wt,r.dispatch=(n=r.eventDispatcher,function(e,t){if(!e)throw new Error("event name is required!");var r="string"===typeof e?e:e.key;n.emit(r,t)}),r.editorState=r.createEditorState({props:t,replaceDoc:!0}),r}return ft(t,e),t.prototype.componentDidMount=function(){this.canDispatchTransactions=!0},t.prototype.componentWillUnmount=function(){if(this.eventDispatcher.destroy(),clearTimeout(this.focusTimeoutId),this.editorView){var e=this.editorView.state;e.plugins.forEach((function(t){var n=t.getState(e);n&&n.destroy&&n.destroy()}))}},t.prototype.getPlugins=function(e,t){return function(e,t){var n=new _o;return n.add(Lt),n.add(yn),n.add(kn),n.add(Vo),n.getEditorPlugins()}()},t.prototype.createEditorView=function(e){this.editorView=new Je.a({mount:e},this.getDirectEditorProps()),Object(Ye.a)(this.editorView)},t.prototype.render=function(){return this.props.render?this.props.render({editor:this.editor,view:this.editorView,config:this.config,eventDispatcher:this.eventDispatcher}):this.editor},t}(o.a.Component);var No=function(){function e(){this.listeners=[]}return e.from=function(t,n,r){var o=new e;return o._privateRegisterEditor(t,n,r),o},e.prototype._privateGetEditorView=function(){return this.editorView},e.prototype._privateGetEventDispatcher=function(){return this.eventDispatcher},e.prototype._privateRegisterEditor=function(e,t,n){if(this.contentTransformer=n,this.eventDispatcher=t,!this.editorView&&e)this.editorView=e,this.listeners.forEach((function(n){return n(e,t)}));else if(this.editorView!==e)throw new Error("Editor has already been registered! It's not allowed to re-register editor with the new Editor instance.");this.contentTransformer&&(this.contentEncode=this.contentTransformer.encode.bind(this.contentTransformer))},e.prototype._privateUnregisterEditor=function(){this.editorView=void 0,this.contentTransformer=void 0,this.contentEncode=void 0,this.eventDispatcher=void 0},e.prototype._privateSubscribe=function(e){this.editorView&&this.eventDispatcher&&e(this.editorView,this.eventDispatcher),this.listeners.push(e)},e.prototype._privateUnsubscribe=function(e){this.listeners=this.listeners.filter((function(t){return t!==e}))},e.prototype.focus=function(){return!(!this.editorView||this.editorView.hasFocus())&&(this.editorView.focus(),this.editorView.dispatch(this.editorView.state.tr.scrollIntoView()),!0)},e.prototype.blur=function(){return!(!this.editorView||!this.editorView.hasFocus())&&(this.editorView.dom.blur(),!0)},e.prototype.clear=function(){if(!this.editorView)return!1;var e=this.editorView,t=e.state,n=e.state.tr.setSelection(Xe.TextSelection.create(t.doc,0,t.doc.nodeSize-2)).deleteSelection();return e.dispatch(n),!0},e.prototype.appendText=function(e){if(!this.editorView||!e)return!1;var t=this.editorView.state,n=t.doc.lastChild;if(n&&n.type!==t.schema.nodes.paragraph)return!1;var r=t.tr.insertText(e).scrollIntoView();return this.editorView.dispatch(r),!0},e}(),qo=function(e){function t(t){var n=e.call(this,t)||this;return n.editorActions=t.editorActions||new No,n}return ft(t,e),t.prototype.getChildContext=function(){return{editorActions:this.editorActions}},t.prototype.render=function(){return o.a.Children.only(this.props.children)},t.childContextTypes={editorActions:at.a.object},t}(o.a.Component),Uo=function(e){function t(){var t=e.call(this)||this;return t.portals=new Map,t.setContext=function(e){t.context=e},t}return ft(t,e),t.prototype.render=function(e,t,n){void 0===n&&(n=!1),this.portals.set(t,{children:e,hasReactContext:n});var r=e();Object(i.unstable_renderSubtreeIntoContainer)(this.context,r,t)},t.prototype.forceUpdate=function(){var e=this;this.portals.forEach((function(t,n){if(t.hasReactContext){var r=t.children();Object(i.unstable_renderSubtreeIntoContainer)(e.context,r,n)}}))},t.prototype.remove=function(e){this.portals.delete(e);try{Object(i.unmountComponentAtNode)(e)}catch(t){console.warn("Race condition in PortalProviderAPI where PM removed DOM node before React unmounted it")}},t}(wt),zo=function(e){function t(t){var n=e.call(this,t)||this;return n.portalProviderAPI=new Uo,n}return ft(t,e),t.prototype.render=function(){return this.props.render(this.portalProviderAPI)},t.prototype.componentDidUpdate=function(){this.portalProviderAPI.forceUpdate()},t.displayName="PortalProvider",t}(o.a.Component),Lo=function(e){function t(t){var n=e.call(this,t)||this;return n.handleUpdate=function(e){return n.setState({portals:e})},t.portalProviderAPI.setContext(n),t.portalProviderAPI.on("update",n.handleUpdate),n.state={portals:new Map},n}return ft(t,e),t.prototype.render=function(){var e=this.state.portals;return o.a.createElement(o.a.Fragment,null,Array.from(e.entries()).map((function(e){var t=e[0],n=e[1];return Object(i.createPortal)(n,t)})))},t}(o.a.Component);var Ho=function(){function e(){this.providers=new Map,this.subscribers=new Map}return e.create=function(t){var n=new e;return Object.keys(t).forEach((function(e){n.setProvider(e,t[e])})),n},e.prototype.destroy=function(){this.providers.clear(),this.subscribers.clear()},e.prototype.isEmpty=function(){return!this.providers.size&&!this.subscribers.size},e.prototype.setProvider=function(e,t){this.providers.get(e)!==t&&(void 0!==t?this.providers.set(e,t):this.providers.delete(e),this.notifyUpdated(e,t))},e.prototype.removeProvider=function(e){this.providers.delete(e),this.notifyUpdated(e)},e.prototype.subscribe=function(e,t){var n=this.subscribers.get(e)||[];n.push(t),this.subscribers.set(e,n);var r=this.providers.get(e);r&&t(e,r)},e.prototype.unsubscribe=function(e,t){var n=this.subscribers.get(e);if(n){var r=n.indexOf(t);-1!==r&&n.splice(r,1),0===n.length?this.subscribers.delete(e):this.subscribers.set(e,n)}},e.prototype.unsubscribeAll=function(e){this.subscribers.get(e)&&this.subscribers.delete(e)},e.prototype.hasProvider=function(e){return this.providers.has(e)},e.prototype.notifyUpdated=function(e,t){var n=this.subscribers.get(e);n&&n.forEach((function(n){n(e,t)}))},e}();function Wo(){var e=document.createElement("fakeelement"),t={transition:"transitionend",MozTransition:"transitionend",OTransition:"oTransitionEnd",WebkitTransition:"webkitTransitionEnd"};for(var n in t)if(void 0!==e.style[n])return t[n]}var $o,Ko=l.default.div($o||($o=yt(["\n  display: flex;\n"],["\n  display: flex;\n"]))),Qo=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.transitionEvent=Wo(),t.forceComponentUpdate=function(e){e.propertyName.includes("width")&&t.forceUpdate()},t.removeModeChangeListener=function(e){e&&t.transitionEvent&&e.removeEventListener(t.transitionEvent,t.forceComponentUpdate)},t.addModeChangeListener=function(e){e&&t.transitionEvent&&e.addEventListener(t.transitionEvent,t.forceComponentUpdate)},t}return ft(t,e),t.prototype.shouldComponentUpdate=function(e){var t=this.props,n=t.editorView,r=t.editorActions,o=t.items,i=t.providerFactory,a=t.eventDispatcher,s=t.popupsMountPoint,c=t.popupsBoundariesElement,u=t.popupsScrollableElement,l=t.containerElement,p=t.disabled;return!(e.editorView===n&&e.editorActions===r&&e.items===o&&e.providerFactory===i&&e.eventDispatcher===a&&e.popupsMountPoint===s&&e.popupsBoundariesElement===c&&e.popupsScrollableElement===u&&e.containerElement===l&&e.disabled===p)},t.prototype.componentDidMount=function(){this.addModeChangeListener(this.props.contentAreaRef)},t.prototype.UNSAFE_componentWillReceiveProps=function(e){this.props.contentAreaRef!==e.contentAreaRef&&(this.removeModeChangeListener(this.props.contentAreaRef),this.addModeChangeListener(e.contentAreaRef))},t.prototype.componentWillUnmount=function(){this.removeModeChangeListener(this.props.contentAreaRef)},t.prototype.render=function(){var e=this.props,t=e.items,n=e.editorView,r=e.editorActions,i=e.eventDispatcher,a=e.providerFactory,s=e.appearance,c=e.popupsMountPoint,u=e.popupsBoundariesElement,l=e.popupsScrollableElement,p=e.containerElement,d=e.disabled;return t&&n?o.a.createElement(Ko,null,t.map((function(e,t){var f={key:t},h=e({editorView:n,editorActions:r,eventDispatcher:i,providerFactory:a,appearance:s,popupsMountPoint:c||void 0,popupsBoundariesElement:u,popupsScrollableElement:l,containerElement:p,disabled:d});return h&&o.a.cloneElement(h,f)}))):null},t.displayName="PluginSlot",t}(o.a.Component);function Go(e){return o.a.createElement(Jo,null,o.a.createElement(Zo,null))}var Yo,Xo,Jo=l.default.div(Yo||(Yo=yt(["\n  background: snow;\n  border: 1px solid black;\n  border-bottom: 0;\n  padding: 10px;\n  & > h2 {\n    margin: 0 0 5px 0;\n  }\n"],["\n  background: snow;\n  border: 1px solid black;\n  border-bottom: 0;\n  padding: 10px;\n  & > h2 {\n    margin: 0 0 5px 0;\n  }\n"]))),Zo=l.default.div(Xo||(Xo=yt(["\n  display: flex;\n"],["\n  display: flex;\n"])));var ei,ti,ni,ri=l.default.div(ei||(ei=yt(["\n  position: relative;\n"],["\n  position: relative;\n"]))),oi=l.default.div(ti||(ti=yt(["\n  z-index: 9999;\n"],["\n  z-index: 9999;\n"]))),ii=l.default.div(ni||(ni=yt(["\n  border: 1px solid black;\n  & > .ProseMirror {\n    min-height: 140px;\n    overflow-wrap: break-word;\n    outline: none;\n    padding: 10px;\n    white-space: pre-wrap;\n  }\n"],["\n  border: 1px solid black;\n  & > .ProseMirror {\n    min-height: 140px;\n    overflow-wrap: break-word;\n    outline: none;\n    padding: 10px;\n    white-space: pre-wrap;\n  }\n"])));var ai=[{title:"Minimum width extension",icon:function(){return o.a.createElement(pt.a,{label:"dev"})},action:function(e){return e({type:"extension",attrs:{extensionType:"com.atlassian.confluence.macro.core",extensionKey:"block-layout-eh",text:"Minimum width block extension demo",parameters:{style:{minWidth:400}}}})}},{title:"Lorem ipsum",icon:function(){return o.a.createElement(pt.a,{label:"dev"})},action:function(e){return e({type:"paragraph",content:[]}).insertText("Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean mi nisl, venenatis eget auctor vitae, venenatis quis lorem. Suspendisse maximus tortor vel dui tincidunt cursus. Vestibulum magna nibh, auctor non auctor id, finibus vitae orci. Nulla viverra ipsum et nunc fringilla ultricies. Pellentesque vitae felis molestie justo finibus accumsan. Suspendisse potenti. Nulla facilisi. Integer dignissim quis velit quis elementum. Sed sit amet varius ante. Duis vestibulum porta augue eu laoreet. Morbi id risus et augue sollicitudin aliquam. In et ligula dolor. Nam ac aliquet diam.")}}],si={"full-page":function(e){var t=e.className,n=e.editorDOMElement,i=Object(r.useRef)(null),a=Object(r.useRef)(null);return o.a.createElement(ri,{className:t+" popups-wrapper"},o.a.createElement(oi,{className:"popups",ref:i}),o.a.createElement(Go,null),o.a.createElement(ii,{ref:a},o.a.createElement(Qo,{editorView:e.editorView,editorActions:e.editorActions,eventDispatcher:e.eventDispatcher,providerFactory:e.providerFactory,appearance:e.appearance,items:e.contentComponents,contentAreaRef:a.current,popupsMountPoint:i.current,disabled:!1,containerElement:null}),n))}};function ci(e){var t=e.appearance,n=void 0===t?"full-page":t,i=(e.quickInsert,Object(r.useState)(new No)[0]),a=Object(r.useState)(new Ho)[0],s=Object(r.useState)(Promise.resolve({getItems:function(){return new Promise((function(e){window.setTimeout((function(){return e(ai)}),1e3)}))}}))[0],c=Object(r.useMemo)((function(){return si[n]}),[n]);function u(e){i._privateRegisterEditor(e.view,e.eventDispatcher)}function l(e){i._privateUnregisterEditor()}return Object(r.useEffect)((function(){s&&a.setProvider("quickInsertProvider",s)}),[]),o.a.createElement(qo,{editorActions:i},o.a.createElement(zo,{render:function(t){return o.a.createElement(o.a.Fragment,null,o.a.createElement(Bo,{editorProps:e,providerFactory:a,portalProviderAPI:t,onEditorCreated:u,onEditorDestroyed:l,render:function(e){var t=e.editor,r=e.view,s=e.eventDispatcher,u=e.config;return o.a.createElement(c,{appearance:n,editorActions:i,editorDOMElement:t,editorView:r,providerFactory:a,eventDispatcher:s,contentComponents:u.contentComponents,primaryToolbarComponents:u.primaryToolbarComponents})}}),o.a.createElement(Lo,{portalProviderAPI:t}))}}))}function ui(){var e=Object(c.a)(["\n"]);return ui=function(){return e},e}function li(e){var t=e.className;return r.createElement(pi,{className:t},r.createElement(Oe,null,r.createElement(ci,{performanceTracking:!0})))}var pi=l.default.div(ui()),di=function(){return r.createElement(a.a,{basename:"/prosemirror-react-typescript-example"},r.createElement(s.d,null,r.createElement(x,{exact:!0,path:"/",component:Se}),r.createElement(x,{exact:!0,path:"/minimal",component:Qe}),r.createElement(x,{exact:!0,path:"/atlassian",component:li}),r.createElement(s.a,{to:"/"})))};Object(i.render)(r.createElement(di,null),document.getElementById("root"))}},[[198,1,2]]]);
//# sourceMappingURL=main.a7f77b72.chunk.js.map