(this["webpackJsonpexample-app"]=this["webpackJsonpexample-app"]||[]).push([[0],{200:function(e,t,n){e.exports=n(445)},445:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),i=n(15),a=n(76),s=n(11),c=n(16),u=n(131),l=n(6);function p(){var e=Object(c.a)(["\n  box-sizing: border-box;\n  color: #fff;\n  cursor: pointer;\n  font-size: 1rem;\n  padding: 0.5rem 1rem;\n  text-decoration: none;\n  transition: 0.2s hover;\n  &:hover {\n    text-decoration: underline;\n  }\n  &.current {\n    font-weight: 600;\n  }\n"]);return p=function(){return e},e}function d(){var e=Object(c.a)(["\n  align-items: center;\n  display: flex;\n"]);return d=function(){return e},e}function f(){var e=Object(c.a)(["\n  background: #551a8b;\n  box-shadow: 0 0 2px 2px rgba(0,0,0,0.18);\n  padding: 1rem;\n"]);return f=function(){return e},e}function h(e){var t=e.className;return o.a.createElement(m,{className:t},o.a.createElement(v,null,o.a.createElement(g,{to:"/",exact:!0,activeClassName:"current"},"Full"),o.a.createElement(g,{to:"/minimal",activeClassName:"current"},"Minimal"),o.a.createElement(g,{to:"/atlassian",activeClassName:"current"},"Atlassian")))}var m=l.default.div(f()),v=l.default.nav(d()),g=Object(l.default)(a.b)(p());function b(){var e=Object(c.a)(["\n  margin: 40px auto 0 auto;\n  max-width: 680px;\n  padding-bottom: 20px;\n  @media only screen and (max-width: 720px) {\n    margin: 40px 20px 0 20px;\n    padding-bottom: 20px;\n  }\n"]);return b=function(){return e},e}function y(){var e=Object(c.a)(["\n  background: snow;\n  min-height: 100vh;\n"]);return y=function(){return e},e}var w=function(e){var t,n=e.component,o=Object(u.a)(e,["component"]);return r.createElement(s.b,Object.assign({},o,{render:(t=n,function(e){return r.createElement(x,null,r.createElement(h,e),r.createElement(E,null,r.createElement(t,e)))})}))},x=l.default.div(y()),E=l.default.main(b()),k=n(14),P=n(179),O=n.n(P),S=n(28),M=n(4),C=n(194),A=n(2),T=n(197),I=n(53),D=n(77),j=n(9),V=n(125),R=n(130),N=function(e,t){return(N=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function B(e,t){function n(){this.constructor=e}N(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var q=function(){return(q=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function F(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var _,L=function(){function e(){}return e.prototype.init=function(e){this._editorView=e},Object.defineProperty(e.prototype,"editorView",{get:function(){if(!this._editorView)throw Error("EditorViewProvider editorView accessed without editorView instance");return this._editorView},enumerable:!1,configurable:!0}),e.prototype.getMarks=function(){return this.editorView.state.schema.marks},e.prototype.getNodes=function(){return this.editorView.state.schema.nodes},e.prototype.execCommand=function(e){e(this.editorView.state,this.editorView.dispatch),this.focus()},e.prototype.focus=function(){return!(!this._editorView||this._editorView.hasFocus())&&(this._editorView.focus(),this._editorView.dispatch(this._editorView.state.tr.scrollIntoView()),!0)},e.prototype.blur=function(){return!(!this._editorView||!this._editorView.hasFocus())&&(this._editorView.dom.blur(),!0)},e.prototype.stateToJSON=function(){var e=this.editorView.state.toJSON();return q(q({},e),{plugins:[]})},e.prototype.replaceState=function(e){var t=M.EditorState.fromJSON({schema:this.editorView.state.schema,plugins:this.editorView.state.plugins},e);this.editorView.updateState(t);var n=this.editorView.state.tr;this.editorView.dispatch(n)},e.prototype.replaceDocument=function(e,t,n){if(void 0===t&&(t=!0),void 0===n&&(n=!0),!this.editorView||void 0===e||null===e)return!1;var r=this.editorView.state,o=function(e,t){var n;if("string"===typeof e)try{n=JSON.parse(e)}catch(o){return void console.error("Error processing value: "+e+" isn't a valid JSON")}else n=e;try{"doc"===n.type&&(Array.isArray(n.content)&&0===n.content.length&&n.content.push({type:"paragraph",content:[]}),n.version||(n.version=1));var r=A.Node.fromJSON(t,n);return r.check(),r}catch(o){return void console.error("Error processing document:\n"+o.message+"\n\n",JSON.stringify(n))}}(e,r.schema);if(!o)return!1;var i=r.tr.replaceWith(0,r.doc.nodeSize-2,o.content);return t||i.selectionSet||i.setSelection(M.Selection.atStart(i.doc)),t&&(i=i.scrollIntoView()),n||i.setMeta("addToHistory",!1),this.editorView.dispatch(i),!0},e}(),z=function(){function e(){this.listeners={}}return e.prototype.on=function(e,t){this.listeners[e]||(this.listeners[e]=new Set),this.listeners[e].add(t)},e.prototype.off=function(e,t){this.listeners[e]&&this.listeners[e].has(t)&&this.listeners[e].delete(t)},e.prototype.emit=function(e,t){this.listeners[e]&&this.listeners[e].forEach((function(e){return e(t)}))},e.prototype.destroy=function(){this.listeners={}},e}(),U=function(){function e(){this.dispatcher=new z}return e.prototype.publish=function(e,t){this.dispatcher.emit(e.name,t)},e.prototype.subscribe=function(e,t){this.dispatcher.on(e.name,t)},e.prototype.unsubscribe=function(e,t){this.dispatcher.off(e.name,t)},e}(),H=function(){function e(){this.shouldUpdatePortals=!0,this.portals=new Map,this.pendingUpdatedProps=new Map,this.nodeViewListeners=new Map}return e.prototype.render=function(e,t){this.portals.set(t,Object(i.createPortal)(e,t)),this.shouldUpdatePortals=!0},e.prototype.update=function(e,t){this.pendingUpdatedProps.set(e,t)},e.prototype.remove=function(e){this.portals.delete(e),this.shouldUpdatePortals=!0},e.prototype.flush=function(){var e=this;Array.from(this.pendingUpdatedProps.entries()).map((function(t){var n=t[0],r=t[1],o=e.nodeViewListeners.get(n);o&&o.forEach((function(e){return e(r.props)})),e.pendingUpdatedProps.delete(n)})),this.portalRendererCallback&&this.shouldUpdatePortals&&(this.portalRendererCallback(this.portals),this.shouldUpdatePortals=!1)},e.prototype.subscribe=function(e,t){var n,r=null!==(n=this.nodeViewListeners.get(e))&&void 0!==n?n:new Set;r.add(t),this.nodeViewListeners.set(e,r)},e.prototype.unsubscribe=function(e,t){var n=this.nodeViewListeners.get(e);n&&(n.has(t)&&n.delete(t),0===n.size?this.nodeViewListeners.delete(e):this.nodeViewListeners.set(e,n))},e.prototype.addPortalRendererCallback=function(e){this.portalRendererCallback=e,e(this.portals)},e}();function W(){return void 0===_&&(_="undefined"!==typeof window&&"performance"in window&&["measure","clearMeasures","clearMarks","getEntriesByName","getEntriesByType","now"].every((function(e){return!!performance[e]}))),_}var K,$=new Map;function Q(e,t){if(W()){performance.mark(e+"::end");var n=t?$.get(e):void 0;try{performance.measure(e,e+"::start",e+"::end")}catch(o){}finally{if(t){var r=performance.getEntriesByName(e).pop();r?t(r.duration,r.startTime):n&&t(performance.now()-n,n)}!function(e){if(!W())return;$.delete(e),performance.clearMarks(e+"::start"),performance.clearMarks(e+"::end"),performance.clearMeasures(e)}(e)}}}!function(e){e.debug="debug",e.info="info",e.warn="warn",e.error="error"}(K||(K={}));var G=function(){function e(e){var t=this;void 0===e&&(e={}),this.shouldTrack=!1,this.logToConsole=!1,this.logLevel=K.error,this.logs={},this.perf={debug:function(e,n){t.hasLevel(K.debug)&&t.measure(e,n,K.debug)},info:function(e,n){t.hasLevel(K.info)&&t.measure(e,n,K.info)},warn:function(e,n){t.hasLevel(K.warn)&&t.measure(e,n,K.warn)},error:function(e,n){t.hasLevel(K.error)&&t.measure(e,n,K.error)},stop:function(e,n,r){void 0===r&&(r=0),t.stopMeasure(e,n,r)}};var n=e.shouldTrack,r=e.logToConsole,o=e.logLevel;n&&(this.shouldTrack=n),r&&(this.logToConsole=r),o&&("debug"===o?this.logLevel=K.debug:"info"===o?this.logLevel=K.info:"warn"===o?this.logLevel=K.warn:"error"===o&&(this.logLevel=K.error))}return e.prototype.hasLevel=function(e){var t=this.logLevel;switch(e){case"debug":return"debug"===t;case"info":return"debug"===t||"info"===t;case"warn":return"debug"===t||"info"===t||"warn"===t;case"error":return"debug"===t||"info"===t||"warn"===t||"error"===t;default:return!1}},e.prototype.startLog=function(e,t,n){var r;e in this.logs?t in this.logs[e]?this.logs[e][t].pending=!0:this.logs[e][t]={logs:[],level:n,pending:!0}:this.logs[e]=((r={})[t]={logs:[],level:n,pending:!0},r)},e.prototype.endLog=function(e,t,n){if(!(e in this.logs))throw Error("Stopping measurement for non-existent namespace: "+e);if(!(t in this.logs[e]))throw Error("Stopping measurement for namespace '"+e+"' with non-existent method: "+t);this.logs[e][t].pending=!1,this.logs[e][t].logs.push(n);var r=this.logs[e][t].level;"debug"===r?console.debug(n):"info"===r?console.info(n):"warn"===r?console.warn(n):"error"===r&&console.error(n)},e.prototype.getName=function(e,t){return e+"::"+t},e.prototype.measure=function(e,t,n){var r;this.shouldTrack&&this.logToConsole&&(this.startLog(e,t,n),r=this.getName(e,t),W()&&(performance.mark(r+"::start"),$.set(r,performance.now())))},e.prototype.stopMeasure=function(e,t,n){var r=this;void 0===n&&(n=0),Q(this.getName(e,t),(function(o,i){if(r.shouldTrack&&r.logToConsole&&n<=o){var a=r.getName(e,t)+" took "+Math.round(o)+" ms";r.endLog(e,t,a)}}))},e}(),J=Object(r.createContext)({portalProvider:new H,viewProvider:new L,pluginsProvider:new U,analyticsProvider:new G}),Y=function(){return Object(r.useContext)(J)},X={content:"block+"},Z={content:"paragraph+",group:"block",defining:!0,selectable:!1,attrs:{class:{default:""}},parseDOM:[{tag:"blockquote"}],toDOM:function(){return["blockquote",0]}},ee={content:"paragraph+",group:"block",defining:!0,selectable:!1,attrs:{class:{default:"pm-blockquote"}},parseDOM:[{tag:"blockquote"}],toDOM:function(e){return["blockquote",e.attrs,0]}},te={content:"inline*",group:"block",selectable:!1,parseDOM:[{tag:"p"}],toDOM:function(){return["p",0]}},ne={group:"inline",toDebugString:function(){return"text_node"}},re={inclusive:!0,group:"fontStyle",parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style=italic"}],toDOM:function(){return["em"]}},oe={inclusive:!0,group:"fontStyle",parseDOM:[{tag:"strong"},{tag:"b",getAttrs:function(e){return"normal"!==e.style.fontWeight&&null}},{tag:"span",getAttrs:function(e){var t=e.style.fontWeight;return"string"===typeof t&&("bold"===t||"bolder"===t||/^(bold(er)?|[5-9]\d{2,})$/.test(t))&&null}}],toDOM:function(){return["strong"]}};function ie(e,t){var n=e.selection,r=n.$from,o=n.$to;if(e.selection instanceof M.NodeSelection&&e.selection.node.isBlock)return!(!r.parentOffset||!Object(j.f)(e.doc,r.pos))&&(t&&t(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.parent.isBlock)return!1;if(t){var i=o.parentOffset==o.parent.content.size,a=e.tr;e.selection instanceof M.TextSelection&&a.deleteSelection();var s=0==r.depth?void 0:r.node(-1).contentMatchAt(r.indexAfter(-1)).defaultType,c=i&&s?[{type:s}]:void 0,u=Object(j.f)(a.doc,a.mapping.map(r.pos),1,c);if(!c&&!u&&s&&Object(j.f)(a.doc,a.mapping.map(r.pos),1,s&&[{type:s}])&&(c=[{type:s}],u=!0),u&&s){a.split(a.mapping.map(r.pos),1,c);var l=!i&&!r.parentOffset&&r.parent.type!=s,p=r.node(-1).canReplace(r.index(-1),r.indexAfter(-1),A.Fragment.from(s.create()));l&&p&&a.setNodeMarkup(a.mapping.map(r.before()),s)}t(a.scrollIntoView())}return!0}function ae(e,t){var n=e.selection,r=n.$from,o=(n.$to,e.schema.nodes.pmBlockquote.createAndFill()),i=r.end();o&&t&&t(e.tr.insert(i+1,o));return!1}var se=function(e){function t(t){var n=e.call(this,t)||this;return n.name=t,n}return B(t,e),t}(M.PluginKey);var ce=new se("basePlugin");function ue(e,t,n){return new M.Plugin({state:{init:function(e,t){return{activeNodes:[],activeMarks:[]}},apply:function(e,n,r,o){if(e.docChanged||e.selectionSet){var i=function(e){if(e.selection.empty){var t=e.selection.$from,n=e.storedMarks;return n?n.map((function(e){return e.type.name})):t.marks().map((function(e){return e.type.name}))}var r=e.selection.$head,o=e.selection.$anchor,i=new Set;return r.marks().forEach((function(e){return i.add(e.type.name)})),o.marks().forEach((function(e){return i.add(e.type.name)})),Array.from(i)}(o);if(!(i.every((function(e){return n.activeMarks.includes(e)}))&&i.length===n.activeMarks.length)){var a=q(q({},n),{activeMarks:i});return t.publish(ce,a),a}}return n}},key:ce,props:{}})}var le=function(e){return{name:"base",pmPlugins:function(){return[{name:"history",plugin:function(){return Object(T.a)()}},{name:"baseKeyMap",plugin:function(){return Object(I.b)(D.a)}},{name:"otherKeyMap",plugin:function(){return Object(I.b)({"Ctrl-Alt-p":ae,"Ctrl-Alt-s":ie})}},{name:"base",plugin:function(e){e.portalProvider;return ue(0,e.pluginsProvider)}}]},nodes:function(){return[{name:"doc",node:X},{name:"paragraph",node:te},{name:"pmBlockquote",node:ee},{name:"text",node:ne}]},marks:function(){return[{name:"em",mark:re},{name:"strong",mark:oe}]}}};var pe,de=function(){function e(e,t,n,r,o,i,a){var s=this;this.handleRef=function(e){e&&s.contentDOM&&!e.contains(s.contentDOM)&&e.appendChild(s.contentDOM)},this.node=e,this.view=t,this.getPos=n,this.pluginsProvider=o,this.portalProvider=r,this.reactComponentProps=i||{},this.reactComponent=a}return e.prototype.init=function(){this.dom=this.createContainerDOM(),this.dom.classList.add(this.node.type.name+"__nodeview-dom"),this.contentDOM=this.createContentDOM(),this.contentDOM&&this.dom.appendChild(this.contentDOM);var e,t,n=(e=this.dom,t=this.portalProvider,function(n){Object(r.useEffect)((function(){return t.subscribe(e,n),function(){t.unsubscribe(e,n)}}),[])});return this.renderReactComponent(this.render(this.createProps(this.node),this.handleRef,n)),this},e.prototype.createProps=function(e){return{componentProps:this.reactComponentProps,attrs:e.attrs}},e.prototype.renderReactComponent=function(e){this.dom&&e&&this.portalProvider.render(e,this.dom)},e.prototype.createContainerDOM=function(){return this.node.isInline?document.createElement("span"):document.createElement("div")},e.prototype.createContentDOM=function(){},e.prototype.render=function(e,t,n){return this.reactComponent?o.a.createElement(this.reactComponent,{ref:t,initialProps:e,useListenProps:n}):null},e.prototype.update=function(e,t){return!!this.dom&&(e.type===this.node.type&&(this.node=e,this.portalProvider.update(this.dom,this.createProps(e)),!0))},e.prototype.setDomAttrs=function(e,t){Object.keys(e.attrs||{}).forEach((function(n){t.setAttribute(n,e.attrs[n])}))},e.prototype.ignoreMutation=function(e){return"selection"!==e.type&&(!this.contentDOM||!this.contentDOM.contains(e.target))},e.prototype.destroy=function(){this.dom&&this.portalProvider.remove(this.dom),this.dom=void 0,this.contentDOM=void 0},e.fromComponent=function(t,n,r,o){return function(i,a,s){return new e(i,a,s,n,r,o,t).init()}},e}(),fe=Object(r.forwardRef)((function(e,t){var n=e.className,i=e.initialProps;(0,e.useListenProps)((function(e){}));var a=Object(r.useState)(q({},i.attrs));a[0],a[1];return o.a.createElement(he,{className:n,ref:t})})),he=l.default.blockquote(pe||(pe=F(["\n  box-sizing: border-box;\n  color: #6a737d;\n  padding: 0 1em;\n  border-left: 4px solid #dfe2e5;\n  margin: 0.2rem 0 0 0;\n  margin-right: 0;\n\n  [dir='rtl'] & {\n    padding-left: 0;\n    padding-right: 4px;\n  }\n\n  &:first-child {\n    margin-top: 0;\n  }\n\n  &::before {\n    content: '';\n  }\n\n  &::after {\n    content: none;\n  }\n\n  & p {\n    display: block;\n  }\n\n  & table,\n  & table:last-child {\n    display: inline-table;\n  }\n"],["\n  box-sizing: border-box;\n  color: #6a737d;\n  padding: 0 1em;\n  border-left: 4px solid #dfe2e5;\n  margin: 0.2rem 0 0 0;\n  margin-right: 0;\n\n  [dir='rtl'] & {\n    padding-left: 0;\n    padding-right: 4px;\n  }\n\n  &:first-child {\n    margin-top: 0;\n  }\n\n  &::before {\n    content: '';\n  }\n\n  &::after {\n    content: none;\n  }\n\n  & p {\n    display: block;\n  }\n\n  & table,\n  & table:last-child {\n    display: inline-table;\n  }\n"]))),me=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return B(t,e),t.prototype.createContentDOM=function(){var e=document.createElement("div");return e.classList.add(this.node.type.name+"__content-dom"),e},t}(de);function ve(e,t,n){return function(r,o,i){return new me(r,o,i,e,t,{options:n},fe).init()}}var ge=new se("blockQuotePlugin");function be(e,t,n){return new M.Plugin({state:{init:function(e,t){return{blockQuoteActive:!1}},apply:function(e,n,r,o){if(e.docChanged||e.selectionSet){var i=!!function(e,t){var n=e.schema.nodes.blockquote;return Object(V.findSelectedNodeOfType)(n)(t||e.selection)||Object(V.findParentNodeOfType)(n)(t||e.selection)}(o,o.selection);if(i!==n.blockQuoteActive){var a=q(q({},n),{blockQuoteActive:i});return t.publish(ge,a),a}}return n}},key:ge,props:{nodeViews:{blockquote:ve(e,t,n)}}})}var ye={mac:!1,ie:!1,ie_version:0,gecko:!1,chrome:!1,chrome_version:0,android:!1,ios:!1,webkit:!1};if("undefined"!==typeof navigator){var we=/Edge\/(\d+)/.exec(navigator.userAgent),xe=/MSIE \d/.test(navigator.userAgent),Ee=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);ye.mac=/Mac/.test(navigator.platform);var ke=ye.ie=!!(xe||Ee||we);ye.ie_version=xe?document.documentMode||6:Ee?+Ee[1]:we?+we[1]:null,ye.gecko=!ke&&/gecko\/\d/i.test(navigator.userAgent),ye.chrome=!ke&&/Chrome\//.test(navigator.userAgent),ye.chrome_version=parseInt((navigator.userAgent.match(/Chrome\/(\d{2})/)||[])[1],10),ye.android=/Android \d/.test(navigator.userAgent),ye.ios=!ke&&/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),ye.webkit=!ke&&!!document.documentElement&&"WebkitAppearance"in document.documentElement.style}Oe("Bold","Mod-b"),Oe("Italic","Mod-i"),Oe("Underline","Mod-u"),Oe("Code","Mod-Shift-m"),Oe("Normal text","Mod-Alt-0"),Oe("Heading 1","Mod-Alt-1");var Pe=Oe("Quote","Ctrl-Alt-b");Oe("Insert new line","Shift-Enter"),Oe("Shift Backspace","Shift-Backspace"),Oe("Split code block","Enter"),Oe("Undo","Mod-z"),Oe("Move up","ArrowUp"),Oe("Move down","ArrowDown"),Oe("Move left","ArrowLeft"),Oe("Move right","ArrowRight"),Oe("Open Help","Mod-/"),Oe("Link","Mod-k"),Oe("Annotate","Mod-Alt-c"),Oe("Submit Content","Mod-Enter"),Oe("Enter","Enter"),Oe("Shift Enter","Shift-Enter"),Oe("Tab","Tab"),Oe("Backspace","Backspace"),Oe("Delete","Delete"),Oe("Space","Space"),Oe("Escape","Escape"),Oe("Next cell","Tab"),Oe("Previous cell","Shift-Tab"),Oe("Table","Shift-Alt-t"),Oe("Cut","Mod-x"),Oe("Copy","Mod-c"),Oe("Paste","Mod-v"),Oe("Paste","Mod-Shift-v"),Oe("Find","Mod-f");function Oe(e,t){return function(e,t,n,r){return{description:e,windows:t,mac:n,common:r}}(e,t.replace(/Mod/i,"Ctrl"),t.replace(/Mod/i,"Cmd"),t)}var Se=function(e){return void 0===e&&(e={}),{name:"blockquote",nodes:function(){return[{name:"blockquote",node:Z}]},pmPlugins:function(){return[{name:"blockquote",plugin:function(t){return be(t.portalProvider,t.pluginsProvider,e)}},{name:"blockquoteKeyMap",plugin:function(){return function(){var e={};return function(e,t,n){var r=n[e],o=t;n[e]&&(o=function(e,n,o){return r(e,n)||t(e,n,o)}),n[e]=o}(Pe.common,(function(e,t){var n=e.selection,r=n.$from,o=(n.$to,e.schema.nodes.blockquote.createAndFill()),i=r.end();return o&&t&&t(e.tr.insert(i+1,o)),!1}),e),Object(I.b)(e)}()}}]},pluginsOptions:{}}},Me=function(){function e(){this.plugins=[]}return e.prototype.add=function(e){return this.plugins.push(e),this},e.prototype.has=function(e){return this.plugins.some((function(t){return Array.isArray(t)?t[0]===e:t===e}))},e.prototype.getEditorPlugins=function(e){var t=this.processEditorPlugins();return this.removeExcludedPlugins(t,e)},e.prototype.processEditorPlugins=function(){var e=new Map;this.plugins.forEach((function(t){if(Array.isArray(t)){var n=t[0],r=t[1];e.set(n,r)}else{if(e.has(t)&&void 0===e.get(t))throw new Error(t+" is already included!");e.set(t,void 0)}}));var t=[];return e.forEach((function(e,n){t.push(n(e))})),t},e.prototype.removeExcludedPlugins=function(e,t){return t?e.filter((function(e){return!e||!t.has(e.name)})):e},e}();var Ce={plugins:["underline","blockquote","quickInsert","typeAhead"],nodes:["doc","paragraph","text","bulletList","orderedList","listItem","heading","blockquote","pmBlockquote","codeBlock"],marks:["link","em","strong","textColor","strike","subsup","underline","code","typeAheadQuery","alignment","breakout","indentation","annotation","unsupportedMark","unsupportedNodeAttribute"]};function Ae(e){return function(t,n){return Ce[e].indexOf(t.name)-Ce[e].indexOf(n.name)}}function Te(e){var t=e.editorConfig,n=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}(e,["editorConfig"]);return t.pmPlugins.sort(Ae("plugins")).map((function(e){return(0,e.plugin)(n)})).filter((function(e){return"undefined"!==typeof e}))}function Ie(e){var t=function(e){var t=Object.keys(e),n=new Set(t.map((function(t){return e[t].group})));return t.forEach((function(t){var r=e[t];r.excludes&&(r.excludes=r.excludes.split(" ").filter((function(e){return n.has(e)})).join(" "))})),e}(e.marks.sort(Ae("marks")).reduce((function(e,t){return e[t.name]=t.mark,e}),{})),n=e.nodes.sort(Ae("nodes")).reduce((function(e,t){return e[t.name]=t.node,e}),{});return new A.Schema({nodes:n,marks:t})}var De,je=function(e){try{e.check()}catch(t){return!1}return!0};!function(e){e[e.selectedInRange=0]="selectedInRange",e[e.selectedInside=1]="selectedInside"}(De||(De={}));var Ve=function(e,t){var n={type:e.type.name,pos:t,nodeSize:e.nodeSize},r=Re(e.content,t);r.length>0&&(n.content=r);var o=Be(e);return o.length>0&&(n.marks=o),n},Re=function(e,t){if(!e||!e.content||!e.content.length)return[];var n=[],r=e.content;if(r[0].isBlock){var o;n=r.map((function(e){return t+=o?o.nodeSize:1,o=e,Ve(e,t)}))}else{var i=Ne(r,t);n=i.inlineNodes,t=i.pos}return n},Ne=function(e,t){return{inlineNodes:e.map((function(e){var n=e.nodeSize,r={type:e.type.name,pos:t,nodeSize:n},o=Be(e);return o.length>0&&(r.marks=o),t+=n,r})),pos:t}},Be=function(e){return e.marks.map((function(e){return e.type.name}))},qe="undefined"!==typeof window?r.useLayoutEffect:r.useEffect;function Fe(e){var t=e.editorProps,n=e.EditorLayoutComponent,i=Y(),a=i.viewProvider,s=i.pluginsProvider,c=i.portalProvider,u=i.analyticsProvider,l=Object(r.useRef)(null),p=Object(r.useState)(!0),d=p[0];p[1];return qe((function(){var e=function(){var e=function(e){var t=e.reduce((function(e,t){return t.pluginsOptions&&Object.keys(t.pluginsOptions).forEach((function(n){e[n]||(e[n]=[]),e[n].push(t.pluginsOptions[n])})),e}),{});return e.reduce((function(e,n){var r,o,i;return n.pmPlugins&&(r=e.pmPlugins).push.apply(r,n.pmPlugins(n.name?t[n.name]:void 0)),n.nodes&&(o=e.nodes).push.apply(o,n.nodes()),n.marks&&(i=e.marks).push.apply(i,n.marks()),e}),{nodes:[],marks:[],pmPlugins:[]})}(function(e,t){var n=new Me;return n.add(le),n.add(Se),n.getEditorPlugins()}()),t=Ie(e),n=Te({schema:t,editorConfig:e,portalProvider:c,pluginsProvider:s});return M.EditorState.create({schema:t,plugins:n})}(),n=l.current;if(n){var r=function(e,t){var n=new S.c({mount:e},t);return Object(C.a)(n),n}(n,function(e){return{state:e,dispatchTransaction:function(e){d&&function(e){var n=a.editorView;if(!n)return;var r=t.shouldTrack;u.perf.warn("EditorView","dispatchTransaction");var o=function(e){var t=[];return(e.steps||[]).forEach((function(n){for(var r=n.to,o=n.from,i=n.slice,a=i&&i.content?i.content.size:0,s=function(n){if(n<=e.doc.content.size){var r=e.doc.resolve(n).node(1);r&&!t.find((function(e){return e===r}))&&t.push(r)}},c=o;c<=r+a;c++)s(c)})),t}(e);if(function(e){return e.every(je)}(o)){var i=n.state;u.perf.info("EditorView","dispatchTransaction state::apply");var s=n.state.apply(e);if(u.perf.stop("EditorView","dispatchTransaction state::apply",200),s===i)return void c.flush();u.perf.warn("EditorView","dispatchTransaction updateState"),n.updateState(s),u.perf.stop("EditorView","dispatchTransaction updateState",100),u.perf.debug("EditorView","dispatchTransaction flush"),c.flush(),u.perf.stop("EditorView","dispatchTransaction flush",0),t.onDocumentEdit&&t.onDocumentEdit(n)}else{var l=o.filter((function(e){return!je(e)})).map((function(e){return function(e){try{return Ve(e,0)}catch(t){return"Error logging document structure: "+t}}(e)}));r&&(console.error("Invalid nodes in transaction"),console.log(e),console.log(l))}u.perf.stop("EditorView","dispatchTransaction",1e3)}(e)},editable:function(e){return!t.disabled},attributes:{"data-gramm":"false"}}}(e));a.init(r),t.onEditorReady&&t.onEditorReady(a)}}),[]),o.a.createElement(n,null,o.a.createElement("div",{ref:l}))}function _e(){var e=Y().portalProvider,t=Object(r.useReducer)((function(e){return e+1}),0),n=(t[0],t[1]),i=Object(r.useState)(new Map),a=i[0],s=i[1];Object(r.useEffect)((function(){e.addPortalRendererCallback(c)}),[]);var c=function(e){s(e),n()};return o.a.createElement(o.a.Fragment,null,Array.from(a.entries()).map((function(e){e[0];return e[1]})))}var Le,ze,Ue,He=l.default.span(Le||(Le=F(["\n  display: flex;\n"],["\n  display: flex;\n"]))),We=l.default.button(ze||(ze=F(["\n  background: ",";\n  border: ",";\n  cursor: pointer;\n  display: flex;\n  margin-right: 5px;\n  padding: 1px;\n  &:hover {\n    background: #f0f8ff;\n    opacity: 0.6;\n  }\n"],["\n  background: ",";\n  border: ",";\n  cursor: pointer;\n  display: flex;\n  margin-right: 5px;\n  padding: 1px;\n  &:hover {\n    background: #f0f8ff;\n    opacity: 0.6;\n  }\n"])),(function(e){return e.active?"#f0f8ff":"transparent"}),(function(e){return e.active?"1px solid #5a6ecd":"1px solid transparent"})),Ke=Object(l.default)((function(e){var t=e.className,n=e.active,r=e.name,i=e.icon,a=e.onClick;return o.a.createElement(We,{className:t,active:n,name:r,onClick:a},o.a.createElement(He,null,i))}))(Ue||(Ue=F([""],[""])));function $e(e){var t=Y(),n=t.viewProvider,i=t.pluginsProvider,a=Object(r.useState)([]),s=a[0],c=a[1];function u(e){c(e.activeMarks)}return Object(r.useEffect)((function(){return i.subscribe(ce,u),function(){i.unsubscribe(ce,u)}}),[]),o.a.createElement(Je,null,o.a.createElement(Ye,null,o.a.createElement(Ke,{active:s.includes("strong"),name:"bold",icon:o.a.createElement(R.a,{size:24}),onClick:function(){n.execCommand(Object(D.b)(n.editorView.state.schema.marks.strong))}}),o.a.createElement(Ke,{active:s.includes("em"),name:"italics",icon:o.a.createElement(R.b,{size:24}),onClick:function(){n.execCommand(Object(D.b)(n.editorView.state.schema.marks.em))}})))}var Qe,Ge,Je=l.default.div(Qe||(Qe=F(["\n  background: snow;\n  border: 1px solid black;\n  border-bottom: 0;\n  padding: 10px;\n"],["\n  background: snow;\n  border: 1px solid black;\n  border-bottom: 0;\n  padding: 10px;\n"]))),Ye=l.default.div(Ge||(Ge=F(["\n  display: flex;\n"],["\n  display: flex;\n"])));var Xe,Ze,et=l.default.div(Xe||(Xe=F([""],[""]))),tt=l.default.div(Ze||(Ze=F(["\nborder: 1px solid black;\n& > .ProseMirror {\n  min-height: 140px;\n  overflow-wrap: break-word;\n  outline: none;\n  padding: 10px;\n  white-space: pre-wrap;\n}\n\n.pm-blockquote {\n  box-sizing: border-box;\n  color: #2d82e1;\n  padding: 0 1em;\n  border-left: 4px solid #48a1fa;\n  margin: 0.2rem 0 0 0;\n  margin-right: 0;\n}\n"],["\nborder: 1px solid black;\n& > .ProseMirror {\n  min-height: 140px;\n  overflow-wrap: break-word;\n  outline: none;\n  padding: 10px;\n  white-space: pre-wrap;\n}\n\n.pm-blockquote {\n  box-sizing: border-box;\n  color: #2d82e1;\n  padding: 0 1em;\n  border-left: 4px solid #48a1fa;\n  margin: 0.2rem 0 0 0;\n  margin-right: 0;\n}\n"]))),nt={"full-page":function(e){var t=e.className,n=e.children;return o.a.createElement(et,{className:t},o.a.createElement($e,null),o.a.createElement(tt,null,n))}};function rt(e){var t=e.appearance,n=void 0===t?"full-page":t,i=Object(r.useMemo)((function(){return new L}),[]),a=Object(r.useMemo)((function(){return new H}),[]),s=Object(r.useMemo)((function(){return new U}),[]),c=Object(r.useMemo)((function(){return new G(e.analytics)}),[]),u=Object(r.useMemo)((function(){return nt[n]}),[n]);return o.a.createElement(J.Provider,{value:{viewProvider:i,portalProvider:a,pluginsProvider:s,analyticsProvider:c}},o.a.createElement(Fe,{editorProps:e,EditorLayoutComponent:u}),o.a.createElement(_e,null))}function ot(){var e=Object(c.a)(["\n"]);return ot=function(){return e},e}function it(e){var t=e.className,n=e.children;return r.createElement(at,{className:t},r.createElement("header",null,r.createElement("h1",null,r.createElement("a",{href:"https://teemukoivisto.github.io/prosemirror-react-typescript-example/"},"ProseMirror React Typescript Example")),r.createElement("p",null,"Demo application to show how to combine ProseMirror with React"),r.createElement("p",null,r.createElement("a",{href:"https://github.com/TeemuKoivisto/prosemirror-react-typescript-example"},"Github repo"))),r.createElement("div",null,r.createElement("ul",null,r.createElement("li",null,r.createElement("b",null,"Ctrl + alt + b"),": New blockquote"),r.createElement("li",null,r.createElement("b",null,"Ctrl + alt + p"),": New ProseMirror-managed blockquote"),r.createElement("li",null,r.createElement("strong",null,"Enter (Ctrl + alt + s")," also for full): Split current block"),r.createElement("li",null,r.createElement("b",null,"/"),": Quick insert (Atlassian editor only)")),n))}rt.displayName="FullEditor";var at=l.default.div(ot());function st(){var e=Object(c.a)(["\n"]);return st=function(){return e},e}var ct=function e(){var t=this;if(Object(k.a)(this,e),this.viewProvider=void 0,this.currentEditorState=void 0,this.STORAGE_KEY="full-editor-state",this.setEditorView=function(e){t.viewProvider=e,t.currentEditorState&&e.replaceState(t.currentEditorState)},this.syncCurrentEditorState=function(){var e=t.viewProvider.stateToJSON();localStorage.setItem(t.STORAGE_KEY,JSON.stringify(e))},"undefined"!==typeof window){var n=localStorage.getItem(this.STORAGE_KEY);if(n&&null!==n&&n.length>0){var r=JSON.parse(n);this.currentEditorState=r}}};function ut(e){var t=e.className,n=Object(r.useMemo)((function(){return new ct}),[]),i=Object(r.useMemo)((function(){return O()(n.syncCurrentEditorState,500)}),[]);return o.a.createElement(lt,{className:t},o.a.createElement(it,null,o.a.createElement(rt,{analytics:{shouldTrack:!0,logLevel:"debug",logToConsole:!0},onDocumentEdit:function(){i()},onEditorReady:function(e){n.setEditorView(e)}})))}var lt=l.default.div(st()),pt=n(25),dt=n(7),ft=n(185),ht=n(5),mt=n(198),vt=n(133),gt=n(186),bt=n(126),yt=n.n(bt),wt=function(e,t){return(wt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function xt(e,t){function n(){this.constructor=e}wt(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var Et=new ht.h({nodes:{doc:{content:"block+"},paragraph:{content:"inline*",group:"block",selectable:!1,parseDOM:[{tag:"p"}],toDOM:function(){return["p",0]}},pmBlockquote:{content:"paragraph+",group:"block",defining:!0,selectable:!1,attrs:{class:{default:"pm-blockquote"}},parseDOM:[{tag:"blockquote"}],toDOM:function(e){return["blockquote",e.attrs,0]}},blockquote:{content:"paragraph+",group:"block",defining:!0,selectable:!1,parseDOM:[{tag:"blockquote"}],toDOM:function(){return["blockquote",0]}},text:{group:"inline"}}});function kt(e,t){var n=e.selection,r=n.$from,o=(n.$to,e.schema.nodes.blockquote.createAndFill()),i=r.end();o&&t&&t(e.tr.insert(i+1,o));return!1}function Pt(e,t){var n=e.selection,r=n.$from,o=(n.$to,e.schema.nodes.pmBlockquote.createAndFill()),i=r.end();o&&t&&t(e.tr.insert(i+1,o));return!1}var Ot=function(){var e=[];return e.push(Object(mt.a)()),e.push(Object(vt.a)(gt.a)),e.push(Object(vt.a)({"Ctrl-Alt-b":kt,"Ctrl-Alt-p":Pt})),e};function St(e,t){void 0===t&&(t={});var n=t.insertAt;if(e&&"undefined"!==typeof document){var r=document.head||document.getElementsByTagName("head")[0],o=document.createElement("style");o.type="text/css","top"===n&&r.firstChild?r.insertBefore(o,r.firstChild):r.appendChild(o),o.styleSheet?o.styleSheet.cssText=e:o.appendChild(document.createTextNode(e))}}St(".blockquote {\n  box-sizing: border-box;\n  color: #6a737d;\n  padding: 0 1em;\n  border-left: 4px solid #dfe2e5;\n  margin: 0.2rem 0 0 0;\n  margin-right: 0; }\n");var Mt=function(e){function t(t){var n=e.call(this,t)||this;return n.hole=Object(pt.createRef)(),n}return xt(t,e),t.prototype.append=function(e){this.hole&&this.hole.current.appendChild(e)},t.prototype.render=function(){return Object(pt.createElement)("blockquote",{ref:this.hole,className:"blockquote"})},t}(pt.Component),Ct=function(){function e(e,t,n,r){var o=this;this.putContentDomInRef=function(){o.ref.current.append(o.contentDOM)},this.attrs=e.attrs,this.node=e,this.view=t,this.getPos=n,this.decorations=r,this.ref=Object(pt.createRef)(),this.dom=document.createElement("span"),this.contentDOM=document.createElement("span"),this.dom.classList.add("node__dom"),this.contentDOM.classList.add("node__content-dom"),yt.a.render(Object(pt.createElement)(Mt,{ref:this.ref}),this.dom,this.putContentDomInRef)}return e.prototype.update=function(e){return!0},e.prototype.destroy=function(){yt.a.unmountComponentAtNode(this.dom)},e}(),At={blockquote:function(e,t,n,r){return new Ct(e,t,n,r)}};St("#minimal-editor {\n  border: 1px solid black; }\n  #minimal-editor > .ProseMirror {\n    min-height: 140px;\n    overflow-wrap: break-word;\n    outline: none;\n    padding: 10px;\n    white-space: pre-wrap; }\n  #minimal-editor .pm-blockquote {\n    box-sizing: border-box;\n    color: #2d82e1;\n    padding: 0 1em;\n    border-left: 4px solid #48a1fa;\n    margin: 0.2rem 0 0 0;\n    margin-right: 0; }\n");var Tt=function(e){function t(t){var n=e.call(this,t)||this;return n.createEditorView=function(e){null!=e&&(n.editorView=new ft.a(e,{nodeViews:At,state:n.editorState}))},n.editorState=dt.b.create({schema:Et,plugins:Ot()}),n.editorRef=Object(pt.createRef)(),n}return xt(t,e),t.prototype.componentDidMount=function(){this.createEditorView(this.editorRef.current),this.forceUpdate()},t.prototype.componentWillUnmount=function(){this.editorView&&this.editorView.destroy()},t.prototype.shouldComponentUpdate=function(){return!1},t.prototype.render=function(){return Object(pt.createElement)("div",{id:"minimal-editor",ref:this.editorRef})},t}(pt.Component);function It(){var e=Object(c.a)(["\n"]);return It=function(){return e},e}function Dt(e){var t=e.className;return r.createElement(jt,{className:t},r.createElement(it,null,r.createElement(Tt,null)))}var jt=l.default.div(It()),Vt=n(195),Rt=n(1),Nt=n(192),Bt=n(199),qt=n(41),Ft=n(127),_t=n(8),Lt=n(3),zt=n(63),Ut=n(196),Ht=n(13),Wt=n.n(Ht),Kt=n(128),$t=n(193),Qt=n(129),Gt=n.n(Qt),Jt=function(e,t){return(Jt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function Yt(e,t){function n(){this.constructor=e}Jt(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var Xt=function(){return(Xt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function Zt(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}function en(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(t){i(t)}}function s(e){try{c(r.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))}function tn(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(s){i=[6,s],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}function nn(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],a=0,s=i.length;a<s;a++,o++)r[o]=i[a];return r}function rn(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var on,an=function(){function e(){this.listeners={}}return e.prototype.on=function(e,t){this.listeners[e]||(this.listeners[e]=new Set),this.listeners[e].add(t)},e.prototype.off=function(e,t){this.listeners[e]&&this.listeners[e].has(t)&&this.listeners[e].delete(t)},e.prototype.emit=function(e,t){this.listeners[e]&&this.listeners[e].forEach((function(e){return e(t)}))},e.prototype.destroy=function(){this.listeners={}},e}();function sn(){return void 0===on&&(on="undefined"!==typeof window&&"performance"in window&&["measure","clearMeasures","clearMarks","getEntriesByName","getEntriesByType","now"].every((function(e){return!!performance[e]}))),on}var cn=new Map;function un(e){sn()&&(performance.mark(e+"::start"),cn.set(e,performance.now()))}function ln(e,t){if(sn()){performance.mark(e+"::end");var n=t?cn.get(e):void 0;try{performance.measure(e,e+"::start",e+"::end")}catch(o){}finally{if(t){var r=performance.getEntriesByName(e).pop();r?t(r.duration,r.startTime):n&&t(performance.now()-n,n)}!function(e){if(!sn())return;cn.delete(e),performance.clearMarks(e+"::start"),performance.clearMarks(e+"::end"),performance.clearMeasures(e)}(e)}}}var pn,dn=function(e){try{e.check()}catch(t){return!1}return!0};!function(e){e[e.selectedInRange=0]="selectedInRange",e[e.selectedInside=1]="selectedInside"}(pn||(pn={}));var fn=function(e,t){var n={type:e.type.name,pos:t,nodeSize:e.nodeSize},r=hn(e.content,t);r.length>0&&(n.content=r);var o=vn(e);return o.length>0&&(n.marks=o),n},hn=function(e,t){if(!e||!e.content||!e.content.length)return[];var n=[],r=e.content;if(r[0].isBlock){var o;n=r.map((function(e){return t+=o?o.nodeSize:1,o=e,fn(e,t)}))}else{var i=mn(r,t);n=i.inlineNodes,t=i.pos}return n},mn=function(e,t){return{inlineNodes:e.map((function(e){var n=e.nodeSize,r={type:e.type.name,pos:t,nodeSize:n},o=vn(e);return o.length>0&&(r.marks=o),t+=n,r})),pos:t}},vn=function(e){return e.marks.map((function(e){return e.type.name}))},gn={plugins:["underline","blockquote","quickInsert","typeAhead"],nodes:["doc","paragraph","text","bulletList","orderedList","listItem","heading","blockquote","codeBlock"],marks:["link","em","strong","textColor","strike","subsup","underline","code","typeAheadQuery","alignment","breakout","indentation","annotation","unsupportedMark","unsupportedNodeAttribute"]};function bn(e){return function(t,n){return gn[e].indexOf(t.name)-gn[e].indexOf(n.name)}}function yn(e){var t=e.reduce((function(e,t){return t.pluginsOptions&&Object.keys(t.pluginsOptions).forEach((function(n){e[n]||(e[n]=[]),e[n].push(t.pluginsOptions[n])})),e}),{});return e.reduce((function(e,n){var r,o,i;return n.pmPlugins&&(r=e.pmPlugins).push.apply(r,n.pmPlugins(n.name?t[n.name]:void 0)),n.nodes&&(o=e.nodes).push.apply(o,n.nodes()),n.marks&&(i=e.marks).push.apply(i,n.marks()),n.contentComponent&&e.contentComponents.push(n.contentComponent),n.primaryToolbarComponent&&e.primaryToolbarComponents.push(n.primaryToolbarComponent),e}),{nodes:[],marks:[],pmPlugins:[],contentComponents:[],primaryToolbarComponents:[]})}function wn(e){var t=e.editorConfig,n=Zt(e,["editorConfig"]);return t.pmPlugins.sort(bn("plugins")).map((function(e){return(0,e.plugin)(n)})).filter((function(e){return"undefined"!==typeof e}))}var xn={content:"block+"},En={content:"paragraph+",group:"block",defining:!0,selectable:!1,parseDOM:[{tag:"blockquote"}],toDOM:function(){return["blockquote",0]}},kn={content:"inline*",group:"block",selectable:!1,parseDOM:[{tag:"p"}],toDOM:function(){return["p",0]}},Pn={group:"inline",toDebugString:function(){return"text_node"}};function On(e,t){var n=e.selection,r=n.$from,o=n.$to;if(e.selection instanceof Rt.NodeSelection&&e.selection.node.isBlock)return!(!r.parentOffset||!Object(_t.f)(e.doc,r.pos))&&(t&&t(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.parent.isBlock)return!1;if(t){var i=o.parentOffset==o.parent.content.size,a=e.tr;e.selection instanceof Rt.TextSelection&&a.deleteSelection();var s=0==r.depth?void 0:r.node(-1).contentMatchAt(r.indexAfter(-1)).defaultType,c=i&&s?[{type:s}]:void 0,u=Object(_t.f)(a.doc,a.mapping.map(r.pos),1,c);if(!c&&!u&&s&&Object(_t.f)(a.doc,a.mapping.map(r.pos),1,s&&[{type:s}])&&(c=[{type:s}],u=!0),u&&s){a.split(a.mapping.map(r.pos),1,c);var l=!i&&!r.parentOffset&&r.parent.type!=s,p=r.node(-1).canReplace(r.index(-1),r.indexAfter(-1),Lt.Fragment.from(s.create()));l&&p&&a.setNodeMarkup(a.mapping.map(r.before()),s)}t(a.scrollIntoView())}return!0}function Sn(e,t){var n=e.selection,r=n.$from,o=n.$to;if(r.parent.inlineContent||o.parent.inlineContent)return!1;var i=r.parent.contentMatchAt(o.indexAfter()).defaultType;if(!i||!i.isTextblock)return!1;var a=i.createAndFill();if(t&&a){var s=(!r.parentOffset&&o.index()<o.parent.childCount?r:o).pos,c=e.tr.insert(s,a);c.setSelection(Rt.TextSelection.create(c.doc,s+1)),t(c.scrollIntoView())}return!0}var Mn,Cn=function(e){return{name:"base",pmPlugins:function(){return[{name:"history",plugin:function(){return Object(Bt.a)()}},{name:"baseKeyMap",plugin:function(){return Object(qt.b)(Ft.a)}},{name:"otherKeyMap",plugin:function(){return Object(qt.b)({"Ctrl-Alt-p":Sn,"Ctrl-Alt-s":On})}}]},nodes:function(){return[{name:"doc",node:xn},{name:"paragraph",node:kn},{name:"text",node:Pn}]}}},An=function(){function e(e,t,n,r,o,i,a,s,c){var u=this;void 0===s&&(s=!1),this.handleRef=function(e){return u._handleRef(e)},this.node=e,this.view=t,this.getPos=n,this.portalProviderAPI=r,this.reactComponentProps=i||{},this.reactComponent=a,this.hasContext=s,this._viewShouldUpdate=c,this.eventDispatcher=o}return e.prototype.init=function(){var e=this;this.domRef=this.createDomRef(),this.setDomAttrs(this.node,this.domRef);var t=this.getContentDOM()||{dom:void 0,contentDOM:void 0},n=t.dom,r=t.contentDOM;return this.domRef&&n&&(this.domRef.appendChild(n),this.contentDOM=r||n,this.contentDOMWrapper=n||r),this.domRef.classList.add(this.node.type.name+"View-content-wrap"),this.renderReactComponent((function(){return e.render(e.reactComponentProps,e.handleRef)})),this},e.prototype.renderReactComponent=function(e){this.domRef&&e&&this.portalProviderAPI.render(e,this.domRef,this.hasContext)},e.prototype.createDomRef=function(){return this.node.isInline?document.createElement("span"):document.createElement("div")},e.prototype.getContentDOM=function(){},e.prototype._handleRef=function(e){var t=this.contentDOMWrapper||this.contentDOM;e&&t&&!e.contains(t)&&e.appendChild(t)},e.prototype.render=function(e,t){return this.reactComponent?o.a.createElement(this.reactComponent,Xt({view:this.view,getPos:this.getPos,node:this.node,forwardRef:t},e)):null},e.prototype.update=function(e,t,n){var r=this;return void 0===n&&(n=function(){return!0}),!(this.node.type!==e.type||!n(this.node,e))&&(this.domRef&&!this.node.sameMarkup(e)&&this.setDomAttrs(e,this.domRef),this.viewShouldUpdate(e)?(this.node=e,this.renderReactComponent((function(){return r.render(r.reactComponentProps,r.handleRef)})),!0):(this.node=e,!0))},e.prototype.viewShouldUpdate=function(e){return!this._viewShouldUpdate||this._viewShouldUpdate(e)},e.prototype.setDomAttrs=function(e,t){Object.keys(e.attrs||{}).forEach((function(n){t.setAttribute(n,e.attrs[n])}))},Object.defineProperty(e.prototype,"dom",{get:function(){return this.domRef},enumerable:!1,configurable:!0}),e.prototype.destroy=function(){this.domRef&&(this.portalProviderAPI.remove(this.domRef),this.domRef=void 0,this.contentDOM=void 0)},e.fromComponent=function(t,n,r,o,i){return function(a,s,c){return new e(a,s,c,n,r,o,t,!1,i).init()}},e}(),Tn=Object(r.forwardRef)((function(e,t){return o.a.createElement(In,{ref:t})})),In=l.default.blockquote(Mn||(Mn=rn(["\n  box-sizing: border-box;\n  color: #6a737d;\n  padding: 0 1em;\n  border-left: 4px solid #dfe2e5;\n  margin: 0.2rem 0 0 0;\n  margin-right: 0;\n\n  [dir='rtl'] & {\n    padding-left: 0;\n    padding-right: 4px;\n  }\n\n  &:first-child {\n    margin-top: 0;\n  }\n\n  &::before {\n    content: '';\n  }\n\n  &::after {\n    content: none;\n  }\n\n  & p {\n    display: block;\n  }\n\n  & table,\n  & table:last-child {\n    display: inline-table;\n  }\n"],["\n  box-sizing: border-box;\n  color: #6a737d;\n  padding: 0 1em;\n  border-left: 4px solid #dfe2e5;\n  margin: 0.2rem 0 0 0;\n  margin-right: 0;\n\n  [dir='rtl'] & {\n    padding-left: 0;\n    padding-right: 4px;\n  }\n\n  &:first-child {\n    margin-top: 0;\n  }\n\n  &::before {\n    content: '';\n  }\n\n  &::after {\n    content: none;\n  }\n\n  & p {\n    display: block;\n  }\n\n  & table,\n  & table:last-child {\n    display: inline-table;\n  }\n"]))),Dn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Yt(t,e),t.prototype.getContentDOM=function(){var e=document.createElement("div");return e.classList.add(this.node.type.name+"-dom-wrapper"),{dom:e}},t.prototype.render=function(e,t){return o.a.createElement(Tn,{ref:t})},t}(An);function jn(e,t,n){return function(r,o,i){return new Dn(r,o,i,e,t,{options:n}).init()}}var Vn=new Rt.PluginKey("blockQuotePlugin");function Rn(e,t,n,r){return new Rt.Plugin({state:{init:function(e,t){return{blockQuoteActive:!1}},apply:function(t,n,r,o){if(t.docChanged||t.selectionSet){var i=!!function(e,t){var n=e.schema.nodes.blockquote;return Object(zt.findSelectedNodeOfType)(n)(t||e.selection)||Object(zt.findParentNodeOfType)(n)(t||e.selection)}(o,o.selection);if(i!==n.blockQuoteActive){var a=Xt(Xt({},n),{blockQuoteActive:i});return e(Vn,a),a}}return n}},key:Vn,props:{nodeViews:{blockquote:jn(t,n,r)}}})}var Nn={mac:!1,ie:!1,ie_version:0,gecko:!1,chrome:!1,chrome_version:0,android:!1,ios:!1,webkit:!1};if("undefined"!==typeof navigator){var Bn=/Edge\/(\d+)/.exec(navigator.userAgent),qn=/MSIE \d/.test(navigator.userAgent),Fn=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);Nn.mac=/Mac/.test(navigator.platform);var _n=Nn.ie=!!(qn||Fn||Bn);Nn.ie_version=qn?document.documentMode||6:Fn?+Fn[1]:Bn?+Bn[1]:null,Nn.gecko=!_n&&/gecko\/\d/i.test(navigator.userAgent),Nn.chrome=!_n&&/Chrome\//.test(navigator.userAgent),Nn.chrome_version=parseInt((navigator.userAgent.match(/Chrome\/(\d{2})/)||[])[1],10),Nn.android=/Android \d/.test(navigator.userAgent),Nn.ios=!_n&&/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),Nn.webkit=!_n&&!!document.documentElement&&"WebkitAppearance"in document.documentElement.style}var Ln=Nn;tr("Bold","Mod-b"),tr("Italic","Mod-i"),tr("Underline","Mod-u"),tr("Code","Mod-Shift-m"),tr("Normal text","Mod-Alt-0"),tr("Heading 1","Mod-Alt-1");var zn=tr("Quote","Ctrl-Alt-b"),Un=tr("Insert new line","Shift-Enter"),Hn=(tr("Shift Backspace","Shift-Backspace"),tr("Split code block","Enter"),tr("Undo","Mod-z"),tr("Move up","ArrowUp")),Wn=tr("Move down","ArrowDown"),Kn=(tr("Move left","ArrowLeft"),tr("Move right","ArrowRight"),tr("Open Help","Mod-/"),tr("Link","Mod-k"),tr("Annotate","Mod-Alt-c"),tr("Submit Content","Mod-Enter"),tr("Enter","Enter")),$n=(tr("Shift Enter","Shift-Enter"),tr("Tab","Tab")),Qn=(tr("Backspace","Backspace"),tr("Delete","Delete"),tr("Space","Space")),Gn=tr("Escape","Escape"),Jn=(tr("Next cell","Tab"),tr("Previous cell","Shift-Tab"),tr("Table","Shift-Alt-t"),tr("Cut","Mod-x"),tr("Copy","Mod-c"),tr("Paste","Mod-v"),tr("Paste","Mod-Shift-v"),tr("Find","Mod-f"),{ARROWLEFT:"\u2190",ARROWRIGHT:"\u2192",ARROWUP:"\u2191",ARROWDOWN:"\u2193"}),Yn=l.default.span(er||(er=rn(["\n  border-radius: 2px;\n  background-color: blue;\n  padding: 0 2px;\n"],["\n  border-radius: 2px;\n  background-color: blue;\n  padding: 0 2px;\n"])));function Xn(e){var t=(Ln.mac?e.mac.replace(/Cmd/i,"\u2318").replace(/Shift/i,"\u21e7").replace(/Ctrl/i,"\u2303").replace(/Alt/i,"\u2325").replace(/Backspace/i,"\u232b").replace(/Enter/i,"\u23ce"):e.windows.replace(/Backspace/i,"\u232b")).split("-"),n=t[t.length-1];return 1===n.length&&(n=n.toUpperCase()),t[t.length-1]=Jn[n.toUpperCase()]||n,t.join(Ln.mac?"":"+")}function Zn(e,t){if(e){var n=Xn(e);return t?t+" "+n:n}}var er;o.a.memo((function(e){var t=e.description,n=e.shortcutOverride,r=e.keymap,i=n||r&&Xn(r);return i||t?o.a.createElement(o.a.Fragment,null,t,i&&t&&"\xa0",i&&o.a.createElement(Yn,null,i)):null}));function tr(e,t){return function(e,t,n,r){return{description:e,windows:t,mac:n,common:r}}(e,t.replace(/Mod/i,"Ctrl"),t.replace(/Mod/i,"Cmd"),t)}function nr(e,t,n){var r=n[e],o=t;n[e]&&(o=function(e,n,o){return r(e,n)||t(e,n,o)}),n[e]=o}function rr(e){var t=e.label,n=void 0===t?"":t;return o.a.createElement("svg",{"aria-label":n,width:40,height:40,fillRule:"evenodd"},o.a.createElement("path",{fill:"#fff",d:"M0 0h40v40H0z"}),o.a.createElement("path",{fill:"#ebecf0",d:"M13 6h26v28H13z"}),o.a.createElement("path",{d:"M9 6h4v28H9a2 2 0 01-2-2V8a2 2 0 012-2z",fill:"#dfe1e6"}),o.a.createElement("g",{fill:"#a5adba"},o.a.createElement("rect",{x:9,y:9,width:2,height:1,rx:.5}),o.a.createElement("rect",{x:16,y:9,width:9,height:1,rx:.5}),o.a.createElement("rect",{x:22,y:21,width:9,height:1,rx:.5}),o.a.createElement("rect",{x:22,y:29,width:9,height:1,rx:.5})),o.a.createElement("g",{fill:"#4c9aff"},o.a.createElement("rect",{x:28,y:25,width:9,height:1,rx:.5}),o.a.createElement("rect",{x:16,y:13,width:13,height:1,rx:.5})),o.a.createElement("g",{fill:"#ff7452"},o.a.createElement("rect",{x:16,y:17,width:13,height:1,rx:.5}),o.a.createElement("rect",{x:19,y:25,width:7,height:1,rx:.5})),o.a.createElement("g",{fill:"#a5adba"},o.a.createElement("rect",{x:9,y:13,width:2,height:1,rx:.5}),o.a.createElement("rect",{x:9,y:17,width:2,height:1,rx:.5}),o.a.createElement("rect",{x:9,y:21,width:2,height:1,rx:.5}),o.a.createElement("rect",{x:9,y:25,width:2,height:1,rx:.5}),o.a.createElement("rect",{x:9,y:29,width:2,height:1,rx:.5})))}var or=function(e){return void 0===e&&(e={}),{name:"blockquote",nodes:function(){return[{name:"blockquote",node:En}]},pmPlugins:function(){return[{name:"blockquote",plugin:function(t){return Rn(t.dispatch,t.portalProviderAPI,t.eventDispatcher,e)}},{name:"blockquoteKeyMap",plugin:function(){return function(){var e={};return nr(zn.common,(function(e,t){var n=e.selection,r=n.$from,o=(n.$to,e.schema.nodes.blockquote.createAndFill()),i=r.end();return o&&t&&t(e.tr.insert(i+1,o)),!1}),e),Object(qt.b)(e)}()}}]},pluginsOptions:{quickInsert:[{id:"blockquote",title:"Quote",description:"Quote some text",priority:1300,keyshortcut:Zn(zn),icon:function(){return o.a.createElement(rr,{label:"Quote"})},action:function(e,t){return e(t.schema.nodes.blockquote.createChecked({},t.schema.nodes.paragraph.createChecked()))}}]}}},ir=new Rt.PluginKey("quickInsertPluginKey"),ar={threshold:.3,keys:[{name:"title",weight:.5},{name:"priority",weight:.3},{name:"keywords",weight:.15},{name:"description",weight:.04},{name:"keyshortcut",weight:.01}]};var sr=function(e,t){return function(n,r){var o=t&&t.disableDefaultItems?[]:e.lazyDefaultItems(),i=e.providedItems;return function(e,t){var n=new Ut.a(t,ar);return""===e?t.slice(0).sort((function(e,t){return(e.priority||Number.POSITIVE_INFINITY)-(t.priority||Number.POSITIVE_INFINITY)})):n.search(e).map((function(e){return e.item}))}(n||"",i?function(e,t){void 0===e&&(e=[]),void 0===t&&(t=function(e){return e});var n=new Set;return e.forEach((function(e){return n.add(t(e))})),e.filter((function(e){var r=t(e);return!!n.has(r)&&(n.delete(r),!0)}))}(nn(o,i),(function(e){return e.title})):o)}},cr=function(e){return{name:"quickInsert",pmPlugins:function(e){return[{name:"quickInsert",plugin:function(t){var n=t.providerFactory,r=t.dispatch;return function(e,t,n){return new Rt.Plugin({key:ir,state:{init:function(){return{isElementBrowserModalOpen:!1,lazyDefaultItems:function(){return function(e){ur.en||(ur.en=e.reduce((function(e,t){return e.concat(t)}),[]));return ur.en}(e||[])}}},apply:function(e,t){var r=e.getMeta(ir);if(r&&Object.keys(r).some((function(e){return t[e]!==r[e]}))){var o=Xt(Xt({},t),r);return n(ir,o),o}return t}},view:function(e){var n=this,r=function(t,r){return en(n,void 0,void 0,(function(){var t,n,o;return tn(this,(function(i){switch(i.label){case 0:if(!r)return[3,5];i.label=1;case 1:return i.trys.push([1,4,,5]),[4,r];case 2:return[4,(t=i.sent()).getItems()];case 3:return n=i.sent(),(a={provider:t,providedItems:n},function(e,t){return t&&t(e.tr.setMeta(ir,a)),!0})(e.state,e.dispatch),[3,5];case 4:return o=i.sent(),console.error("Error getting items from quick insert provider",o),[3,5];case 5:return[2]}var a}))}))};return t.subscribe("quickInsertProvider",r),{destroy:function(){t.unsubscribe("quickInsertProvider",r)}}}})}(e,n,r)}}]},pluginsOptions:{typeAhead:{trigger:"/",headless:e?e.headless:void 0,getItems:function(t,n,r,o){var i=ir.getState(n);return sr(i,e)(t)},selectItem:function(e,t,n){return t.action(n,e)}}}}},ur={};var lr="#FFFFFF",pr="#6B778C",dr="rgba(9, 30, 66, 0.31)",fr={inclusive:!0,group:"searchQuery",parseDOM:[{tag:"span[data-type-ahead-query]"}],toDOM:function(e){return["span",{"data-type-ahead-query":"true","data-trigger":e.attrs.trigger,style:"color: #0052CC"}]},attrs:{trigger:{default:""}}},hr=function(e){function t(t,n){var r=e.call(this,t)||this;return r.listeners={},r.debounce=null,r.notAppliedState={},r.isSubscribed=!1,r.state={},r.handlePluginStateChange=function(e,t,n){return function(o){var i;(r.state[e]!==o||n)&&r.updateState({stateSubset:(i={},i[e]=o,i),pluginName:t})}},r.updateState=function(e){var t=e.stateSubset;e.pluginName;r.notAppliedState=Xt(Xt({},r.notAppliedState),t),r.debounce&&window.clearTimeout(r.debounce),r.debounce=window.setTimeout((function(){r.setState(r.notAppliedState),r.debounce=null,r.notAppliedState={}}),0)},r.onContextUpdate=function(){r.subscribe(r.props)},r.state=r.getPluginsStates(t.plugins,r.getEditorView(t,n)),r}return Yt(t,e),t.prototype.getEditorView=function(e,t){var n=e||this.props,r=t||this.context;return n.editorView||r&&r.editorActions&&r.editorActions._privateGetEditorView()},t.prototype.getEventDispatcher=function(e){return(e||this.props).eventDispatcher||this.context&&this.context.editorActions&&this.context.editorActions._privateGetEventDispatcher()},t.prototype.getPluginsStates=function(e,t){return t&&e?Object.keys(e).reduce((function(n,r){var o=e[r];return o?(n[r]=o.getState(t.state),n):n}),{}):{}},t.prototype.subscribe=function(e){var t=this,n=e.plugins,r=this.getEventDispatcher(e),o=this.getEditorView(e);if(r&&o&&!this.isSubscribed){this.isSubscribed=!0;var i=this.getPluginsStates(n,o);this.setState(i),Object.keys(n).forEach((function(e){var o=n[e];if(o){var a=o.key,s=i[e],c=s&&s.subscribe,u=t.handlePluginStateChange(e,a,c);c?s.subscribe(u):r.on(o.key,u),t.listeners[o.key]={handler:u,pluginKey:o}}}))}},t.prototype.unsubscribe=function(){var e=this,t=this.getEventDispatcher(),n=this.getEditorView();t&&n&&this.isSubscribed&&(Object.keys(this.listeners).forEach((function(r){var o=e.listeners[r].pluginKey.getState(n.state);o&&o.unsubscribe?o.unsubscribe(e.listeners[r].handler):t.off(r,e.listeners[r].handler)})),this.listeners=[])},t.prototype.subscribeToContextUpdates=function(e){e&&e.editorActions&&e.editorActions._privateSubscribe(this.onContextUpdate)},t.prototype.unsubscribeFromContextUpdates=function(e){e&&e.editorActions&&e.editorActions._privateUnsubscribe(this.onContextUpdate)},t.prototype.componentDidMount=function(){this.subscribe(this.props),this.subscribeToContextUpdates(this.context)},t.prototype.UNSAFE_componentWillReceiveProps=function(e){this.isSubscribed||this.subscribe(e)},t.prototype.componentWillUnmount=function(){this.debounce&&window.clearTimeout(this.debounce),this.unsubscribeFromContextUpdates(this.context),this.unsubscribe()},t.prototype.render=function(){return(0,this.props.render)(this.state)},t.displayName="WithPluginState",t.contextTypes={editorActions:Wt.a.object,editorConfig:Wt.a.object},t}(o.a.Component);function mr(e,t,n){return void 0===n&&(n=!1),function(e,t){void 0===t&&(t=!1);var n=e.handler;return e.handler=function(e,r,o,i){var a=t?vr(e,o,i):gr(e,o,i);if(!e.selection.$from.parent.type.spec.code&&e.selection instanceof Rt.TextSelection&&!a)return n(e,r,o,i)},e}(new Kt.a(e,t),n)}var vr=function(e,t,n){var r=e.doc,o=e.schema.marks,i=!1,a=function(e){return e.type===o.code||e.type===o.link||e.type===o.typeAheadQuery};return r.nodesBetween(t,n,(function(e){i=i||e.marks.filter(a).length>0})),i},gr=function(e,t,n){var r=e.doc,o=e.schema.marks,i=!1,a=function(e){return e.type===o.code};return r.nodesBetween(t,n,(function(e){i=i||e.marks.filter(a).length>0})),i};function br(e,t){if(!function(e,t){return Object(Ft.b)(e)(t)}(e,t))return!1;var n=t.selection,r=n.empty,o=n.$cursor,i=n.ranges;if(r&&!o)return!1;var a=function(t){return function(e,t){return!t.type.excludes(e)&&!e.excludes(t.type)}(e,t)};return!(t.tr.storedMarks&&!t.tr.storedMarks.every(a))&&(o?o.marks().every(a):i.every((function(e){var n=e.$from,r=e.$to,o=0!==n.depth||t.doc.marks.every(a);return t.doc.nodesBetween(n.pos,r.pos,(function(e){o=o&&e.marks.every(a)})),o})))}var yr=new Rt.PluginKey("typeAheadPlugin");function wr(e){var t=e.doc,n=e.schema.marks.typeAheadQuery,r=e.selection;return function(e,t,n,r){var o={start:-1,end:-1};return t.nodesBetween(n,r,(function(t,n){-1===o.start&&e.isInSet(t.marks)&&(o={start:n,end:n+Math.max(t.textContent.length,1)})})),o}(n,t,r.from-1,r.to)}var xr=function(){return function(e,t){var n=wr(e);if(null===n)return!1;var r=n.start,o=n.end,i=e.schema.marks.typeAheadQuery;if(-1===r)return!1;var a=yr.getState(e).typeAheadHandler;return a&&a.dismiss&&a.dismiss(e),t&&t(e.tr.removeMark(r,o,i).removeStoredMark(i)),!0}};var Er="SELECT_PREV",kr="SELECT_NEXT",Pr="SELECT_CURRENT",Or="SET_CURRENT_INDEX",Sr="SET_QUERY",Mr="ITEMS_LIST_UPDATED",Cr=Ln.chrome&&!Ln.android&&Ln.chrome_version>=58,Ar=function(e,t){return void 0===t&&(t={}),function(n,r,o){if(!e)return r;var i,a=e instanceof Lt.Fragment;try{i=e instanceof Lt.Node||a?e:"string"===typeof e?n.schema.text(e):Lt.Node.fromJSON(n.schema,e)}catch(u){return console.error(u),r}if(i.isText)r=r.replaceWith(o,o,i);else if(i.isBlock)r=Object(zt.safeInsert)(function(e,t){if(e.selection.$from.depth>1){if(t.attrs.layout&&"default"!==t.attrs.layout)return t.type.createChecked(Xt(Xt({},t.attrs),{layout:"default"}),t.content,t.marks);var n=e.schema.marks.breakout;if(n&&n.isInSet(t.marks)){var r=n.removeFromSet(t.marks);return t.type.createChecked(t.attrs,t.content,r)}}return t}(n,i),void 0,!0)(r);else if(i.isInline||a){var s=a?i:Lt.Fragment.fromArray([i,n.schema.text(" ")]);if(r=r.replaceWith(o,o,s),Cr){var c=document.getSelection();c&&c.empty()}r=t.selectInlineNode?r.setSelection(Rt.NodeSelection.create(r.doc,o)):r.setSelection(Rt.Selection.near(r.doc.resolve(o+s.size)))}return r}},Tr=function(e){return void 0===e&&(e="selected"),function(t,n){var r=yr.getState(t),o=r.active,i=r.currentIndex,a=r.items,s=r.typeAheadHandler;return!(!o||!s)&&(s.selectItem&&a[i]?Dr(s,a[i],e)(t,n):Vr(t,(function(e,r){return jr(e,r)(t,n)})))}},Ir=function(e){return function(t,n){var r=yr.getState(t),o=r.active,i=r.items,a=r.typeAheadHandler;return!!(o&&a&&a.selectItem&&i[e])&&Dr(a,i[e])(t,n)}},Dr=function(e,t,n){return void 0===n&&(n="selected"),function(r,o){return Vr(r,(function(i,a){var s=e.selectItem(r,t,(function(e,t){void 0===t&&(t={});var n=r.tr;return n=n.setMeta(yr,{action:Pr}).replaceWith(i,a,Lt.Fragment.empty),Ar(e,t)(r,n,i)}),{mode:n});return!1===s?jr(i,a)(r,o):(o&&o(s),!0)}))}},jr=function(e,t){return function(n,r){var o=yr.getState(n),i=o.query,a=o.trigger,s=n.schema.text(a+i);return r&&r(n.tr.replaceWith(e,t,s)),!0}},Vr=function(e,t){var n=wr(e);return!(!n||-1===n.start)&&t(n.start,n.end)};function Rr(e,t,n,r){var o=!1;return t.nodesBetween(n,r,(function(t){!o&&e.isInSet(t.marks)&&(o=!0)})),o}function Nr(e,t){return void 0===e&&(e=!1),void 0===t&&(t=!0),{isAllowed:t,active:!1,prevActiveState:e,query:null,trigger:null,typeAheadHandler:null,currentIndex:0,items:[],itemsLoader:null,queryMarkPos:null,queryStarted:0,upKeyCount:0,downKeyCount:0}}function Br(e,t){return new Rt.Plugin({key:yr,state:{init:function(){return Nr()},apply:function(n,r,o,i){var a=n.getMeta(yr)||{},s=a.action,c=a.params;switch(s){case Or:return function(e){var t=e.dispatch,n=e.pluginState,r=e.params;if(!r)return n;var o=Xt(Xt({},n),{currentIndex:r.currentIndex||0===r.currentIndex?r.currentIndex:n.currentIndex});return t(yr,o),o}({dispatch:e,pluginState:r,tr:n,params:c});case Er:return function(e){var t=e.dispatch,n=e.pluginState,r=n.currentIndex-1,o=Xt(Xt({},n),{currentIndex:r<0?n.items.length-1:r,upKeyCount:++n.upKeyCount});return t(yr,o),o}({dispatch:e,pluginState:r,tr:n});case kr:return function(e){var t=e.dispatch,n=e.pluginState,r=n.currentIndex+1,o=Xt(Xt({},n),{currentIndex:r>n.items.length-1?0:r,downKeyCount:++n.downKeyCount});return t(yr,o),o}({dispatch:e,pluginState:r,tr:n});case Mr:return function(e){var t=e.dispatch,n=e.pluginState,r=e.tr.getMeta(yr).items,o=Xt(Xt({},n),{items:r,itemsLoader:null,currentIndex:0});return t(yr,o),o}({dispatch:e,pluginState:r,tr:n});case Pr:var u=n.selection,l=u.from,p=u.to,d=i.schema.marks.typeAheadQuery;return n.doc.rangeHasMark(l-1,p,d)?qr({dispatch:e,typeAhead:t,state:i,pluginState:r,tr:n}):function(e){var t=e.dispatch,n=Nr(!1);return t(yr,n),n}({dispatch:e,pluginState:r,tr:n});case Sr:return function(e){var t=e.dispatch,n=e.pluginState,r=e.params;if(!r)return n;var o=Xt(Xt({},n),{query:"string"===typeof r.query?r.query:null});return t(yr,o),o}({dispatch:e,pluginState:r,tr:n,params:c});default:return qr({dispatch:e,typeAhead:t,state:i,pluginState:r,tr:n})}}},view:function(){return{update:function(e){var t=yr.getState(e.state);if(t){var n=e.state,r=e.dispatch,o=n.doc,i=n.selection,a=i.from,s=i.to,c=n.schema.marks.typeAheadQuery;!t.active||t.query||t.trigger?t.active&&0===(t.query||"").indexOf(" ")?xr()(n,r):t.active||!t.prevActiveState||o.rangeHasMark(a-1,s,c)?t.active&&t.itemsLoader&&t.itemsLoader.promise.then((function(t){return function(e){return function(t,n){return n&&n(t.tr.setMeta(yr,{action:Mr,items:e})),!0}}(t)(e.state,r)})):xr()(n,r):xr()(n,r)}}}},appendTransaction:function(e,t,n){var r,o=yr.getState(n);return o.active&&o.query&&o.typeAheadHandler&&o.typeAheadHandler.forceSelect&&o.typeAheadHandler.forceSelect(o.query,o.items)?(Tr()(n,(function(e){return r=e})),r):null},props:{handleDOMEvents:{input:function(e,t){var n,r=e.state,o=e.dispatch,i=r.selection,a=r.schema;return!!(i instanceof Rt.TextSelection&&i.$cursor&&a.marks.typeAheadQuery.isInSet(i.$cursor.marks()))&&((n=t.data,function(e,t){var r=wr(e),o=Rr(e.schema.marks.typeAheadQuery,e.doc,e.selection.from,e.selection.to);return null!==r&&!1!==o&&(t&&t(e.tr.setMeta(yr,{action:Sr,params:{query:n}})),!0)})(r,o),!1)},compositionend:function(e,n){var r,o,i=e.state,a=e.dispatch,s=i.selection,c=i.schema;return!(!(-1!==t.map((function(e){return e.trigger})).indexOf(n.data)&&s instanceof Rt.TextSelection&&s.$cursor)||c.marks.typeAheadQuery.isInSet(s.$cursor.marks()))&&((r=n.data,void 0===(o=!0)&&(o=!1),function(e,t){if(!t)return!1;if(o){var n=e.tr,i=e.selection,a=i.$from.marks();return t(n.setSelection(Rt.TextSelection.create(n.doc,i.$from.pos-1,i.$from.pos)).replaceSelectionWith(e.doc.type.schema.text(r,nn([e.schema.marks.typeAheadQuery.create({trigger:r})],a)),!1)),!0}return t(Object(zt.safeInsert)(e.schema.text(r,[e.schema.marks.typeAheadQuery.create({trigger:r})]))(e.tr)),!0})(i,a),!0)}}}})}function qr(e){var t=e.dispatch,n=e.typeAhead,r=e.pluginState,o=e.state,i=e.tr,a=o.schema.marks.typeAheadQuery,s=o.doc,c=o.selection,u=Rr(a,s,c.from-1,c.to),l=br(a,o);if(!l&&!u){if(r&&r.active===u&&r.isAllowed===l)return r;var p=Nr(r.active,l);return t(yr,p),p}var d=c.$from.nodeBefore;if(!u||!d||!r){var f=Nr(!!r&&r.active);return r&&!r.active&&r.isAllowed||t(yr,f),f}var h=a.isInSet(d.marks||[]);if(!h||!h.attrs.trigger)return r;var m=d.textContent||"",v=h.attrs.trigger.replace(/([^\x00-\xFF]|[\s\n])+/g,"");if(!m.includes(v)){var g=Xt(Xt({},Nr(!0)),{active:!0});return t(yr,g),g}var b=m.replace(/^([^\x00-\xFF]|[\s\n])+/g,"").replace(v,""),y=n.find((function(e){return e.trigger===v})),w=[],x=null,E=null;try{w=y.getItems(b,o,{prevActive:r.prevActiveState,queryChanged:b!==r.query||v!==r.trigger},i,t),y.getHighlight&&(E=y.getHighlight(o)),r.itemsLoader&&r.itemsLoader.cancel(),Array.isArray(w)||(x=function(e){var t=!1;return{promise:new Promise((function(n,r){e.then((function(e){return!t&&n(e)})).catch((function(e){return!t&&r(e)}))})),cancel:function(){t=!0}}}(w),w=r.items)}catch(O){}var k=wr(o),P={isAllowed:l,query:b,trigger:v,typeAheadHandler:y,active:!0,prevActiveState:r.active,items:w,itemsLoader:x,currentIndex:r.currentIndex,queryMarkPos:null!==k?k.start:null,queryStarted:Date.now(),upKeyCount:0,downKeyCount:0,highlight:E};return t(yr,P),P}function Fr(e,t){var n=t.map((function(e){return e.customRegex||e.trigger})).join("|");if(n.length){var r=function(e,t){var n=t.rules;return Object(Kt.b)({rules:n})}(0,{rules:[mr(new RegExp("(^|[.!?\\s\ufffc])("+n+")$"),(function(t,n){var r=yr.getState(t),o=n[3]||n[2];if(!r.isAllowed||!o)return null;var i=e.mark("typeAheadQuery",{trigger:o}),a=t.tr,s=t.selection.$from.marks();return a.replaceSelectionWith(e.text(o,nn([i],s)),!1)}))]});return r.key,r}}function _r(){var e={};return nr(Kn.common,(function(e,t){var n=yr.getState(e);return!(!n||!n.active)&&Tr("enter")(e,t)}),e),nr(Hn.common,(function(e,t){var n=yr.getState(e);return!(!n||!n.active)&&(t&&t(e.tr.setMeta(yr,{action:Er})),!0)}),e),nr(Wn.common,(function(e,t){var n=yr.getState(e);return!(!n||!n.active)&&(t&&t(e.tr.setMeta(yr,{action:kr})),!0)}),e),nr(Un.common,(function(e,t){var n=yr.getState(e);return!(!n||!n.active)&&Tr("shift-enter")(e,t)}),e),nr($n.common,(function(e,t){var n=yr.getState(e);return!(!n||!n.active)&&Tr("tab")(e,t)}),e),nr(Gn.common,(function(e,t){var n=yr.getState(e);return!(!n||!n.active)&&(window.event&&window.event.stopPropagation(),xr()(e,t))}),e),nr(Qn.common,(function(e,t){var n,r=yr.getState(e);return!(!r||!r.active)&&(void 0===(n="space")&&(n="selected"),function(e,t){var r=yr.getState(e),o=r.active,i=r.items,a=r.typeAheadHandler;return!!(o&&a&&a.selectItem)&&(1===i.length?Dr(a,i[0],n)(e,t):(i&&0!==i.length||xr()(e,t),!1))})(e,t)}),e),Object(qt.b)(e)}function Lr(e){return e===document.body}function zr(e){return e&&3===e.nodeType}function Ur(e,t,n,r,o){if(o&&r)return r;if(!n)return"bottom";zr(e)&&(e=e.parentElement);var i=t.getBoundingClientRect(),a=i.height,s=Lr(t)?0:i.top,c=e.getBoundingClientRect(),u=c.top,l=c.height,p=u-(s-t.scrollTop),d=s+a-(u+l);return d>=n||d>=p?"bottom":"top"}function Hr(e,t,n,r,o){if(o&&r)return r;if(!n)return r||"left";zr(e)&&(e=e.parentElement);var i=e.getBoundingClientRect(),a=i.left,s=i.width,c=t.getBoundingClientRect(),u=c.left,l=a-u+s,p=u+c.width-a;return r&&l>n&&p>n?r:p>=n||p>=l&&!r?"left":"right"}var Wr=function(e,t,n){return n<e+t&&(e=n-t-1),Math.max(1,e)};function Kr(e){var t=e.placement,n=e.target,r=e.popup,o=e.offset,i=e.stick,a=e.allowOutOfBounds,s=void 0!==a&&a,c=e.rect,u={};if(!n||!r||!r.offsetParent)return u;zr(n)&&(n=n.parentElement);var l=r.offsetParent,p=l.style,d=0;p&&p.borderBottomWidth&&(d=parseInt(p.borderBottomWidth,10));var f=t[0],h=t[1],m=c||l.getBoundingClientRect(),v=m.top,g=m.left,b=m.right,y=m.height,w=n.getBoundingClientRect(),x=w.top,E=w.left,k=w.right,P=w.height,O=w.width,S=Lr(l),M=function(e){var t=e.placement,n=e.targetTop,r=e.targetHeight,o=e.isPopupParentBody,i=e.popupOffsetParentHeight,a=e.popupOffsetParentTop,s=e.popupOffsetParentScrollTop,c=e.borderBottomWidth,u=e.offset,l={};if("top"===t)l.bottom=Math.ceil(i-(n-a)-(o?0:s)-c+u[1]);else if("start"===t)l.top=Math.ceil(n-a-u[1]+(o?0:s));else{var p=Math.ceil(n-a+r+(o?0:s)-c+u[1]);l.top=p}return l}({placement:f,targetTop:x,isPopupParentBody:S,popupOffsetParentHeight:y,popupOffsetParentTop:v,popupOffsetParentScrollTop:l.scrollTop||0,targetHeight:P,borderBottomWidth:d,offset:o});u=Xt(Xt({},u),M),"top"!==f&&"start"!==f||!i||(u=function(e){var t=e.target,n=e.targetTop,r=e.targetHeight,o=e.popupOffsetParentHeight,i=e.popupOffsetParent,a=e.offset,s=e.position,c=e.placement,u=Qr(t),l=Xt({},s);if(u){var p=u.getBoundingClientRect().top,d=n-p,f=u.scrollTop;if(d<0){var h=n+(f-p)+r+a[1]<f;"top"===c&&(l.bottom=h?o-(d+i.scrollTop+r):d+(l.bottom||0)),"start"===c&&(l.top=h?d+i.scrollTop+r:Math.abs(d)+(l.top||0)+a[1])}}return l}({target:n,targetTop:x,targetHeight:P,popupOffsetParentHeight:y,popupOffsetParent:l,popup:r,offset:o,position:u,placement:f})),"top"!==f&&"start"!==f&&i&&(u=function(e){var t=e.target,n=e.targetTop,r=e.targetHeight,o=e.popup,i=e.offset,a=e.position,s=Qr(t),c=Xt({},a);if(s){var u=n-s.getBoundingClientRect().top,l=r+u;if(s.clientHeight-l<=o.clientHeight+2*i[1]&&u<s.clientHeight){var p=l-s.clientHeight+2*i[1],d=c.top||0;d-=p+o.clientHeight,c.top=d}}return c}({target:n,targetTop:x,targetHeight:P,popup:r,offset:o,position:u}));var C=function(e){var t=e.placement,n=e.targetLeft,r=e.targetRight,o=e.targetWidth,i=e.isPopupParentBody,a=e.popupOffsetParentLeft,s=e.popupOffsetParentRight,c=e.popupOffsetParentScrollLeft,u=e.popupOffsetParentClientWidth,l=e.popupClientWidth,p=e.offset,d=e.allowOutOfBounds,f=void 0!==d&&d,h={};if("left"===t)h.left=Math.ceil(n-a+(i?0:c)+p[0]);else if("center"===t)h.left=Math.ceil(n-a+(i?0:c)+p[0]+o/2-l/2);else if("end"===t){var m=Math.ceil(r-a+(i?0:c)+p[0]);h.left=m}else h.right=Math.ceil(s-r-(i?0:c)+p[0]);return f||(void 0!==h.left&&(h.left=Wr(h.left,l,u)),void 0!==h.right&&(h.right=Wr(h.right,l,u))),h}({placement:h,targetLeft:E,targetRight:k,targetWidth:O,isPopupParentBody:S,popupOffsetParentLeft:g,popupOffsetParentRight:b,popupOffsetParentScrollLeft:l.scrollLeft||0,popupOffsetParentClientWidth:r.offsetParent.clientWidth,popupClientWidth:r.clientWidth||0,offset:o,allowOutOfBounds:s});return u=Xt(Xt({},u),C)}function $r(e){return!(!e||!e.offsetParent)}function Qr(e){var t=e;if(!t)return!1;for(;t=t.parentElement;){var n=window.getComputedStyle(t);if("scroll"===n.overflow||"scroll"===n.overflowX||"scroll"===n.overflowY||t.classList.contains("fabric-editor-popup-scroll-parent"))return t}return!1}var Gr=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={overflowScrollParent:!1,validPosition:!0},t.placement=["",""],t.handleRef=function(e){e&&t.initPopup(e)},t.scheduledUpdatePosition=Object($t.a)((function(e){return t.updatePosition(e)})),t.onResize=function(){return t.scheduledUpdatePosition(t.props)},t}return Yt(t,e),t.prototype.updatePosition=function(e,t){void 0===e&&(e=this.props),void 0===t&&(t=this.state);var n=e.target,r=e.fitHeight,o=e.fitWidth,i=e.boundariesElement,a=e.offset,s=e.onPositionCalculated,c=e.onPlacementChanged,u=e.alignX,l=e.alignY,p=e.stick,d=e.forcePlacement,f=e.allowOutOfBounds,h=e.rect,m=t.popup;if(n&&m){var v=function(e,t,n,r,o,i,a){return[Ur(e,t,r,i,a),Hr(e,t,n,o,a)]}(n,i||document.body,o,r,u,l,d);c&&this.placement.join("")!==v.join("")&&(c(v),this.placement=v);var g=Kr({placement:v,popup:m,target:n,stick:p,offset:a,allowOutOfBounds:f,rect:h});g=s?s(g):g,this.setState({position:g,validPosition:$r(n)})}},t.prototype.cannotSetPopup=function(e,t,n){return!t||document.body.contains(t)&&e.offsetParent&&!e.offsetParent.contains(t)||n&&!n.contains(e.offsetParent)},t.prototype.initPopup=function(e){var t=this,n=this.props.target,r=Qr(e);this.cannotSetPopup(e,n,r)||this.setState({popup:e,overflowScrollParent:r},(function(){return t.scheduledUpdatePosition(t.props)}))},t.prototype.UNSAFE_componentWillReceiveProps=function(e){this.scheduledUpdatePosition(e)},t.prototype.componentDidMount=function(){window.addEventListener("resize",this.onResize);var e=this.props.stick;this.scrollElement=e?Qr(this.props.target):this.props.scrollableElement,this.scrollElement&&this.scrollElement.addEventListener("scroll",this.onResize)},t.prototype.componentWillUnmount=function(){window.removeEventListener("resize",this.onResize),this.scrollElement&&this.scrollElement.removeEventListener("scroll",this.onResize),this.scheduledUpdatePosition.cancel()},t.prototype.renderPopup=function(){var e=this.state.position,t=this.props.shouldRenderPopup;return t&&!t(e||{})?null:o.a.createElement("div",{ref:this.handleRef,style:Xt({position:"absolute",zIndex:this.props.zIndex||10},e),"aria-label":this.props.ariaLabel||"Popup","data-editor-popup":!0},this.props.children)},t.prototype.render=function(){var e=this.props,t=e.target,n=e.mountTo,r=this.state.validPosition;return t&&r?n?Object(i.createPortal)(this.renderPopup(),n):this.renderPopup():null},t.defaultProps={offset:[0,0],allowOutOfBound:!1},t}(o.a.Component),Jr=function(){return 8},Yr=function(){return 11};var Xr,Zr,eo,to,no,ro,oo,io,ao,so,co,uo,lo,po,fo,ho,mo,vo,go,bo,yo,wo,xo,Eo,ko,Po,Oo=function(e){return function(t,n){return n&&n(t.tr.setMeta(yr,{action:Or,params:{currentIndex:e}})),!0}},So="@atlaskit-shared-theme/item",Mo={afterItemSpacing:{compact:8,default:8},beforeItemSpacing:{compact:8,default:8},borderRadius:3,focus:{outline:"#4C9AFF"},height:{compact:0,default:0},width:{compact:"auto",default:"auto"},padding:{default:{bottom:4,left:4,right:4,top:4},compact:{bottom:8,left:8,right:8,top:8}},default:{background:"#FFFFFF",text:"#091E42",secondaryText:pr},selected:{background:"#DEEBFF",text:"#42526E",secondaryText:pr},active:{background:"#DEEBFF",text:"#0052CC",secondaryText:pr},hover:{background:"#EBECF0",text:"#172B4D",secondaryText:pr},disabled:{background:lr,text:pr,secondaryText:pr},dragging:{background:"#F4F5F7",text:"#172B4D",secondaryText:pr}},Co=function(e){return void 0!==e&&null!==e&&""!==e},Ao=function(e,t,n){var r=function(e,t,n){return n?e&&e[n]&&Co(e[n][t])?e:Mo:e&&Co(e[t])?e:Mo}(e,t,n);return n?r[n][t]:r[t]},To=function(e){return function(t){var n=t.theme,r=Ao(n[So],e);return Object(l.css)(Xr||(Xr=rn(["\n    background-color: ",";\n    color: ",";\n    fill: ",";\n    text-decoration: none;\n\n    &:focus {\n      color: ",";\n    }\n  "],["\n    background-color: ",";\n    color: ",";\n    fill: ",";\n    text-decoration: none;\n\n    &:focus {\n      color: ",";\n    }\n  "])),r.background,r.text,r.background,r.text)}},Io=function(e){var t=e.isCompact,n=e.theme,r=e.description,o=t?"compact":"default",i=Ao(n[So],o,"padding"),a=i.bottom,s=void 0===a?0:a,c=i.left,u=void 0===c?0:c,p=i.right,d=void 0===p?0:p,f=i.top,h=void 0===f?0:f,m="function"===typeof h?h():h,v="function"===typeof s?s():s;return m=Math.max(r?m-1:m,0),v=Math.max(v-1,0),Object(l.css)(Zr||(Zr=rn(["\n    padding: ","px ","px ","px ","px;\n  "],["\n    padding: ","px ","px ","px ","px;\n  "])),m,d,v,u)},Do=function(e){var t=e.isCompact,n=e.theme,r=t?"compact":"default",o=Ao(n[So],r,"height");return o?Object(l.css)(eo||(eo=rn(["\n        height: ","px;\n      "],["\n        height: ","px;\n      "])),o):""},jo=function(e){var t=e.isCompact,n=e.theme,r=t?"compact":"default",o=Ao(n[So],r,"width");return o?"number"===typeof o?Object(l.css)(to||(to=rn(["\n        width: ","px;\n      "],["\n        width: ","px;\n      "])),o):Object(l.css)(no||(no=rn(["\n        width: ",";\n      "],["\n        width: ",";\n      "])),o):""},Vo=function(e){var t=e.theme,n=e.isDisabled,r=e.isDragging,o=e.isSelected;if(r)return Object(l.css)(ro||(ro=rn(["\n      "," box-shadow: 0 4px 8px -2px ",",\n        0 0 1px ",";\n    "],["\n      "," box-shadow: 0 4px 8px -2px ",",\n        0 0 1px ",";\n    "])),To("dragging"),dr,dr);var i=Object(l.css)(oo||(oo=rn(["\n    &:focus {\n      box-shadow: 0 0 0 2px\n        "," inset;\n      text-decoration: none;\n    }\n  "],["\n    &:focus {\n      box-shadow: 0 0 0 2px\n        "," inset;\n      text-decoration: none;\n    }\n  "])),Ao(t[So],"outline","focus"));return n?Object(l.css)(io||(io=rn(["\n      cursor: not-allowed;\n      ","\n      ",";\n    "],["\n      cursor: not-allowed;\n      ","\n      ",";\n    "])),To("disabled"),i):o?Object(l.css)(ao||(ao=rn(["\n      "," &:hover {\n        ",";\n      }\n\n      &:active {\n        ",";\n      }\n\n      ",";\n    "],["\n      "," &:hover {\n        ",";\n      }\n\n      &:active {\n        ",";\n      }\n\n      ",";\n    "])),To("selected"),To("hover"),To("active"),i):Object(l.css)(so||(so=rn(["\n    &:hover {\n      ",";\n    }\n\n    &:active {\n      ",";\n    }\n\n    ",";\n  "],["\n    &:hover {\n      ",";\n    }\n\n    &:active {\n      ",";\n    }\n\n    ",";\n  "])),To("hover"),To("active"),i)},Ro=function(e){var t=e.theme;return Object(l.css)(co||(co=rn(["\n  && {\n    align-items: center;\n    border-radius: ","px;\n    box-sizing: border-box;\n    cursor: pointer;\n    display: ",";\n    flex: none;\n    "," "," "," "," "," &:focus {\n      /* focus shadow drawn by getInteractiveStyles */\n\n      outline: none;\n      /* relative position prevents bgcolor of a hovered element from\n      obfuscating focus ring of a focused sibling element */\n      position: relative;\n    }\n  }\n"],["\n  && {\n    align-items: center;\n    border-radius: ","px;\n    box-sizing: border-box;\n    cursor: pointer;\n    display: ",";\n    flex: none;\n    "," "," "," "," "," &:focus {\n      /* focus shadow drawn by getInteractiveStyles */\n\n      outline: none;\n      /* relative position prevents bgcolor of a hovered element from\n      obfuscating focus ring of a focused sibling element */\n      position: relative;\n    }\n  }\n"])),Ao(t[So],"borderRadius"),(function(e){return e.isHidden?"none":"flex"}),To("default"),Io,Vo,Do,jo)},No=(l.default.span(fo||(fo=rn(["\n  display: flex;\n  margin: 0 2px;\n"],["\n  display: flex;\n  margin: 0 2px;\n"]))),l.default.span(ho||(ho=rn(["\n  align-items: center;\n  display: flex;\n  flex-shrink: 0;\n  /* Fix windows line-height issue */\n  padding-bottom: 1px;\n"],["\n  align-items: center;\n  display: flex;\n  flex-shrink: 0;\n  /* Fix windows line-height issue */\n  padding-bottom: 1px;\n"])))),Bo=Object(l.default)(No)(vo||(vo=rn(["\n  ",";\n"],["\n  ",";\n"])),(function(e){var t=e.isCompact,n=e.theme,r=t?"compact":"default",o=Ao(n[So],r,"beforeItemSpacing");return Object(l.css)(mo||(mo=rn(["\n    margin-right: ","px;\n  "],["\n    margin-right: ","px;\n  "])),o)})),qo=Object(l.default)(No)(bo||(bo=rn(["\n  ",";\n"],["\n  ",";\n"])),(function(e){var t=e.isCompact,n=e.theme,r=t?"compact":"default",o=Ao(n[So],r,"afterItemSpacing");return Object(l.css)(go||(go=rn(["\n    margin-left: ","px;\n  "],["\n    margin-left: ","px;\n  "])),o)})),Fo=l.default.span(yo||(yo=rn(["\n  display: flex;\n  flex-direction: column;\n  flex-grow: 1;\n  margin: 0;\n  overflow: hidden;\n\n  &:first-child {\n    margin: 0;\n  }\n"],["\n  display: flex;\n  flex-direction: column;\n  flex-grow: 1;\n  margin: 0;\n  overflow: hidden;\n\n  &:first-child {\n    margin: 0;\n  }\n"]))),_o=l.default.span(wo||(wo=rn(["\n  display: block;\n  flex: 1 1 auto;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: ",";\n  line-height: ",";\n  /* Fix windows line-height issue */\n  padding-bottom: 1px;\n"],["\n  display: block;\n  flex: 1 1 auto;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: ",";\n  line-height: ",";\n  /* Fix windows line-height issue */\n  padding-bottom: 1px;\n"])),(function(e){return e.allowMultiline?"normal":"nowrap"}),16/14),Lo=l.default.span(Po||(Po=rn(["\n  flex: 1 1 auto;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  ",";\n  ",";\n"],["\n  flex: 1 1 auto;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  ",";\n  ",";\n"])),(function(e){var t=e.isDisabled,n=e.theme;return t?Object(l.css)(xo||(xo=rn(["\n      color: ",";\n    "],["\n      color: ",";\n    "])),Ao(n[So],"secondaryText","disabled")):Object(l.css)(Eo||(Eo=rn(["\n    color: ",";\n\n    /* This detects hover on the grandparent. Saves us having to maintain isHovered\n       state in the grandparent. */\n    *:hover > * > & {\n      color: ",";\n    }\n\n    *:active > * > & {\n      color: ",";\n    }\n  "],["\n    color: ",";\n\n    /* This detects hover on the grandparent. Saves us having to maintain isHovered\n       state in the grandparent. */\n    *:hover > * > & {\n      color: ",";\n    }\n\n    *:active > * > & {\n      color: ",";\n    }\n  "])),Ao(n[So],"secondaryText","default"),(function(){return Ao(n[So],"secondaryText","hover")}),(function(){return Ao(n[So],"secondaryText","active")}))}),(function(e){var t=e.isCompact,n=t?10:11,r=t?1.2:14/n;return Object(l.css)(ko||(ko=rn(["\n    font-size: ","px;\n    line-height: ",";\n    /* Fix windows line-height issue */\n    padding-bottom: 1px;\n  "],["\n    font-size: ","px;\n    line-height: ",";\n    /* Fix windows line-height issue */\n    padding-bottom: 1px;\n  "])),n,r)})),zo=function(e){function t(t){var n=e.call(this,t)||this;return n.setRef=function(e){n.ref=e},n.href=function(){return n.props.isDisabled?null:n.props.href},n.rootComponent=function(e){var t=e.href,n=e.linkComponent;return n?Object(l.default)(n)(uo||(uo=rn(["\n      ",";\n    "],["\n      ",";\n    "])),Ro):t?l.default.a(lo||(lo=rn(["\n      ",";\n    "],["\n      ",";\n    "])),Ro):l.default.span(po||(po=rn(["\n    ",";\n  "],["\n    ",";\n  "])),Ro)}({href:n.href(),linkComponent:t.linkComponent}),n.ref=o.a.createRef(),n}return Yt(t,e),t.prototype.componentDidMount=function(){this.ref&&this.props.autoFocus&&this.ref.focus()},t.prototype.render=function(){var e=this,t=this.props,n=t.onClick,r=t.onKeyDown,i=t.isCompact,a=t.isDisabled,s=t.isDragging,c=t.isHidden,u=t.isSelected,l=t.onMouseEnter,p=t.onMouseLeave,d=t.role,f=t.dnd,h=Zt(t,["onClick","onKeyDown","isCompact","isDisabled","isDragging","isHidden","isSelected","onMouseEnter","onMouseLeave","role","dnd"]),m=this.rootComponent,v=f&&f.dragHandleProps||null,g={onClick:function(e){e.defaultPrevented||!a&&n&&n(e)},onMouseDown:function(e){v&&v.onMouseDown&&v.onMouseDown(e),e.preventDefault()},onKeyDown:function(e){s||(v&&v.onKeyDown&&v.onKeyDown(e),e.defaultPrevented||a||r&&r(e))}};return o.a.createElement(m,Xt({"aria-disabled":a,href:this.href(),isCompact:i,isDisabled:a,isDragging:s,isHidden:c,isSelected:u,onMouseEnter:l,onMouseLeave:p,role:d,tabIndex:a||c||this.props.href?null:0,target:this.props.target,title:this.props.title,ref:function(t){e.setRef(t),f&&f.ref&&f.ref(t)}},f&&f.draggableProps,v,g,h),!!this.props.elemBefore&&o.a.createElement(Bo,{isCompact:i},this.props.elemBefore),o.a.createElement(Fo,null,o.a.createElement(_o,{allowMultiline:this.props.shouldAllowMultiline},this.props.children),!!this.props.description&&o.a.createElement(Lo,{isCompact:this.props.isCompact,isDisabled:this.props.isDisabled},this.props.description)),!!this.props.elemAfter&&o.a.createElement(qo,{isCompact:i},this.props.elemAfter))},t.defaultProps={autoFocus:!1,description:"",isCompact:!1,isDisabled:!1,isHidden:!1,role:"button",shouldAllowMultiline:!1},t}(o.a.Component),Uo=l.default.div(Ko||(Ko=rn(["\n  align-items: center;\n  color: ",";\n  display: flex;\n  flex: 1 1 auto;\n  ",";\n"],["\n  align-items: center;\n  color: ",";\n  display: flex;\n  flex: 1 1 auto;\n  ",";\n"])),(function(e){var t=e.theme;return Ao(t[So],"secondaryText","default")}),(function(e){var t=e.isCompact,n=e.theme,r=t?"compact":"default",o=Ao(n[So],r,"padding"),i=o.bottom,a=void 0===i?0:i,s=o.left,c=void 0===s?0:s,u=o.right,p=void 0===u?0:u,d=o.top,f=void 0===d?0:d;return Object(l.css)(Wo||(Wo=rn(["\n    padding: ","px ","px ","px ","px;\n  "],["\n    padding: ","px ","px ","px ","px;\n  "])),f,p,a,c)}));Uo.displayName="ItemGroupTitle";var Ho=l.default.div($o||($o=rn(["\n  flex: 0 0 auto;\n  margin-right: -","px;\n"],["\n  flex: 0 0 auto;\n  margin-right: -","px;\n"])),4);Ho.displayName="ItemGroupTitleAfter";var Wo,Ko,$o,Qo,Go=l.default.div(Qo||(Qo=rn(["\n  flex: 1 1 auto;\n  font-size: ","px;\n  line-height: 1;\n  text-transform: uppercase;\n  /* Required for children to truncate */\n  min-width: 0;\n"],["\n  flex: 1 1 auto;\n  font-size: ","px;\n  line-height: 1;\n  text-transform: uppercase;\n  /* Required for children to truncate */\n  min-width: 0;\n"])),Yr);Go.displayName="ItemGroupTitleText";var Jo,Yo,Xo,Zo,ei=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Yt(t,e),t.prototype.render=function(){var e,t=this.props,n=t.children,r=t.elemAfter,i=t.isCompact,a=t.title,s=t.label,c=t.innerRef,u=t.role,l=null!==(e=null!==s&&void 0!==s?s:a)&&void 0!==e?e:"";return o.a.createElement("div",{"aria-label":l.toString(),role:u,ref:c},a?o.a.createElement(Uo,{"aria-hidden":"true",isCompact:i},o.a.createElement(Go,null,a),r?o.a.createElement(Ho,null,r):null):null,n)},t.defaultProps={role:"group"},t}(o.a.Component),ti=(Object(l.css)(Jo||(Jo=rn(["\n  box-shadow: 0 0 1px rgba(9, 30, 66, 0.31),\n    0 4px 8px -2px rgba(9, 30, 66, 0.25);\n"],["\n  box-shadow: 0 0 1px rgba(9, 30, 66, 0.31),\n    0 4px 8px -2px rgba(9, 30, 66, 0.25);\n"]))),l.default.div(Yo||(Yo=rn(["\n  background-color: rgba(223, 225, 229, 0.5); /* N60 at 50% */\n  color: ",";\n  border-radius: ","px;\n  padding: 4px;\n  line-height: 12px;\n  font-size: 11.67px;\n  align-self: flex-end;\n  @media (max-width: ","px) {\n    display: none;\n  }\n"],["\n  background-color: rgba(223, 225, 229, 0.5); /* N60 at 50% */\n  color: ",";\n  border-radius: ","px;\n  padding: 4px;\n  line-height: 12px;\n  font-size: 11.67px;\n  align-self: flex-end;\n  @media (max-width: ","px) {\n    display: none;\n  }\n"])),"#7A869A",3,0));l.default.div(Xo||(Xo=rn(["\n  &::before {\n    background: ",";\n  }\n"],["\n  &::before {\n    background: ",";\n  }\n"])),(function(e){return e.selectedColor}));function ni(e){var t=e.label,n=void 0===t?"":t;return o.a.createElement("svg",{"aria-label":n,width:40,height:40},o.a.createElement("defs",null,o.a.createElement("linearGradient",{x1:"-26.046%",y1:"100%",x2:"62.626%",y2:"0%",id:"fallback-a"},o.a.createElement("stop",{stopColor:"#B3BAC5",offset:"0%"}),o.a.createElement("stop",{stopColor:"#A5ADBA",offset:"100%"}))),o.a.createElement("g",{fill:"none",fillRule:"evenodd"},o.a.createElement("path",{fill:"#FFF",d:"M0 0h40v40H0z"}),o.a.createElement("path",{fill:"#DFE1E6",d:"M20 16h12v12H20z"}),o.a.createElement("path",{fill:"url(#fallback-a)",d:"M8 16h12v12H8z"}),o.a.createElement("path",{d:"M20 16c-4 .5-6.029 2.5-6.086 6-.057 3.5-2.028 5.5-5.914 6h12V16z",fill:"#A5ADBA"}),o.a.createElement("path",{fill:"#B3BAC5",d:"M17.5 13h5v3h-5z"}),o.a.createElement("path",{fill:"#A5ADBA",d:"M10 13h5v3h-5z"}),o.a.createElement("path",{fill:"#DFE1E6",d:"M25 13h5v3h-5z"})))}var ri={overflow:"hidden"},oi=((Zo={})[So]={padding:{default:{bottom:12,left:12,right:12,top:12}},beforeItemSpacing:{default:function(){return 12}},borderRadius:function(){return 0},hover:{text:"#091E42",secondaryText:pr},selected:{background:"#F4F5F7",text:"#172B4D",secondaryText:pr}},Zo),ii=l.default.div(li||(li=rn(["\n  width: 40px;\n  height: 40px;\n  overflow: hidden;\n  border: 1px solid rgba(223, 225, 229, 0.5); /* N60 at 50% */\n  border-radius: ","px;\n  box-sizing: border-box;\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  div {\n    width: 40px;\n    height: 40px;\n  }\n"],["\n  width: 40px;\n  height: 40px;\n  overflow: hidden;\n  border: 1px solid rgba(223, 225, 229, 0.5); /* N60 at 50% */\n  border-radius: ","px;\n  box-sizing: border-box;\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  div {\n    width: 40px;\n    height: 40px;\n  }\n"])),3),ai=l.default.div(pi||(pi=rn(["\n  display: flex;\n  flex-direction: row;\n  flex-wrap: nowrap;\n  justify-content: space-between;\n  line-height: 1.4;\n"],["\n  display: flex;\n  flex-direction: row;\n  flex-wrap: nowrap;\n  justify-content: space-between;\n  line-height: 1.4;\n"]))),si=l.default.div(di||(di=rn(["\n  white-space: initial;\n  .item-description {\n    font-size: 11.67px;\n    color: ",";\n    margin-top: 4px;\n  }\n"],["\n  white-space: initial;\n  .item-description {\n    font-size: 11.67px;\n    color: ",";\n    margin-top: 4px;\n  }\n"])),pr),ci=l.default.div(fi||(fi=rn(["\n  flex: 0 0 auto;\n"],["\n  flex: 0 0 auto;\n"])));function ui(e){var t=e.items,n=e.currentIndex,r=e.insertByIndex,i=e.setCurrentIndex;return Array.isArray(t)?o.a.createElement(l.ThemeProvider,{theme:oi},o.a.createElement(ei,null,t.map((function(e,t){return o.a.createElement(gi,{key:e.key||e.title,item:e,index:t,currentIndex:n,insertByIndex:r,setCurrentIndex:i})})))):null}var li,pi,di,fi,hi,mi,vi,gi=function(e){function t(t){var n=e.call(this,t)||this;return n.insertByIndex=function(){n.props.insertByIndex(n.props.index)},n.setCurrentIndex=function(){n.isSelected(n.props)||n.props.setCurrentIndex(n.props.index)},n.handleRef=function(e){},n.ref=o.a.createRef(),n}return Yt(t,e),t.prototype.shouldComponentUpdate=function(e){return this.isSelected(this.props)!==this.isSelected(e)},t.prototype.isSelected=function(e){return e.index===e.currentIndex},t.prototype.componentDidUpdate=function(){this.props.index===this.props.currentIndex&&this.ref&&this.ref.current&&function(e){var t=e.offsetTop,n=e.offsetHeight,r=e.offsetParent,o=r,i=o.offsetHeight,a=o.scrollTop,s=t+n>i+a?1:a>t?-1:0;0!==s&&r&&(r.scrollTop=1===s?t+n-i:t)}(this.ref.current)},t.prototype.render=function(){var e,t=this.props.item;return t.render?o.a.createElement("div",{onMouseMove:this.setCurrentIndex,style:ri},o.a.createElement(t.render,{onClick:this.insertByIndex,onHover:this.setCurrentIndex,isSelected:this.isSelected(this.props)})):o.a.createElement(zo,{onClick:this.insertByIndex,onMouseMove:this.setCurrentIndex,elemBefore:o.a.createElement(ii,null,t.icon?t.icon():(e=t.title,o.a.createElement(ni,{label:e}))),isSelected:this.isSelected(this.props),"aria-describedby":t.title,ref:this.handleRef},o.a.createElement(ai,null,o.a.createElement(si,null,o.a.createElement("div",{className:"item-title"},t.title),t.description&&o.a.createElement("div",{className:"item-description"},t.description)),o.a.createElement(ci,null,t.keyshortcut&&o.a.createElement(ti,null,t.keyshortcut))))},t}(o.a.Component),bi=l.default.div(vi||(vi=rn(["\n  background: ",";\n  border-radius: ","px;\n  box-shadow: 0 0 1px ",", 0 4px 8px -2px ",";\n  padding: ","px 0;\n  width: 320px;\n  max-height: 380px; /* ~5.5 visibile items */\n  overflow-y: auto;\n  -ms-overflow-style: -ms-autohiding-scrollbar;\n  position: relative;\n"],["\n  background: ",";\n  border-radius: ","px;\n  box-shadow: 0 0 1px ",", 0 4px 8px -2px ",";\n  padding: ","px 0;\n  width: 320px;\n  max-height: 380px; /* ~5.5 visibile items */\n  overflow-y: auto;\n  -ms-overflow-style: -ms-autohiding-scrollbar;\n  position: relative;\n"])),lr,3,dr,"rgba(9, 30, 66, 0.25)",(hi=Jr,mi=2,function(e){return hi(e)/mi})),yi=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.composing=!1,t.handleKeyPress=function(){t.composing=!0},t.handleMouseMove=function(){t.composing=!1},t.componentDidMount=function(){window.addEventListener("keypress",t.handleKeyPress),window.addEventListener("mousemove",t.handleMouseMove)},t.componentWillUnmount=function(){window.removeEventListener("keypress",t.handleKeyPress),window.removeEventListener("mousemove",t.handleMouseMove)},t.insertByIndex=function(e){Ir(e)(t.props.editorView.state,t.props.editorView.dispatch)},t.setCurrentIndex=function(e){t.composing||e!==t.props.currentIndex&&Oo(e)(t.props.editorView.state,t.props.editorView.dispatch)},t}return Yt(t,e),t.prototype.render=function(){var e=this.props,t=e.active,n=e.items,r=e.isLoading,i=e.anchorElement,a=e.currentIndex,s=e.popupsMountPoint,c=e.popupsBoundariesElement,u=e.popupsScrollableElement,l=e.highlight;return t&&i&&n&&n.length?o.a.createElement(Gr,{zIndex:410,target:i,mountTo:s,boundariesElement:c,scrollableElement:u,fitHeight:300,fitWidth:340,offset:[0,8]},o.a.createElement(bi,{className:"fabric-editor-typeahead"},l,Array.isArray(n)?o.a.createElement(ui,{insertByIndex:this.insertByIndex,setCurrentIndex:this.setCurrentIndex,items:n,currentIndex:a}):!n&&r?"loading...":"no items")):null},t.displayName="TypeAhead",t}(o.a.Component),wi=function(){return{name:"typeAhead",marks:function(){return[{name:"typeAheadQuery",mark:fr}]},pmPlugins:function(e){return void 0===e&&(e=[]),[{name:"typeAhead",plugin:function(t){return Br(t.dispatch,e)}},{name:"typeAheadInputRule",plugin:function(t){return Fr(t.schema,e)}},{name:"typeAheadKeymap",plugin:function(){return _r()}}]},contentComponent:function(e){var t=e.editorView,n=e.popupsMountPoint,r=e.popupsBoundariesElement,i=e.popupsScrollableElement;return o.a.createElement(hr,{plugins:{typeAhead:yr},render:function(e){var a=e.typeAhead,s=void 0===a?Nr():a;if(s.typeAheadHandler&&s.typeAheadHandler.headless)return null;var c=s.queryMarkPos,u=null;if(null!==c)try{u=t.domAtPos(c)}catch(p){return null}var l=u?u.node.childNodes[u.offset]:void 0;return o.a.createElement(yi,{editorView:t,popupsMountPoint:n,popupsBoundariesElement:r,popupsScrollableElement:i,anchorElement:l,active:s.active,isLoading:!!s.itemsLoader,items:s.items,currentIndex:s.currentIndex,highlight:s.highlight})}})}}},xi=function(){function e(){this.plugins=[]}return e.prototype.add=function(e){return this.plugins.push(e),this},e.prototype.has=function(e){return this.plugins.some((function(t){return Array.isArray(t)?t[0]===e:t===e}))},e.prototype.getEditorPlugins=function(e){var t=this.processEditorPlugins();return this.removeExcludedPlugins(t,e)},e.prototype.processEditorPlugins=function(){var e=new Map;this.plugins.forEach((function(t){if(Array.isArray(t)){var n=t[0],r=t[1];e.set(n,r)}else{if(e.has(t)&&void 0===e.get(t))throw new Error(t+" is already included!");e.set(t,void 0)}}));var t=[];return e.forEach((function(e,n){t.push(n(e))})),t},e.prototype.removeExcludedPlugins=function(e,t){return t?e.filter((function(e){return!e||!t.has(e.name)})):e},e}();function Ei(e){var t=function(e){var t=Object.keys(e),n=new Set(t.map((function(t){return e[t].group})));return t.forEach((function(t){var r=e[t];r.excludes&&(r.excludes=r.excludes.split(" ").filter((function(e){return n.has(e)})).join(" "))})),e}(e.marks.sort(bn("marks")).reduce((function(e,t){return e[t.name]=t.mark,e}),{})),n=e.nodes.sort(bn("nodes")).reduce((function(e,t){return e[t.name]=t.node,e}),{});return new Lt.Schema({nodes:n,marks:t})}var ki=function(e){function t(t){var n,r=e.call(this,t)||this;return r.canDispatchTransactions=!0,r.createEditorState=function(e){if(r.editorView)return console.warn("The editor does not support changing the schema dynamically."),r.editorState;r.config=yn(r.getPlugins(e.props.editorProps,void 0));var t=Ei(r.config),n=wn({schema:t,dispatch:r.dispatch,editorConfig:r.config,eventDispatcher:r.eventDispatcher,providerFactory:e.props.providerFactory,portalProviderAPI:r.props.portalProviderAPI});return Rt.EditorState.create({schema:t,plugins:n,doc:void 0,selection:void 0})},r.reconfigureState=function(e){if(r.editorView){r.editorView.dom instanceof HTMLElement&&r.editorView.hasFocus()&&r.editorView.dom.blur(),r.config=yn(r.getPlugins(e.editorProps,r.props.editorProps));var t=r.editorState,n=wn({schema:t.schema,dispatch:r.dispatch,editorConfig:r.config,eventDispatcher:r.eventDispatcher,providerFactory:e.providerFactory,portalProviderAPI:e.portalProviderAPI}),o=t.reconfigure({plugins:n});return r.editorView.updateState(o),r.editorView.update(Xt(Xt({},r.editorView.props),{state:o}))}},r.dispatchTransaction=function(e){if(r.editorView){un("\ud83e\udd89 ReactEditorView::dispatchTransaction");var t=function(e){var t=[];return(e.steps||[]).forEach((function(n){for(var r=n.to,o=n.from,i=n.slice,a=i&&i.content?i.content.size:0,s=function(n){if(n<=e.doc.content.size){var r=e.doc.resolve(n).node(1);r&&!t.find((function(e){return e===r}))&&t.push(r)}},c=o;c<=r+a;c++)s(c)})),t}(e);if(function(e){return e.every(dn)}(t)){var n=r.editorView.state;un("\ud83e\udd89 EditorView::state::apply");var o=r.editorView.state.apply(e);if(ln("\ud83e\udd89 EditorView::state::apply"),o===n)return;un("\ud83e\udd89 EditorView::updateState"),r.editorView.updateState(o),ln("\ud83e\udd89 EditorView::updateState"),r.editorState=o}else{var i=t.filter((function(e){return!dn(e)})).map((function(e){return function(e){try{return fn(e,0)}catch(t){return"Error logging document structure: "+t}}(e)}));console.error("Invalid nodes in transaction"),console.log(e),console.log(i)}ln("\ud83e\udd89 ReactEditorView::dispatchTransaction",(function(){}))}},r.getDirectEditorProps=function(e){return{state:e||r.editorState,dispatchTransaction:function(e){r.canDispatchTransactions&&r.dispatchTransaction(e)},editable:function(e){return!0},attributes:{"data-gramm":"false"}}},r.handleEditorViewRef=function(e){if(!r.editorView&&e){r.createEditorView(e);var t=r.editorView;r.props.onEditorCreated({view:t,config:r.config,eventDispatcher:r.eventDispatcher}),r.props.editorProps.shouldFocus&&(r.focusTimeoutId=function(e){if(e.hasFocus())return;return window.setTimeout((function(){e.focus()}),0)}(t)),r.forceUpdate()}else r.editorView&&!e&&(r.props.onEditorDestroyed({view:r.editorView,config:r.config,eventDispatcher:r.eventDispatcher}),r.editorView.destroy(),r.editorView=void 0)},r.editor=o.a.createElement("div",{className:Ln.chrome?"ua-chrome":Ln.ie?"ua-ie":Ln.gecko?"ua-firefox":"",key:"ProseMirror",ref:r.handleEditorViewRef}),r.eventDispatcher=new an,r.dispatch=(n=r.eventDispatcher,function(e,t){if(!e)throw new Error("event name is required!");var r="string"===typeof e?e:e.key;n.emit(r,t)}),r.editorState=r.createEditorState({props:t,replaceDoc:!0}),r}return Yt(t,e),t.prototype.componentDidMount=function(){this.canDispatchTransactions=!0},t.prototype.componentWillUnmount=function(){if(this.eventDispatcher.destroy(),clearTimeout(this.focusTimeoutId),this.editorView){var e=this.editorView.state;e.plugins.forEach((function(t){var n=t.getState(e);n&&n.destroy&&n.destroy()}))}},t.prototype.getPlugins=function(e,t){return function(e,t){var n=new xi;return n.add(Cn),n.add(or),n.add(cr),n.add(wi),n.getEditorPlugins()}()},t.prototype.createEditorView=function(e){this.editorView=new Nt.a({mount:e},this.getDirectEditorProps()),Object(Vt.a)(this.editorView)},t.prototype.render=function(){return this.props.render?this.props.render({editor:this.editor,view:this.editorView,config:this.config,eventDispatcher:this.eventDispatcher}):this.editor},t}(o.a.Component);var Pi=function(){function e(){this.listeners=[]}return e.from=function(t,n,r){var o=new e;return o._privateRegisterEditor(t,n,r),o},e.prototype._privateGetEditorView=function(){return this.editorView},e.prototype._privateGetEventDispatcher=function(){return this.eventDispatcher},e.prototype._privateRegisterEditor=function(e,t,n){if(this.contentTransformer=n,this.eventDispatcher=t,!this.editorView&&e)this.editorView=e,this.listeners.forEach((function(n){return n(e,t)}));else if(this.editorView!==e)throw new Error("Editor has already been registered! It's not allowed to re-register editor with the new Editor instance.");this.contentTransformer&&(this.contentEncode=this.contentTransformer.encode.bind(this.contentTransformer))},e.prototype._privateUnregisterEditor=function(){this.editorView=void 0,this.contentTransformer=void 0,this.contentEncode=void 0,this.eventDispatcher=void 0},e.prototype._privateSubscribe=function(e){this.editorView&&this.eventDispatcher&&e(this.editorView,this.eventDispatcher),this.listeners.push(e)},e.prototype._privateUnsubscribe=function(e){this.listeners=this.listeners.filter((function(t){return t!==e}))},e.prototype.focus=function(){return!(!this.editorView||this.editorView.hasFocus())&&(this.editorView.focus(),this.editorView.dispatch(this.editorView.state.tr.scrollIntoView()),!0)},e.prototype.blur=function(){return!(!this.editorView||!this.editorView.hasFocus())&&(this.editorView.dom.blur(),!0)},e.prototype.clear=function(){if(!this.editorView)return!1;var e=this.editorView,t=e.state,n=e.state.tr.setSelection(Rt.TextSelection.create(t.doc,0,t.doc.nodeSize-2)).deleteSelection();return e.dispatch(n),!0},e.prototype.appendText=function(e){if(!this.editorView||!e)return!1;var t=this.editorView.state,n=t.doc.lastChild;if(n&&n.type!==t.schema.nodes.paragraph)return!1;var r=t.tr.insertText(e).scrollIntoView();return this.editorView.dispatch(r),!0},e}(),Oi=function(e){function t(t){var n=e.call(this,t)||this;return n.editorActions=t.editorActions||new Pi,n}return Yt(t,e),t.prototype.getChildContext=function(){return{editorActions:this.editorActions}},t.prototype.render=function(){return o.a.Children.only(this.props.children)},t.childContextTypes={editorActions:Wt.a.object},t}(o.a.Component),Si=function(e){function t(){var t=e.call(this)||this;return t.portals=new Map,t.setContext=function(e){t.context=e},t}return Yt(t,e),t.prototype.render=function(e,t,n){void 0===n&&(n=!1),this.portals.set(t,{children:e,hasReactContext:n});var r=e();Object(i.unstable_renderSubtreeIntoContainer)(this.context,r,t)},t.prototype.forceUpdate=function(){var e=this;this.portals.forEach((function(t,n){if(t.hasReactContext){var r=t.children();Object(i.unstable_renderSubtreeIntoContainer)(e.context,r,n)}}))},t.prototype.remove=function(e){this.portals.delete(e);try{Object(i.unmountComponentAtNode)(e)}catch(t){console.warn("Race condition in PortalProviderAPI where PM removed DOM node before React unmounted it")}},t}(an),Mi=function(e){function t(t){var n=e.call(this,t)||this;return n.portalProviderAPI=new Si,n}return Yt(t,e),t.prototype.render=function(){return this.props.render(this.portalProviderAPI)},t.prototype.componentDidUpdate=function(){this.portalProviderAPI.forceUpdate()},t.displayName="PortalProvider",t}(o.a.Component),Ci=function(e){function t(t){var n=e.call(this,t)||this;return n.handleUpdate=function(e){return n.setState({portals:e})},t.portalProviderAPI.setContext(n),t.portalProviderAPI.on("update",n.handleUpdate),n.state={portals:new Map},n}return Yt(t,e),t.prototype.render=function(){var e=this.state.portals;return o.a.createElement(o.a.Fragment,null,Array.from(e.entries()).map((function(e){var t=e[0],n=e[1];return Object(i.createPortal)(n,t)})))},t}(o.a.Component);var Ai=function(){function e(){this.providers=new Map,this.subscribers=new Map}return e.create=function(t){var n=new e;return Object.keys(t).forEach((function(e){n.setProvider(e,t[e])})),n},e.prototype.destroy=function(){this.providers.clear(),this.subscribers.clear()},e.prototype.isEmpty=function(){return!this.providers.size&&!this.subscribers.size},e.prototype.setProvider=function(e,t){this.providers.get(e)!==t&&(void 0!==t?this.providers.set(e,t):this.providers.delete(e),this.notifyUpdated(e,t))},e.prototype.removeProvider=function(e){this.providers.delete(e),this.notifyUpdated(e)},e.prototype.subscribe=function(e,t){var n=this.subscribers.get(e)||[];n.push(t),this.subscribers.set(e,n);var r=this.providers.get(e);r&&t(e,r)},e.prototype.unsubscribe=function(e,t){var n=this.subscribers.get(e);if(n){var r=n.indexOf(t);-1!==r&&n.splice(r,1),0===n.length?this.subscribers.delete(e):this.subscribers.set(e,n)}},e.prototype.unsubscribeAll=function(e){this.subscribers.get(e)&&this.subscribers.delete(e)},e.prototype.hasProvider=function(e){return this.providers.has(e)},e.prototype.notifyUpdated=function(e,t){var n=this.subscribers.get(e);n&&n.forEach((function(n){n(e,t)}))},e}();function Ti(){var e=document.createElement("fakeelement"),t={transition:"transitionend",MozTransition:"transitionend",OTransition:"oTransitionEnd",WebkitTransition:"webkitTransitionEnd"};for(var n in t)if(void 0!==e.style[n])return t[n]}var Ii,Di=l.default.div(Ii||(Ii=rn(["\n  display: flex;\n"],["\n  display: flex;\n"]))),ji=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.transitionEvent=Ti(),t.forceComponentUpdate=function(e){e.propertyName.includes("width")&&t.forceUpdate()},t.removeModeChangeListener=function(e){e&&t.transitionEvent&&e.removeEventListener(t.transitionEvent,t.forceComponentUpdate)},t.addModeChangeListener=function(e){e&&t.transitionEvent&&e.addEventListener(t.transitionEvent,t.forceComponentUpdate)},t}return Yt(t,e),t.prototype.shouldComponentUpdate=function(e){var t=this.props,n=t.editorView,r=t.editorActions,o=t.items,i=t.providerFactory,a=t.eventDispatcher,s=t.popupsMountPoint,c=t.popupsBoundariesElement,u=t.popupsScrollableElement,l=t.containerElement,p=t.disabled;return!(e.editorView===n&&e.editorActions===r&&e.items===o&&e.providerFactory===i&&e.eventDispatcher===a&&e.popupsMountPoint===s&&e.popupsBoundariesElement===c&&e.popupsScrollableElement===u&&e.containerElement===l&&e.disabled===p)},t.prototype.componentDidMount=function(){this.addModeChangeListener(this.props.contentAreaRef)},t.prototype.UNSAFE_componentWillReceiveProps=function(e){this.props.contentAreaRef!==e.contentAreaRef&&(this.removeModeChangeListener(this.props.contentAreaRef),this.addModeChangeListener(e.contentAreaRef))},t.prototype.componentWillUnmount=function(){this.removeModeChangeListener(this.props.contentAreaRef)},t.prototype.render=function(){var e=this.props,t=e.items,n=e.editorView,r=e.editorActions,i=e.eventDispatcher,a=e.providerFactory,s=e.appearance,c=e.popupsMountPoint,u=e.popupsBoundariesElement,l=e.popupsScrollableElement,p=e.containerElement,d=e.disabled;return t&&n?o.a.createElement(Di,null,t.map((function(e,t){var f={key:t},h=e({editorView:n,editorActions:r,eventDispatcher:i,providerFactory:a,appearance:s,popupsMountPoint:c||void 0,popupsBoundariesElement:u,popupsScrollableElement:l,containerElement:p,disabled:d});return h&&o.a.cloneElement(h,f)}))):null},t.displayName="PluginSlot",t}(o.a.Component);function Vi(e){return o.a.createElement(Bi,null,o.a.createElement(qi,null))}var Ri,Ni,Bi=l.default.div(Ri||(Ri=rn(["\n  background: snow;\n  border: 1px solid black;\n  border-bottom: 0;\n  padding: 10px;\n  & > h2 {\n    margin: 0 0 5px 0;\n  }\n"],["\n  background: snow;\n  border: 1px solid black;\n  border-bottom: 0;\n  padding: 10px;\n  & > h2 {\n    margin: 0 0 5px 0;\n  }\n"]))),qi=l.default.div(Ni||(Ni=rn(["\n  display: flex;\n"],["\n  display: flex;\n"])));var Fi,_i,Li,zi=l.default.div(Fi||(Fi=rn(["\n  position: relative;\n"],["\n  position: relative;\n"]))),Ui=l.default.div(_i||(_i=rn(["\n  z-index: 9999;\n"],["\n  z-index: 9999;\n"]))),Hi=l.default.div(Li||(Li=rn(["\n  border: 1px solid black;\n  & > .ProseMirror {\n    min-height: 140px;\n    overflow-wrap: break-word;\n    outline: none;\n    padding: 10px;\n    white-space: pre-wrap;\n  }\n"],["\n  border: 1px solid black;\n  & > .ProseMirror {\n    min-height: 140px;\n    overflow-wrap: break-word;\n    outline: none;\n    padding: 10px;\n    white-space: pre-wrap;\n  }\n"])));var Wi=[{title:"Minimum width extension",icon:function(){return o.a.createElement(Gt.a,{label:"dev"})},action:function(e){return e({type:"extension",attrs:{extensionType:"com.atlassian.confluence.macro.core",extensionKey:"block-layout-eh",text:"Minimum width block extension demo",parameters:{style:{minWidth:400}}}})}},{title:"Lorem ipsum",icon:function(){return o.a.createElement(Gt.a,{label:"dev"})},action:function(e){return e({type:"paragraph",content:[]}).insertText("Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aenean mi nisl, venenatis eget auctor vitae, venenatis quis lorem. Suspendisse maximus tortor vel dui tincidunt cursus. Vestibulum magna nibh, auctor non auctor id, finibus vitae orci. Nulla viverra ipsum et nunc fringilla ultricies. Pellentesque vitae felis molestie justo finibus accumsan. Suspendisse potenti. Nulla facilisi. Integer dignissim quis velit quis elementum. Sed sit amet varius ante. Duis vestibulum porta augue eu laoreet. Morbi id risus et augue sollicitudin aliquam. In et ligula dolor. Nam ac aliquet diam.")}}],Ki={"full-page":function(e){var t=e.className,n=e.editorDOMElement,i=Object(r.useRef)(null),a=Object(r.useRef)(null);return o.a.createElement(zi,{className:t+" popups-wrapper"},o.a.createElement(Ui,{className:"popups",ref:i}),o.a.createElement(Vi,null),o.a.createElement(Hi,{ref:a},o.a.createElement(ji,{editorView:e.editorView,editorActions:e.editorActions,eventDispatcher:e.eventDispatcher,providerFactory:e.providerFactory,appearance:e.appearance,items:e.contentComponents,contentAreaRef:a.current,popupsMountPoint:i.current,disabled:!1,containerElement:null}),n))}};function $i(e){var t=e.appearance,n=void 0===t?"full-page":t,i=(e.quickInsert,Object(r.useState)(new Pi)[0]),a=Object(r.useState)(new Ai)[0],s=Object(r.useState)(Promise.resolve({getItems:function(){return new Promise((function(e){window.setTimeout((function(){return e(Wi)}),1e3)}))}}))[0],c=Object(r.useMemo)((function(){return Ki[n]}),[n]);function u(e){i._privateRegisterEditor(e.view,e.eventDispatcher)}function l(e){i._privateUnregisterEditor()}return Object(r.useEffect)((function(){s&&a.setProvider("quickInsertProvider",s)}),[]),o.a.createElement(Oi,{editorActions:i},o.a.createElement(Mi,{render:function(t){return o.a.createElement(o.a.Fragment,null,o.a.createElement(ki,{editorProps:e,providerFactory:a,portalProviderAPI:t,onEditorCreated:u,onEditorDestroyed:l,render:function(e){var t=e.editor,r=e.view,s=e.eventDispatcher,u=e.config;return o.a.createElement(c,{appearance:n,editorActions:i,editorDOMElement:t,editorView:r,providerFactory:a,eventDispatcher:s,contentComponents:u.contentComponents,primaryToolbarComponents:u.primaryToolbarComponents})}}),o.a.createElement(Ci,{portalProviderAPI:t}))}}))}function Qi(){var e=Object(c.a)(["\n"]);return Qi=function(){return e},e}function Gi(e){var t=e.className;return r.createElement(Ji,{className:t},r.createElement(it,null,r.createElement($i,{performanceTracking:!0})))}var Ji=l.default.div(Qi()),Yi=function(){return r.createElement(a.a,{basename:"/prosemirror-react-typescript-example"},r.createElement(s.d,null,r.createElement(w,{exact:!0,path:"/",component:ut}),r.createElement(w,{exact:!0,path:"/minimal",component:Dt}),r.createElement(w,{exact:!0,path:"/atlassian",component:Gi}),r.createElement(s.a,{to:"/"})))};Object(i.render)(r.createElement(Yi,null),document.getElementById("root"))}},[[200,1,2]]]);
//# sourceMappingURL=main.e2c7a498.chunk.js.map