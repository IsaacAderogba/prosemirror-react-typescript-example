{"version":3,"sources":["components/NavBar.tsx","components/WrappedRoute.tsx","../../full/dist/index.es.js","components/PageHeader.tsx","pages/FrontPage.tsx","../../minimal/dist/index.es.js","pages/MinimalPage.tsx","../../atlassian/dist/index.es.js","pages/AtlassianPage.tsx","routes.tsx","index.tsx"],"names":["NavBar","props","className","Container","Nav","Link","to","exact","activeClassName","styled","div","nav","NavLink","WrappedRoute","Component","component","rest","render","MainWrapper","MainContainer","main","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","__extends","__","this","constructor","create","schema","Schema","nodes","doc","content","paragraph","group","attrs","spellcheck","default","parseDOM","tag","toDOM","node","underline","blockquote","text","splitBlock","state","dispatch","_a","selection","$from","$to","NodeSelection","isBlock","parentOffset","canSplit","pos","tr","split","scrollIntoView","parent","atEnd","size","TextSelection","deleteSelection","deflt","depth","undefined","contentMatchAt","indexAfter","defaultType","types","type","can","mapping","map","isStuff","canReplace","index","Fragment","from","setNodeMarkup","before","createParagraphNear","inlineContent","isTextblock","empty","createAndFill","side","childCount","insert","setSelection","createNewUnderline","endOfBlock","end","createNewBlockQuote","plugins","push","history","keymap","baseKeymap","PortalProvider","portals","Map","createPortal","container","children","u","set","PubSub","publish","remove","delete","console","log","PortalProviderAPI","_super","_this","setContext","context","hasReactContext","wrappedChildren","unstable_renderSubtreeIntoContainer","forceUpdate","forEach","portal","unmountComponentAtNode","error","warn","EventDispatcher","listeners","on","event","cb","Set","add","off","has","emit","data","destroy","PortalProvider$1","portalProviderAPI","componentDidUpdate","displayName","React","PortalRenderer","handleUpdate","setState","createElement","entries","Underline","contentDOM","ref","useRef","useLayoutEffect","current","appendChild","UnderlinedText","spellCheck","cooked","raw","templateObject_1","defineProperty","value","styleInject","css","insertAt","document","head","getElementsByTagName","style","firstChild","insertBefore","styleSheet","cssText","createTextNode","BlockQuote","ReactNodeView","view","getPos","decorations","reactComponent","createRef","dom","classList","renderReactComponent","ReactDOM","update","sameMarkup","fromComponent","ReactNodeViewContext","createContext","NodeViewWrapper","containerRef","isLeaf","Provider","PortalReactNodeView","portalProvider","Editor","editorState","EditorState","editorRef","createEditorView","element","editorView","EditorView","nodeViews","applyDevTools","componentDidMount","componentWillUnmount","shouldComponentUpdate","Fragment$1","id","PageHeader","href","FrontPage","Underlined","hole","append","textDecoration","putContentDomInRef","MinimalPage","__assign","assign","t","s","i","n","arguments","length","apply","__makeTemplateObject","hasRequiredPerformanceAPIs","isPerformanceAPIAvailable","window","every","api","performance","measureMap","startMeasure","measureName","mark","now","stopMeasure","onMeasureComplete","start","get","measure","entry","getEntriesByName","pop","duration","startTime","clearMarks","clearMeasures","clearMeasure","SelectedState","validNode","check","getBlockNode","blockNode","name","nodeSize","getBlockNodeContent","marks","getMarks","blockNodeContent","prevNode_1","result","getInlineNodes","inlineNodes","inlineNode","ranks","sortByOrder","item","a","indexOf","processPluginsList","pluginsOptions","reduce","acc","plugin","keys","pluginName","_b","_c","pmPlugins","primaryToolbarComponent","primaryToolbarComponents","createPMPlugins","config","editorConfig","e","getOwnPropertySymbols","propertyIsEnumerable","__rest","sort","filter","defining","selectable","toDebugString","basePlugin","options","eventDispatcher","reactComponentProps","hasContext","viewShouldUpdate","handleRef","_handleRef","_viewShouldUpdate","init","domRef","createDomRef","setDomAttrs","getContentDOM","contentDOMWrapper","isInline","contains","forwardRef","_decorations","validUpdate","nextNode","attr","setAttribute","enumerable","configurable","StyledBlockQuote","BlockQuoteView","_props","blockQuoteNodeView","pluginKey","PluginKey","mac","ie","ie_version","gecko","chrome","chrome_version","android","ios","webkit","navigator","ieEdge","exec","userAgent","ieUpTo10","test","ie11up","platform","documentMode","parseInt","match","documentElement","browser","makeKeyMapWithCommon","toggleBlockQuote","arrowKeysMap","ARROWLEFT","ARROWRIGHT","ARROWUP","ARROWDOWN","TooltipShortcut","span","templateObject_1$1","memo","description","shortcutOverride","shortcut","replace","windows","lastKey","toUpperCase","join","formatShortcut","common","makeKeymap","blockQuotePlugin","Plugin","_","count","pluginState","_oldState","newState","docChanged","selectionSet","key","blockQuotePluginFactory","list","cmd","oldCmd","newCmd","bindKeymapWithCommand","keymapPlugin","Preset","some","pluginPreset","isArray","getEditorPlugins","excludes","editorPlugins","processEditorPlugins","removeExcludedPlugins","cache","pluginEntry","fn","Error","createSchema","createdMarks","markKeys","markGroups","markKey","fixExcludes","createdNodes","ReactEditorView","canDispatchTransactions","createEditorState","getPlugins","editorProps","reconfigureState","HTMLElement","hasFocus","blur","reconfigure","updateState","dispatchTransaction","transaction","steps","step","slice","_loop_1","topLevelNode_1","resolve","find","findChangedNodesFromTransaction","validateNodes","oldEditorState","invalidNodes","getDocStructure","getDirectEditorProps","editable","_state","attributes","handleEditorViewRef","shouldFocus","focusTimeoutId","setTimeout","focus","handleEditorFocus","editor","eventName","replaceDoc","clearTimeout","editorState_1","getState","prevEditorProps","prevProps","preset","createPluginsList","mount","EditorActions","transformer","editorActions","_privateRegisterEditor","_privateGetEditorView","_privateGetEventDispatcher","contentTransformer","contentEncode","encode","bind","_privateUnregisterEditor","_privateSubscribe","_privateUnsubscribe","c","clear","appendText","lastChild","insertText","EditorContext","getChildContext","Children","only","childContextTypes","PropTypes","object","Toolbar","MarksRow","templateObject_1$2","templateObject_2","templateObject_3","FullPage","editorDOMElement","Container$1","ContentArea","templateObject_1$3","templateObject_2$1","appearance","useState","AtlassianPage","performanceTracking","Routes","basename","process","path","getElementById"],"mappings":"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","file":"static/js/main.ec292594.chunk.js","sourcesContent":["import React from 'react'\nimport { NavLink } from 'react-router-dom'\nimport styled from 'styled-components'\n\nimport { RouteComponentProps } from 'react-router'\n\ninterface IProps extends RouteComponentProps<{}> {\n  className?: string\n}\n\nexport function NavBar(props: IProps) {\n  const { className } = props\n  return (\n    <Container className={className}>\n      <Nav>\n        <Link to=\"/\" exact activeClassName=\"current\">Full</Link>\n        <Link to=\"/minimal\" activeClassName=\"current\">Minimal</Link>\n        <Link to=\"/atlassian\" activeClassName=\"current\">Atlassian</Link>\n      </Nav>\n    </Container>\n  )\n}\n\nconst Container = styled.div`\n  background: #551a8b;\n  box-shadow: 0 0 2px 2px rgba(0,0,0,0.18);\n  padding: 1rem;\n`\nconst Nav = styled.nav`\n  align-items: center;\n  display: flex;\n`\nconst Link = styled(NavLink)`\n  box-sizing: border-box;\n  color: #fff;\n  cursor: pointer;\n  font-size: 1rem;\n  padding: 0.5rem 1rem;\n  text-decoration: none;\n  transition: 0.2s hover;\n  &:hover {\n    text-decoration: underline;\n  }\n  &.current {\n    font-weight: 600;\n  }\n`\n","import * as React from 'react'\nimport { Route, RouteProps, RouteComponentProps } from 'react-router'\nimport styled from 'styled-components'\n\nimport { NavBar } from './NavBar'\n\ntype ReactComponent = React.ComponentClass<any> | React.StatelessComponent<any>\n\ninterface IWrappedRoute extends RouteProps {\n  component: ReactComponent\n}\n\nconst renderNoMainContainerWrapper = (Component: ReactComponent) => (props: RouteComponentProps<any>) =>\n  <MainWrapper>\n    <NavBar {...props}/>\n    <Component {...props}/>\n  </MainWrapper>\n\nconst renderWrapper = (Component: ReactComponent) => (props: RouteComponentProps<any>) =>\n  <MainWrapper>\n    <NavBar {...props}/>\n    <MainContainer>\n      <Component {...props}/>\n    </MainContainer>\n  </MainWrapper>\n\nexport const NoMainContainerRoute = ({ component, ...rest } : IWrappedRoute) =>\n  <Route {...rest} render={renderNoMainContainerWrapper(component)}/>\n\nexport const WrappedRoute = ({ component, ...rest } : IWrappedRoute) =>\n  <Route {...rest} render={renderWrapper(component)}/>\n\nconst MainWrapper = styled.div`\n  background: snow;\n  min-height: 100vh;\n`\nconst MainContainer = styled.main`\n  margin: 40px auto 0 auto;\n  max-width: 680px;\n  padding-bottom: 20px;\n  @media only screen and (max-width: 720px) {\n    margin: 40px 20px 0 20px;\n    padding-bottom: 20px;\n  }\n`\n","import React, { useRef, useLayoutEffect, createElement, createRef, Fragment as Fragment$1, Component } from 'react';\nimport applyDevTools from 'prosemirror-dev-tools';\nimport { NodeSelection, TextSelection, EditorState } from 'prosemirror-state';\nimport { EditorView } from 'prosemirror-view';\nimport { Schema, Fragment } from 'prosemirror-model';\nimport { history } from 'prosemirror-history';\nimport { keymap } from 'prosemirror-keymap';\nimport { baseKeymap } from 'prosemirror-commands';\nimport { canSplit } from 'prosemirror-transform';\nimport PubSub from 'pubsub-js';\nimport ReactDOM, { unstable_renderSubtreeIntoContainer, unmountComponentAtNode, createPortal } from 'react-dom';\nimport styled from 'styled-components';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nfunction __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nfunction __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n}\n\nvar schema = new Schema({\r\n    nodes: {\r\n        doc: {\r\n            content: 'block+'\r\n        },\r\n        paragraph: {\r\n            group: 'block',\r\n            content: 'inline*',\r\n            attrs: {\r\n                spellcheck: { default: 'false' },\r\n            },\r\n            parseDOM: [{ tag: 'p' }],\r\n            toDOM: function (node) { return ['p', node.attrs, 0]; }\r\n        },\r\n        underline: {\r\n            group: 'block',\r\n            content: 'inline*',\r\n            attrs: {\r\n                spellcheck: { default: 'false' },\r\n            },\r\n            parseDOM: [{ tag: 'p' }],\r\n            toDOM: function (node) { return ['p', node.attrs, 0]; }\r\n        },\r\n        blockquote: {\r\n            group: 'block',\r\n            content: 'inline*',\r\n            attrs: {\r\n                spellcheck: { default: 'false' },\r\n            },\r\n            parseDOM: [{ tag: 'blockquote' }],\r\n            toDOM: function (node) { return ['blockquote', node.attrs, 0]; }\r\n        },\r\n        text: {\r\n            group: 'inline'\r\n        },\r\n    }\r\n});\n\nfunction splitBlock(state, dispatch) {\r\n    var _a = state.selection, $from = _a.$from, $to = _a.$to;\r\n    if (state.selection instanceof NodeSelection && state.selection.node.isBlock) {\r\n        if (!$from.parentOffset || !canSplit(state.doc, $from.pos))\r\n            return false;\r\n        if (dispatch)\r\n            dispatch(state.tr.split($from.pos).scrollIntoView());\r\n        return true;\r\n    }\r\n    if (!$from.parent.isBlock)\r\n        return false;\r\n    if (dispatch) {\r\n        var atEnd = $to.parentOffset == $to.parent.content.size;\r\n        var tr = state.tr;\r\n        if (state.selection instanceof TextSelection)\r\n            tr.deleteSelection();\r\n        var deflt = $from.depth == 0 ? undefined : $from.node(-1).contentMatchAt($from.indexAfter(-1)).defaultType;\r\n        var types = atEnd && deflt ? [{ type: deflt }] : undefined;\r\n        var can = canSplit(tr.doc, tr.mapping.map($from.pos), 1, types);\r\n        if (!types && !can && deflt && canSplit(tr.doc, tr.mapping.map($from.pos), 1, deflt && [{ type: deflt }])) {\r\n            types = [{ type: deflt }];\r\n            can = true;\r\n        }\r\n        if (can && deflt) {\r\n            tr.split(tr.mapping.map($from.pos), 1, types);\r\n            var isStuff = !atEnd && !$from.parentOffset && $from.parent.type != deflt;\r\n            var canReplace = $from.node(-1).canReplace($from.index(-1), $from.indexAfter(-1), Fragment.from(deflt.create()));\r\n            if (isStuff && canReplace) {\r\n                tr.setNodeMarkup(tr.mapping.map($from.before()), deflt);\r\n            }\r\n        }\r\n        dispatch(tr.scrollIntoView());\r\n    }\r\n    return true;\r\n}\r\nfunction createParagraphNear(state, dispatch) {\r\n    var _a = state.selection, $from = _a.$from, $to = _a.$to;\r\n    if ($from.parent.inlineContent || $to.parent.inlineContent)\r\n        return false;\r\n    var type = $from.parent.contentMatchAt($to.indexAfter()).defaultType;\r\n    if (!type || !type.isTextblock)\r\n        return false;\r\n    var empty = type.createAndFill();\r\n    debugger;\r\n    if (dispatch && empty) {\r\n        var side = (!$from.parentOffset && $to.index() < $to.parent.childCount ? $from : $to).pos;\r\n        var tr = state.tr.insert(side, empty);\r\n        tr.setSelection(TextSelection.create(tr.doc, side + 1));\r\n        dispatch(tr.scrollIntoView());\r\n    }\r\n    return true;\r\n}\r\nfunction createNewUnderline(state, dispatch) {\r\n    var _a = state.selection, $from = _a.$from, $to = _a.$to;\r\n    var empty = schema.nodes.underline.createAndFill();\r\n    var endOfBlock = $from.end();\r\n    if (empty && dispatch) {\r\n        var tr = state.tr.insert(endOfBlock + 1, empty);\r\n        dispatch(tr);\r\n    }\r\n    return false;\r\n}\r\nfunction createNewBlockQuote(state, dispatch) {\r\n    var _a = state.selection, $from = _a.$from, $to = _a.$to;\r\n    var empty = schema.nodes.blockquote.createAndFill();\r\n    var endOfBlock = $from.end();\r\n    if (empty && dispatch) {\r\n        var tr = state.tr.insert(endOfBlock + 1, empty);\r\n        dispatch(tr);\r\n    }\r\n    return false;\r\n}\n\nvar plugins = function () {\r\n    var plugins = [];\r\n    plugins.push(history());\r\n    plugins.push(keymap(baseKeymap));\r\n    plugins.push(keymap({\r\n        'Ctrl-n': createNewUnderline,\r\n        'Ctrl-b': createNewBlockQuote,\r\n        'Ctrl-p': createParagraphNear,\r\n        'Ctrl-s': splitBlock,\r\n    }));\r\n    return plugins;\r\n};\n\nvar PORTALS_EVENT_KEY = 'portals-update';\r\n// Modified from https://bitbucket.org/atlassian/atlaskit-mk-2/src/0fcae893b790443a30f7dadae00638d6e4238b2f/packages/editor/editor-core/src/ui/PortalProvider/index.tsx?at=master\r\nvar PortalProvider = /** @class */ (function () {\r\n    function PortalProvider() {\r\n        // portals: Map<HTMLElement, MountedPortal> = new Map()\r\n        // portals: Map<HTMLElement, MountedPortal> = new Map()\r\n        this.portals = new Map();\r\n    }\r\n    PortalProvider.prototype.createPortal = function (component, container) {\r\n        // console.log('create portal')\r\n        // const u = this.portals.set(container, { component })\r\n        // PubSub.publish(PORTALS_EVENT_KEY, u)\r\n        // ReactDOM.createPortal(\r\n        //   component,\r\n        //   container,\r\n        // )\r\n    };\r\n    PortalProvider.prototype.render = function (children, container) {\r\n        var u = this.portals.set(container, { children: children });\r\n        PubSub.publish(PORTALS_EVENT_KEY, u);\r\n    };\r\n    PortalProvider.prototype.remove = function (container) {\r\n        this.portals.delete(container);\r\n        console.log('delete', this.portals);\r\n        // ReactDOM.unmountComponentAtNode(container)\r\n        PubSub.publish(PORTALS_EVENT_KEY, this.portals);\r\n    };\r\n    return PortalProvider;\r\n}());\n\n// https://bitbucket.org/atlassian/atlassian-frontend-mirror/src/master/editor/editor-core/src/event-dispatcher/index.ts\r\nvar EventDispatcher = /** @class */ (function () {\r\n    function EventDispatcher() {\r\n        this.listeners = {};\r\n    }\r\n    EventDispatcher.prototype.on = function (event, cb) {\r\n        if (!this.listeners[event]) {\r\n            this.listeners[event] = new Set();\r\n        }\r\n        this.listeners[event].add(cb);\r\n    };\r\n    EventDispatcher.prototype.off = function (event, cb) {\r\n        if (!this.listeners[event]) {\r\n            return;\r\n        }\r\n        if (this.listeners[event].has(cb)) {\r\n            this.listeners[event].delete(cb);\r\n        }\r\n    };\r\n    EventDispatcher.prototype.emit = function (event, data) {\r\n        if (!this.listeners[event]) {\r\n            return;\r\n        }\r\n        this.listeners[event].forEach(function (cb) { return cb(data); });\r\n    };\r\n    EventDispatcher.prototype.destroy = function () {\r\n        this.listeners = {};\r\n    };\r\n    return EventDispatcher;\r\n}());\n\nvar PortalProviderAPI = /** @class */ (function (_super) {\r\n    __extends(PortalProviderAPI, _super);\r\n    function PortalProviderAPI() {\r\n        var _this = _super.call(this) || this;\r\n        _this.portals = new Map();\r\n        _this.setContext = function (context) {\r\n            _this.context = context;\r\n        };\r\n        return _this;\r\n    }\r\n    PortalProviderAPI.prototype.render = function (children, container, hasReactContext) {\r\n        if (hasReactContext === void 0) { hasReactContext = false; }\r\n        this.portals.set(container, { children: children, hasReactContext: hasReactContext });\r\n        var wrappedChildren = children();\r\n        unstable_renderSubtreeIntoContainer(this.context, wrappedChildren, container);\r\n    };\r\n    // TODO: until https://product-fabric.atlassian.net/browse/ED-5013\r\n    // we (unfortunately) need to re-render to pass down any updated context.\r\n    // selectively do this for nodeviews that opt-in via `hasReactContext`\r\n    PortalProviderAPI.prototype.forceUpdate = function () {\r\n        var _this = this;\r\n        this.portals.forEach(function (portal, container) {\r\n            if (!portal.hasReactContext) {\r\n                return;\r\n            }\r\n            var wrappedChildren = portal.children();\r\n            unstable_renderSubtreeIntoContainer(_this.context, wrappedChildren, container);\r\n        });\r\n    };\r\n    PortalProviderAPI.prototype.remove = function (container) {\r\n        this.portals.delete(container);\r\n        // There is a race condition that can happen caused by Prosemirror vs React,\r\n        // where Prosemirror removes the container from the DOM before React gets\r\n        // around to removing the child from the container\r\n        // This will throw a NotFoundError: The node to be removed is not a child of this node\r\n        // Both Prosemirror and React remove the elements asynchronously, and in edge\r\n        // cases Prosemirror beats React\r\n        try {\r\n            unmountComponentAtNode(container);\r\n        }\r\n        catch (error) {\r\n            console.warn('Race condition in PortalProviderAPI where PM removed DOM node before React unmounted it');\r\n        }\r\n    };\r\n    return PortalProviderAPI;\r\n}(EventDispatcher));\n\nvar PortalProvider$1 = /** @class */ (function (_super) {\r\n    __extends(PortalProvider, _super);\r\n    function PortalProvider(props) {\r\n        var _this = _super.call(this, props) || this;\r\n        _this.portalProviderAPI = new PortalProviderAPI();\r\n        return _this;\r\n    }\r\n    PortalProvider.prototype.render = function () {\r\n        return this.props.render(this.portalProviderAPI);\r\n    };\r\n    PortalProvider.prototype.componentDidUpdate = function () {\r\n        this.portalProviderAPI.forceUpdate();\r\n    };\r\n    PortalProvider.displayName = 'PortalProvider';\r\n    return PortalProvider;\r\n}(React.Component));\n\nvar PortalRenderer = /** @class */ (function (_super) {\r\n    __extends(PortalRenderer, _super);\r\n    function PortalRenderer(props) {\r\n        var _this = _super.call(this, props) || this;\r\n        _this.handleUpdate = function (portals) { return _this.setState({ portals: portals }); };\r\n        props.portalProviderAPI.setContext(_this);\r\n        props.portalProviderAPI.on('update', _this.handleUpdate);\r\n        _this.state = { portals: new Map() };\r\n        return _this;\r\n    }\r\n    PortalRenderer.prototype.render = function () {\r\n        var portals = this.state.portals;\r\n        return (React.createElement(React.Fragment, null, Array.from(portals.entries()).map(function (_a) {\r\n            var container = _a[0], children = _a[1];\r\n            return createPortal(children, container);\r\n        })));\r\n    };\r\n    return PortalRenderer;\r\n}(React.Component));\n\n// Modified from https://gist.github.com/esmevane/7326b19e20a5670954b51ea8618d096d\r\nfunction Underline(props) {\r\n    var attrs = props.attrs, contentDOM = props.contentDOM;\r\n    var ref = useRef(null);\r\n    // You _have_ to use layoutEffect, otherwise the contentDOM is not appended when a new Underline node & nodeview\r\n    // is created with eg Ctrl+n\r\n    useLayoutEffect(function () {\r\n        if (ref.current)\r\n            ref.current.appendChild(contentDOM);\r\n    }, []);\r\n    return (React.createElement(UnderlinedText, { ref: ref, spellCheck: attrs.spellcheck }));\r\n}\r\nvar UnderlinedText = styled.p(templateObject_1 || (templateObject_1 = __makeTemplateObject([\"\\n  text-decoration: underline;\\n\"], [\"\\n  text-decoration: underline;\\n\"])));\r\nvar templateObject_1;\n\nfunction styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nvar css_248z = \"blockquote.quote {\\n  background-color: #e7e7e7;\\n  margin: 0;\\n  padding: 1rem; }\\n\";\nstyleInject(css_248z);\n\nfunction BlockQuote(props) {\r\n    return (React.createElement(\"blockquote\", { className: 'quote' }));\r\n}\n\n// Modified from https://bitbucket.org/atlassian/atlaskit-mk-2/src/0fcae893b790443a30f7dadae00638d6e4238b2f/packages/editor/editor-core/src/nodeviews/ReactNodeView.tsx?at=master\r\nvar ReactNodeView = /** @class */ (function () {\r\n    function ReactNodeView(node, view, getPos, decorations, reactComponent) {\r\n        this.attrs = node.attrs;\r\n        this.node = node;\r\n        this.view = view;\r\n        this.getPos = getPos;\r\n        this.decorations = decorations;\r\n        this.reactComponent = reactComponent;\r\n        this.ref = React.createRef();\r\n        // Here, we'll provide a container to render React into.\r\n        // Coincidentally, this is where ProseMirror will put its\r\n        // generated contentDOM.  React will throw out that content\r\n        // once rendered, and at the same time we'll append it into\r\n        // the component tree, like a fancy shell game.  This isn't\r\n        // obvious to the user, but would it be more obvious on an\r\n        // expensive render?\r\n        //\r\n        this.dom = document.createElement('span');\r\n        // Finally, we provide an element to render content into.\r\n        // We will be moving this node around as we need to.\r\n        //\r\n        this.contentDOM = document.createElement('span');\r\n        // Just example classes to help see the structure in the DOM\r\n        this.dom.classList.add('node__dom');\r\n        this.contentDOM.classList.add('node__content-dom');\r\n        this.renderReactComponent();\r\n    }\r\n    ReactNodeView.prototype.renderReactComponent = function () {\r\n        ReactDOM.render(React.createElement(this.reactComponent, { attrs: this.attrs, contentDOM: this.contentDOM }), this.dom);\r\n    };\r\n    ReactNodeView.prototype.update = function (node, decorations) {\r\n        // If the markup has changed, update the React component.\r\n        // TODO only updates attrs, what about type or marks?\r\n        // Or well basically just marks, the previous check will return false if type has changed.\r\n        if (this.contentDOM && !this.node.sameMarkup(node)) {\r\n            this.attrs = node.attrs;\r\n            this.renderReactComponent();\r\n        }\r\n        this.node = node;\r\n        this.decorations = decorations;\r\n        return true;\r\n    };\r\n    ReactNodeView.prototype.destroy = function () {\r\n        ReactDOM.unmountComponentAtNode(this.dom);\r\n    };\r\n    ReactNodeView.fromComponent = function (component) {\r\n        return function (node, view, getPos, decorations) {\r\n            return new ReactNodeView(node, view, getPos, decorations, component);\r\n        };\r\n    };\r\n    return ReactNodeView;\r\n}());\n\nvar ReactNodeViewContext = React.createContext({\r\n    node: undefined,\r\n    view: undefined,\r\n    getPos: undefined,\r\n    decorations: undefined\r\n});\r\n// Modified from https://github.com/johnkueh/prosemirror-react-nodeviews/blob/master/src/components/ReactNodeView.tsx\r\nfunction NodeViewWrapper(props) {\r\n    var contentDOM = props.contentDOM, Component = props.Component, node = props.node, view = props.view, getPos = props.getPos, decorations = props.decorations, attrs = props.attrs;\r\n    var containerRef = useRef(null);\r\n    // You _have_ to use layoutEffect, otherwise the contentDOM is not appended when a new Underline node & nodeview\r\n    // is created with eg Ctrl+n\r\n    useLayoutEffect(function () {\r\n        console.log(containerRef.current);\r\n        if (containerRef.current && contentDOM && !node.isLeaf) {\r\n            containerRef.current.firstChild.appendChild(contentDOM);\r\n        }\r\n    }, []);\r\n    console.log('nodeview wrapper');\r\n    return (React.createElement(\"div\", { ref: containerRef, className: \"ProseMirror__react-node-view\" },\r\n        React.createElement(ReactNodeViewContext.Provider, { value: {\r\n                node: node,\r\n                view: view,\r\n                getPos: getPos,\r\n                decorations: decorations,\r\n            } },\r\n            React.createElement(Component, { attrs: attrs }))));\r\n}\n\n// Modified from https://bitbucket.org/atlassian/atlaskit-mk-2/src/0fcae893b790443a30f7dadae00638d6e4238b2f/packages/editor/editor-core/src/nodeviews/ReactNodeView.tsx?at=master\r\n// and https://github.com/johnkueh/prosemirror-react-nodeviews\r\nvar PortalReactNodeView = /** @class */ (function () {\r\n    function PortalReactNodeView(node, view, getPos, decorations, portalProvider, reactComponent) {\r\n        this.attrs = node.attrs;\r\n        this.node = node;\r\n        this.view = view;\r\n        this.getPos = getPos;\r\n        this.decorations = decorations;\r\n        this.portalProvider = portalProvider;\r\n        this.reactComponent = reactComponent;\r\n        this.ref = createRef();\r\n        // Here, we'll provide a container to render React into.\r\n        // Coincidentally, this is where ProseMirror will put its\r\n        // generated contentDOM.  React will throw out that content\r\n        // once rendered, and at the same time we'll append it into\r\n        // the component tree, like a fancy shell game.  This isn't\r\n        // obvious to the user, but would it be more obvious on an\r\n        // expensive render?\r\n        //\r\n        this.dom = document.createElement('span');\r\n        // Finally, we provide an element to render content into.\r\n        // We will be moving this node around as we need to.\r\n        //\r\n        this.contentDOM = document.createElement('span');\r\n        // Just example classes to help see the structure in the DOM\r\n        this.dom.classList.add('ProseMirror__dom');\r\n        this.contentDOM.classList.add('ProseMirror__content-dom');\r\n        this.dom.appendChild(this.contentDOM);\r\n        this.renderReactComponent();\r\n    }\r\n    PortalReactNodeView.prototype.renderReactComponent = function () {\r\n        this.portalProvider.createPortal(\r\n        // ReactDOM.render(\r\n        createElement(NodeViewWrapper, { Component: this.reactComponent, contentDOM: this.contentDOM, attrs: this.attrs, node: this.node, view: this.view, getPos: this.getPos, decorations: this.decorations }), this.dom);\r\n    };\r\n    PortalReactNodeView.prototype.update = function (node, decorations) {\r\n        // If the markup has changed, update the React component.\r\n        // TODO only updates attrs, what about type or marks?\r\n        // Or well basically just marks, the previous check will return false if type has changed.\r\n        if (this.ref && !this.node.sameMarkup(node)) {\r\n            this.attrs = node.attrs;\r\n            this.renderReactComponent();\r\n        }\r\n        this.node = node;\r\n        this.decorations = decorations;\r\n        return true;\r\n    };\r\n    PortalReactNodeView.prototype.destroy = function () {\r\n        console.log('destory!');\r\n        // this.dom = undefined\r\n        // this.contentDOM = undefined\r\n        this.portalProvider.remove(this.dom);\r\n        ReactDOM.unmountComponentAtNode(this.contentDOM);\r\n    };\r\n    PortalReactNodeView.fromComponent = function (component, portalProvider) {\r\n        return function (node, view, getPos, decorations) {\r\n            return new PortalReactNodeView(node, view, getPos, decorations, portalProvider, component);\r\n        };\r\n    };\r\n    return PortalReactNodeView;\r\n}());\n\nvar nodeViews = function (portalProvider) { return ({\r\n    underline: ReactNodeView.fromComponent(Underline),\r\n    blockquote: PortalReactNodeView.fromComponent(BlockQuote, portalProvider),\r\n}); };\n\nvar css_248z$1 = \"#full-editor {\\n  border: 1px solid black; }\\n  #full-editor > .ProseMirror {\\n    min-height: 140px;\\n    overflow-wrap: break-word;\\n    outline: none;\\n    padding: 10px;\\n    white-space: pre-wrap; }\\n\";\nstyleInject(css_248z$1);\n\n/**\r\n * The editor React component which is a class instead of a function component\r\n * since the exhaustive-deps linting rule drives me nuts as it requires adding everything\r\n * to the useEffect dependencies. Even adding values that should never change and if they did,\r\n * there should be an error instead of rerunning the useEffect hook.\r\n */\r\nvar Editor = /** @class */ (function (_super) {\r\n    __extends(Editor, _super);\r\n    function Editor(props) {\r\n        var _this = _super.call(this, props) || this;\r\n        _this.editorState = EditorState.create({\r\n            schema: schema,\r\n            plugins: plugins(),\r\n        });\r\n        _this.editorRef = createRef();\r\n        _this.portalProvider = new PortalProvider();\r\n        return _this;\r\n    }\r\n    Editor.prototype.createEditorView = function (element) {\r\n        if (element !== null) {\r\n            this.editorView = new EditorView(element, {\r\n                nodeViews: nodeViews(this.portalProvider),\r\n                state: this.editorState,\r\n            });\r\n            applyDevTools(this.editorView);\r\n        }\r\n    };\r\n    Editor.prototype.componentDidMount = function () {\r\n        this.createEditorView(this.editorRef.current);\r\n        this.forceUpdate();\r\n    };\r\n    Editor.prototype.componentWillUnmount = function () {\r\n        if (this.editorView) {\r\n            this.editorView.destroy();\r\n        }\r\n    };\r\n    Editor.prototype.shouldComponentUpdate = function () {\r\n        return false;\r\n    };\r\n    Editor.prototype.render = function () {\r\n        var _this = this;\r\n        return (createElement(PortalProvider$1, { render: function (portalProviderAPI) { return (createElement(Fragment$1, null,\r\n                createElement(\"div\", { id: \"full-editor\", ref: _this.editorRef }),\r\n                createElement(PortalRenderer, { portalProviderAPI: portalProviderAPI }))); } }));\r\n    };\r\n    return Editor;\r\n}(Component));\n\nexport { Editor };\n","import * as React from 'react'\nimport styled from 'styled-components'\n\ninterface IProps {\n  className?: string\n  children: React.ReactNode\n}\n\nexport function PageHeader(props: IProps) {\n  const { className, children } = props\n  return (\n    <Container className={className}>\n      <header>\n        <h1><a href=\"https://teemukoivisto.github.io/prosemirror-react-typescript-example/\">\n          ProseMirror React Typescript Example</a></h1>\n        <p>Demo application to show how to combine ProseMirror with React</p>\n        <p><a href=\"https://github.com/TeemuKoivisto/prosemirror-react-typescript-example\">Github repo</a></p>\n      </header>\n      <div>\n        <ul>\n          <li><b>Ctrl + n</b>: New underline paragraph</li>\n          <li><b>Ctrl + b</b>: New blockquote</li>\n          <li><b>Ctrl + p</b>: New normal paragraph (not working)</li>\n          <li><b>Ctrl + s</b>: Split current block</li>\n        </ul>\n        { children }\n      </div>\n    </Container>\n  )\n}\n\nconst Container = styled.div`\n`\n","import * as React from 'react'\nimport styled from 'styled-components'\n\nimport { Editor } from 'full'\n\nimport { PageHeader } from '../components/PageHeader'\n\ninterface IProps {\n  className?: string\n}\n\nexport function FrontPage(props: IProps) {\n  const { className } = props\n  return (\n    <Container className={className}>\n      <PageHeader>\n        <Editor />\n      </PageHeader>\n    </Container>\n  )\n}\n\nconst Container = styled.div`\n`\n","import { createElement, createRef, Component } from 'react';\nimport { EditorState } from 'prosemirror-state';\nimport { EditorView } from 'prosemirror-view';\nimport { Schema } from 'prosemirror-model';\nimport { history } from 'prosemirror-history';\nimport { keymap } from 'prosemirror-keymap';\nimport { baseKeymap } from 'prosemirror-commands';\nimport ReactDOM from 'react-dom';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nfunction __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\n\nvar schema = new Schema({\r\n    nodes: {\r\n        doc: {\r\n            content: 'block+'\r\n        },\r\n        underline: {\r\n            group: 'block',\r\n            content: 'inline*',\r\n            parseDOM: [{ tag: 'p' }],\r\n            toDOM: function () { return ['p', 0]; }\r\n        },\r\n        text: {\r\n            group: 'inline'\r\n        },\r\n    }\r\n});\n\nfunction createNewUnderline(state, dispatch) {\r\n    var _a = state.selection, $from = _a.$from, $to = _a.$to;\r\n    var empty = schema.nodes.underline.createAndFill(null);\r\n    if (empty) {\r\n        var tr = state.tr.insert($to.pos, empty);\r\n        if (dispatch)\r\n            dispatch(tr);\r\n        return true;\r\n    }\r\n    return false;\r\n}\n\nvar plugins = function () {\r\n    var plugins = [];\r\n    plugins.push(history());\r\n    plugins.push(keymap(baseKeymap));\r\n    plugins.push(keymap({\r\n        'Ctrl-n': createNewUnderline,\r\n    }));\r\n    return plugins;\r\n};\n\n// Copied from here https://gist.github.com/esmevane/7326b19e20a5670954b51ea8618d096d\r\n// Here we have the (too simple) React component which\r\n// we'll be rendering content into.\r\n//\r\nvar Underlined = /** @class */ (function (_super) {\r\n    __extends(Underlined, _super);\r\n    function Underlined(props) {\r\n        var _this = _super.call(this, props) || this;\r\n        _this.hole = createRef();\r\n        return _this;\r\n    }\r\n    // We'll put the content into what we render using\r\n    // this function, which appends a given node to\r\n    // a ref HTMLElement, if present.\r\n    //\r\n    Underlined.prototype.append = function (node) {\r\n        if (this.hole) {\r\n            this.hole.current.appendChild(node);\r\n        }\r\n    };\r\n    Underlined.prototype.render = function () {\r\n        // Just really wanted to prove I could get React AND\r\n        // styled-component abilities at the same time.\r\n        //\r\n        // const UnderlinedText: any = styled.p`\r\n        //   text-decoration: underline;\r\n        // `\r\n        // The styled components version is basically just a wrapper to do SCSS styling.\r\n        // Questionable if it's even needed for such simple styling and because you can't clearly see the \r\n        // DOM structure from the code (hence making `& > ${Component}` selectors quite unintuitive) \r\n        // return <UnderlinedText ref={this.hole} />\r\n        return createElement(\"p\", { ref: this.hole, style: { textDecoration: 'underline' } });\r\n    };\r\n    return Underlined;\r\n}(Component));\r\n// This class is our actual interactor for ProseMirror itself.\r\n// It glues DOM rendering, React, and ProseMirror nodes together.\r\n//\r\nvar Underline = /** @class */ (function () {\r\n    function Underline(node, view, getPos, decorations) {\r\n        var _this = this;\r\n        // This is the least complex part.  Now we've put\r\n        // all of our interlocking pieces behind refs and\r\n        // instance properties, this becomes the callback\r\n        // which performs the actual shell game.\r\n        //\r\n        this.putContentDomInRef = function () {\r\n            _this.ref.current.append(_this.contentDOM);\r\n        };\r\n        this.attrs = node.attrs;\r\n        this.node = node;\r\n        this.view = view;\r\n        this.getPos = getPos;\r\n        this.decorations = decorations;\r\n        // We'll use this to access our Underlined component's \r\n        // instance methods.\r\n        //\r\n        this.ref = createRef();\r\n        // Here, we'll provide a container to render React into.\r\n        // Coincidentally, this is where ProseMirror will put its\r\n        // generated contentDOM.  React will throw out that content\r\n        // once rendered, and at the same time we'll append it into\r\n        // the component tree, like a fancy shell game.  This isn't\r\n        // obvious to the user, but would it be more obvious on an\r\n        // expensive render?\r\n        //\r\n        this.dom = document.createElement('span');\r\n        // Finally, we provide an element to render content into.\r\n        // We will be moving this node around as we need to.\r\n        //\r\n        this.contentDOM = document.createElement('span');\r\n        // Just example classes to help see the structure in the DOM\r\n        this.dom.classList.add('node__dom');\r\n        this.contentDOM.classList.add('node__content-dom');\r\n        // Better way of doing this would be portals https://reactjs.org/docs/portals.html\r\n        ReactDOM.render(createElement(Underlined, { ref: this.ref }), this.dom, this.putContentDomInRef);\r\n    }\r\n    Underline.prototype.update = function (node) {\r\n        return true;\r\n    };\r\n    // Required to not to leave the React nodes orphaned.\r\n    Underline.prototype.destroy = function () {\r\n        ReactDOM.unmountComponentAtNode(this.dom);\r\n    };\r\n    return Underline;\r\n}());\n\nvar nodeViews = {\r\n    underline: function (node, view, getPos, decorations) { return new Underline(node, view, getPos, decorations); },\r\n};\n\nfunction styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nvar css_248z = \"#editor {\\n  border: 1px solid black; }\\n\";\nstyleInject(css_248z);\n\nvar Editor = /** @class */ (function (_super) {\r\n    __extends(Editor, _super);\r\n    function Editor(props) {\r\n        var _this = _super.call(this, props) || this;\r\n        _this.createEditorView = function (element) {\r\n            if (element != null) {\r\n                _this.editorView = new EditorView(element, {\r\n                    nodeViews: nodeViews,\r\n                    state: _this.editorState,\r\n                });\r\n            }\r\n        };\r\n        _this.editorState = EditorState.create({\r\n            schema: schema,\r\n            plugins: plugins(),\r\n        });\r\n        _this.editorRef = createRef();\r\n        return _this;\r\n    }\r\n    Editor.prototype.componentDidMount = function () {\r\n        this.createEditorView(this.editorRef.current);\r\n        this.forceUpdate();\r\n    };\r\n    Editor.prototype.componentWillUnmount = function () {\r\n        if (this.editorView) {\r\n            this.editorView.destroy();\r\n        }\r\n    };\r\n    Editor.prototype.shouldComponentUpdate = function () {\r\n        return false;\r\n    };\r\n    Editor.prototype.render = function () {\r\n        return createElement(\"div\", { id: \"editor\", ref: this.editorRef });\r\n    };\r\n    return Editor;\r\n}(Component));\n\nexport { Editor };\n","import * as React from 'react'\nimport styled from 'styled-components'\n\nimport { Editor } from 'minimal'\n\nimport { PageHeader } from '../components/PageHeader'\n\ninterface IProps {\n  className?: string\n}\n\nexport function MinimalPage(props: IProps) {\n  const { className } = props\n  return (\n    <Container className={className}>\n      <PageHeader>\n        <Editor />\n      </PageHeader>\n    </Container>\n  )\n}\n\nconst Container = styled.div`\n`\n","import React, { forwardRef, useState } from 'react';\nimport applyDevTools from 'prosemirror-dev-tools';\nimport { NodeSelection, TextSelection, PluginKey, Plugin, EditorState } from 'prosemirror-state';\nimport { EditorView } from 'prosemirror-view';\nimport { history } from 'prosemirror-history';\nimport { keymap } from 'prosemirror-keymap';\nimport { baseKeymap } from 'prosemirror-commands';\nimport { canSplit } from 'prosemirror-transform';\nimport { Fragment, Schema } from 'prosemirror-model';\nimport styled from 'styled-components';\nimport PropTypes from 'prop-types';\nimport { unstable_renderSubtreeIntoContainer, unmountComponentAtNode, createPortal } from 'react-dom';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nfunction __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\n\r\nfunction __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nfunction __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n}\n\n// https://bitbucket.org/atlassian/atlassian-frontend-mirror/src/master/editor/editor-core/src/event-dispatcher/index.ts\r\nvar EventDispatcher = /** @class */ (function () {\r\n    function EventDispatcher() {\r\n        this.listeners = {};\r\n    }\r\n    EventDispatcher.prototype.on = function (event, cb) {\r\n        if (!this.listeners[event]) {\r\n            this.listeners[event] = new Set();\r\n        }\r\n        this.listeners[event].add(cb);\r\n    };\r\n    EventDispatcher.prototype.off = function (event, cb) {\r\n        if (!this.listeners[event]) {\r\n            return;\r\n        }\r\n        if (this.listeners[event].has(cb)) {\r\n            this.listeners[event].delete(cb);\r\n        }\r\n    };\r\n    EventDispatcher.prototype.emit = function (event, data) {\r\n        if (!this.listeners[event]) {\r\n            return;\r\n        }\r\n        this.listeners[event].forEach(function (cb) { return cb(data); });\r\n    };\r\n    EventDispatcher.prototype.destroy = function () {\r\n        this.listeners = {};\r\n    };\r\n    return EventDispatcher;\r\n}());\r\n/**\r\n * Creates a dispatch function that can be called inside ProseMirror Plugin\r\n * to notify listeners about that plugin's state change.\r\n */\r\nfunction createDispatch(eventDispatcher) {\r\n    return function (eventName, data) {\r\n        if (!eventName) {\r\n            throw new Error('event name is required!');\r\n        }\r\n        var event = typeof eventName === 'string'\r\n            ? eventName\r\n            : eventName.key;\r\n        eventDispatcher.emit(event, data);\r\n    };\r\n}\n\nvar hasRequiredPerformanceAPIs;\r\nfunction isPerformanceAPIAvailable() {\r\n    if (hasRequiredPerformanceAPIs === undefined) {\r\n        hasRequiredPerformanceAPIs =\r\n            typeof window !== 'undefined' &&\r\n                'performance' in window &&\r\n                [\r\n                    'measure',\r\n                    'clearMeasures',\r\n                    'clearMarks',\r\n                    'getEntriesByName',\r\n                    'getEntriesByType',\r\n                    'now',\r\n                ].every(function (api) { return !!performance[api]; });\r\n    }\r\n    return hasRequiredPerformanceAPIs;\r\n}\n\nvar measureMap = new Map();\r\nfunction startMeasure(measureName) {\r\n    if (!isPerformanceAPIAvailable()) {\r\n        return;\r\n    }\r\n    performance.mark(measureName + \"::start\");\r\n    measureMap.set(measureName, performance.now());\r\n}\r\nfunction stopMeasure(measureName, onMeasureComplete) {\r\n    if (!isPerformanceAPIAvailable()) {\r\n        return;\r\n    }\r\n    performance.mark(measureName + \"::end\");\r\n    var start = onMeasureComplete ? measureMap.get(measureName) : undefined;\r\n    try {\r\n        performance.measure(measureName, measureName + \"::start\", measureName + \"::end\");\r\n    }\r\n    catch (error) {\r\n    }\r\n    finally {\r\n        if (onMeasureComplete) {\r\n            var entry = performance.getEntriesByName(measureName).pop();\r\n            if (entry) {\r\n                onMeasureComplete(entry.duration, entry.startTime);\r\n            }\r\n            else if (start) {\r\n                onMeasureComplete(performance.now() - start, start);\r\n            }\r\n        }\r\n        clearMeasure(measureName);\r\n    }\r\n}\r\nfunction clearMeasure(measureName) {\r\n    if (!isPerformanceAPIAvailable()) {\r\n        return;\r\n    }\r\n    measureMap.delete(measureName);\r\n    performance.clearMarks(measureName + \"::start\");\r\n    performance.clearMarks(measureName + \"::end\");\r\n    performance.clearMeasures(measureName);\r\n}\n\n/**\r\n * Finds all top level nodes affected by the transaction\r\n * Uses from/to positions in transaction's steps to work out which nodes will\r\n * be changed by the transaction\r\n */\r\nvar findChangedNodesFromTransaction = function (tr) {\r\n    var nodes = [];\r\n    var steps = (tr.steps || []);\r\n    steps.forEach(function (step) {\r\n        var to = step.to, from = step.from, slice = step.slice;\r\n        var size = slice && slice.content ? slice.content.size : 0;\r\n        var _loop_1 = function (i) {\r\n            if (i <= tr.doc.content.size) {\r\n                var topLevelNode_1 = tr.doc.resolve(i).node(1);\r\n                if (topLevelNode_1 && !nodes.find(function (n) { return n === topLevelNode_1; })) {\r\n                    nodes.push(topLevelNode_1);\r\n                }\r\n            }\r\n        };\r\n        for (var i = from; i <= to + size; i++) {\r\n            _loop_1(i);\r\n        }\r\n    });\r\n    return nodes;\r\n};\r\nvar validNode = function (node) {\r\n    try {\r\n        node.check(); // this will throw an error if the node is invalid\r\n    }\r\n    catch (error) {\r\n        return false;\r\n    }\r\n    return true;\r\n};\r\n/** Validates prosemirror nodes, and returns true only if all nodes are valid */\r\nvar validateNodes = function (nodes) {\r\n    return nodes.every(validNode);\r\n};\r\nvar SelectedState;\r\n(function (SelectedState) {\r\n    SelectedState[SelectedState[\"selectedInRange\"] = 0] = \"selectedInRange\";\r\n    SelectedState[SelectedState[\"selectedInside\"] = 1] = \"selectedInside\";\r\n})(SelectedState || (SelectedState = {}));\n\nvar getDocStructure = function (doc) {\r\n    try {\r\n        return getBlockNode(doc, 0);\r\n    }\r\n    catch (error) {\r\n        return \"Error logging document structure: \" + error;\r\n    }\r\n};\r\nvar getBlockNode = function (node, pos) {\r\n    var blockNode = {\r\n        type: node.type.name,\r\n        pos: pos,\r\n        nodeSize: node.nodeSize,\r\n    };\r\n    var content = getBlockNodeContent(node.content, pos);\r\n    if (content.length > 0) {\r\n        blockNode.content = content;\r\n    }\r\n    var marks = getMarks(node);\r\n    if (marks.length > 0) {\r\n        blockNode.marks = marks;\r\n    }\r\n    return blockNode;\r\n};\r\nvar getBlockNodeContent = function (node, pos) {\r\n    if (!node || !node.content || !node.content.length) {\r\n        return [];\r\n    }\r\n    var blockNodeContent = [];\r\n    var content = node.content;\r\n    if (content[0].isBlock) {\r\n        // children are block nodes\r\n        var prevNode_1;\r\n        blockNodeContent = content.map(function (node) {\r\n            pos += prevNode_1 ? prevNode_1.nodeSize : 1;\r\n            prevNode_1 = node;\r\n            return getBlockNode(node, pos);\r\n        });\r\n    }\r\n    else {\r\n        // children are inline nodes\r\n        var result = getInlineNodes(content, pos);\r\n        blockNodeContent = result.inlineNodes;\r\n        pos = result.pos;\r\n    }\r\n    return blockNodeContent;\r\n};\r\nvar getInlineNodes = function (nodes, pos) {\r\n    var inlineNodes = nodes.map(function (node) {\r\n        var nodeSize = node.nodeSize;\r\n        var inlineNode = {\r\n            type: node.type.name,\r\n            pos: pos,\r\n            nodeSize: nodeSize,\r\n        };\r\n        var marks = getMarks(node);\r\n        if (marks.length > 0) {\r\n            inlineNode.marks = marks;\r\n        }\r\n        pos += nodeSize;\r\n        return inlineNode;\r\n    });\r\n    return { inlineNodes: inlineNodes, pos: pos };\r\n};\r\nvar getMarks = function (node) {\r\n    return node.marks.map(function (mark) { return mark.type.name; });\r\n};\n\nvar ranks = {\r\n    plugins: [\r\n        'underline',\r\n        'blockquote'\r\n    ],\r\n    nodes: [\r\n        'doc',\r\n        'paragraph',\r\n        'text',\r\n        'bulletList',\r\n        'orderedList',\r\n        'listItem',\r\n        'heading',\r\n        'blockquote',\r\n        'codeBlock',\r\n    ],\r\n    marks: [\r\n        // Inline marks\r\n        'link',\r\n        'em',\r\n        'strong',\r\n        'textColor',\r\n        'strike',\r\n        'subsup',\r\n        'underline',\r\n        'code',\r\n        'typeAheadQuery',\r\n        // Block marks\r\n        'alignment',\r\n        'breakout',\r\n        'indentation',\r\n        'annotation',\r\n        //Unsupported mark\r\n        'unsupportedMark',\r\n        'unsupportedNodeAttribute',\r\n    ],\r\n};\r\nfunction sortByOrder(item) {\r\n    return function (a, b) {\r\n        return ranks[item].indexOf(a.name) - ranks[item].indexOf(b.name);\r\n    };\r\n}\n\nfunction fixExcludes(marks) {\r\n    var markKeys = Object.keys(marks);\r\n    var markGroups = new Set(markKeys.map(function (mark) { return marks[mark].group; }));\r\n    markKeys.forEach(function (markKey) {\r\n        var mark = marks[markKey];\r\n        if (mark.excludes) {\r\n            mark.excludes = mark.excludes\r\n                .split(' ')\r\n                .filter(function (group) { return markGroups.has(group); })\r\n                .join(' ');\r\n        }\r\n    });\r\n    return marks;\r\n}\r\nfunction processPluginsList(plugins) {\r\n    /**\r\n     * First pass to collect pluginsOptions\r\n     */\r\n    var pluginsOptions = plugins.reduce(function (acc, plugin) {\r\n        if (plugin.pluginsOptions) {\r\n            Object.keys(plugin.pluginsOptions).forEach(function (pluginName) {\r\n                if (!acc[pluginName]) {\r\n                    acc[pluginName] = [];\r\n                }\r\n                acc[pluginName].push(plugin.pluginsOptions[pluginName]);\r\n            });\r\n        }\r\n        return acc;\r\n    }, {});\r\n    /**\r\n     * Process plugins\r\n     */\r\n    return plugins.reduce(function (acc, plugin) {\r\n        var _a, _b, _c;\r\n        if (plugin.pmPlugins) {\r\n            (_a = acc.pmPlugins).push.apply(_a, plugin.pmPlugins(plugin.name ? pluginsOptions[plugin.name] : undefined));\r\n        }\r\n        if (plugin.nodes) {\r\n            (_b = acc.nodes).push.apply(_b, plugin.nodes());\r\n        }\r\n        if (plugin.marks) {\r\n            (_c = acc.marks).push.apply(_c, plugin.marks());\r\n        }\r\n        // if (plugin.contentComponent) {\r\n        //   acc.contentComponents.push(plugin.contentComponent);\r\n        // }\r\n        if (plugin.primaryToolbarComponent) {\r\n            acc.primaryToolbarComponents.push(plugin.primaryToolbarComponent);\r\n        }\r\n        // if (plugin.secondaryToolbarComponent) {\r\n        //   acc.secondaryToolbarComponents.push(plugin.secondaryToolbarComponent);\r\n        // }\r\n        return acc;\r\n    }, {\r\n        nodes: [],\r\n        marks: [],\r\n        pmPlugins: [],\r\n        primaryToolbarComponents: [],\r\n    });\r\n}\r\nfunction createPMPlugins(config) {\r\n    var editorConfig = config.editorConfig, rest = __rest(config, [\"editorConfig\"]);\r\n    return editorConfig.pmPlugins\r\n        .sort(sortByOrder('plugins'))\r\n        .map(function (_a) {\r\n        var plugin = _a.plugin;\r\n        return plugin(rest);\r\n    })\r\n        .filter(function (plugin) { return typeof plugin !== 'undefined'; });\r\n}\n\nvar doc = {\r\n    content: 'block+',\r\n};\n\nvar blockquote = {\r\n    content: 'paragraph+',\r\n    group: 'block',\r\n    defining: true,\r\n    selectable: false,\r\n    parseDOM: [{ tag: 'blockquote' }],\r\n    toDOM: function () {\r\n        return ['blockquote', 0];\r\n    },\r\n};\n\n/**\r\n * NOTE: Need this because TS is too smart and inline everything.\r\n * So we need to give them separate identity.\r\n * Probably there's a way to solve it but that will need time and exploration.\r\n * // http://bit.ly/2raXFX5\r\n * type T1 = X | Y\r\n * type T2 = A | T1 | B // T2 = A | X | Y | B\r\n */\r\n// export type ParagraphWithMarksDefinition =\r\n//   | ParagraphWithAlignmentDefinition\r\n//   | ParagraphWithIndentationDefinition;\r\nvar paragraph = {\r\n    content: 'inline*',\r\n    group: 'block',\r\n    selectable: false,\r\n    // marks:\r\n    // 'strong code em link strike subsup textColor underline unsupportedMark unsupportedNodeAttribute',\r\n    parseDOM: [{ tag: 'p' }],\r\n    toDOM: function () {\r\n        return ['p', 0];\r\n    },\r\n};\n\nvar text = {\r\n    group: 'inline',\r\n    toDebugString: process.env.NODE_ENV !== 'production' ? undefined : function () { return 'text_node'; },\r\n};\n\nfunction splitBlock(state, dispatch) {\r\n    var _a = state.selection, $from = _a.$from, $to = _a.$to;\r\n    if (state.selection instanceof NodeSelection && state.selection.node.isBlock) {\r\n        if (!$from.parentOffset || !canSplit(state.doc, $from.pos))\r\n            return false;\r\n        if (dispatch)\r\n            dispatch(state.tr.split($from.pos).scrollIntoView());\r\n        return true;\r\n    }\r\n    if (!$from.parent.isBlock)\r\n        return false;\r\n    if (dispatch) {\r\n        var atEnd = $to.parentOffset == $to.parent.content.size;\r\n        var tr = state.tr;\r\n        if (state.selection instanceof TextSelection)\r\n            tr.deleteSelection();\r\n        var deflt = $from.depth == 0 ? undefined : $from.node(-1).contentMatchAt($from.indexAfter(-1)).defaultType;\r\n        var types = atEnd && deflt ? [{ type: deflt }] : undefined;\r\n        var can = canSplit(tr.doc, tr.mapping.map($from.pos), 1, types);\r\n        if (!types && !can && deflt && canSplit(tr.doc, tr.mapping.map($from.pos), 1, deflt && [{ type: deflt }])) {\r\n            types = [{ type: deflt }];\r\n            can = true;\r\n        }\r\n        if (can && deflt) {\r\n            tr.split(tr.mapping.map($from.pos), 1, types);\r\n            var isStuff = !atEnd && !$from.parentOffset && $from.parent.type != deflt;\r\n            var canReplace = $from.node(-1).canReplace($from.index(-1), $from.indexAfter(-1), Fragment.from(deflt.create()));\r\n            if (isStuff && canReplace) {\r\n                tr.setNodeMarkup(tr.mapping.map($from.before()), deflt);\r\n            }\r\n        }\r\n        dispatch(tr.scrollIntoView());\r\n    }\r\n    return true;\r\n}\r\nfunction createParagraphNear(state, dispatch) {\r\n    var _a = state.selection, $from = _a.$from, $to = _a.$to;\r\n    if ($from.parent.inlineContent || $to.parent.inlineContent)\r\n        return false;\r\n    var type = $from.parent.contentMatchAt($to.indexAfter()).defaultType;\r\n    if (!type || !type.isTextblock)\r\n        return false;\r\n    var empty = type.createAndFill();\r\n    debugger;\r\n    if (dispatch && empty) {\r\n        var side = (!$from.parentOffset && $to.index() < $to.parent.childCount ? $from : $to).pos;\r\n        var tr = state.tr.insert(side, empty);\r\n        tr.setSelection(TextSelection.create(tr.doc, side + 1));\r\n        dispatch(tr.scrollIntoView());\r\n    }\r\n    return true;\r\n}\n\nvar basePlugin = function (options) { return ({\r\n    name: 'base',\r\n    pmPlugins: function () {\r\n        var plugins = [\r\n            { name: 'history', plugin: function () { return history(); } },\r\n            { name: 'baseKeyMap', plugin: function () { return keymap(baseKeymap); } },\r\n            {\r\n                name: 'otherKeyMap',\r\n                plugin: function () { return keymap({\r\n                    'Ctrl-p': createParagraphNear,\r\n                    'Ctrl-s': splitBlock,\r\n                }); }\r\n            },\r\n        ];\r\n        return plugins;\r\n    },\r\n    nodes: function () {\r\n        return [\r\n            { name: 'doc', node: doc },\r\n            { name: 'paragraph', node: paragraph },\r\n            { name: 'text', node: text },\r\n        ];\r\n    },\r\n}); };\n\nvar ReactNodeView = /** @class */ (function () {\r\n    function ReactNodeView(node, view, getPos, portalProviderAPI, eventDispatcher, reactComponentProps, reactComponent, hasContext, viewShouldUpdate) {\r\n        var _this = this;\r\n        if (hasContext === void 0) { hasContext = false; }\r\n        this.handleRef = function (node) { return _this._handleRef(node); };\r\n        this.node = node;\r\n        this.view = view;\r\n        this.getPos = getPos;\r\n        this.portalProviderAPI = portalProviderAPI;\r\n        this.reactComponentProps = reactComponentProps || {};\r\n        this.reactComponent = reactComponent;\r\n        this.hasContext = hasContext;\r\n        this._viewShouldUpdate = viewShouldUpdate;\r\n        this.eventDispatcher = eventDispatcher;\r\n    }\r\n    /**\r\n     * This method exists to move initialization logic out of the constructor,\r\n     * so object can be initialized properly before calling render first time.\r\n     *\r\n     * Example:\r\n     * Instance properties get added to an object only after super call in\r\n     * constructor, which leads to some methods being undefined during the\r\n     * first render.\r\n     */\r\n    ReactNodeView.prototype.init = function () {\r\n        var _this = this;\r\n        this.domRef = this.createDomRef();\r\n        this.setDomAttrs(this.node, this.domRef);\r\n        var _a = this.getContentDOM() || {\r\n            dom: undefined,\r\n            contentDOM: undefined,\r\n        }, contentDOMWrapper = _a.dom, contentDOM = _a.contentDOM;\r\n        if (this.domRef && contentDOMWrapper) {\r\n            this.domRef.appendChild(contentDOMWrapper);\r\n            this.contentDOM = contentDOM ? contentDOM : contentDOMWrapper;\r\n            this.contentDOMWrapper = contentDOMWrapper || contentDOM;\r\n        }\r\n        // @see ED-3790\r\n        // something gets messed up during mutation processing inside of a\r\n        // nodeView if DOM structure has nested plain \"div\"s, it doesn't see the\r\n        // difference between them and it kills the nodeView\r\n        this.domRef.classList.add(this.node.type.name + \"View-content-wrap\");\r\n        this.renderReactComponent(function () {\r\n            return _this.render(_this.reactComponentProps, _this.handleRef);\r\n        });\r\n        return this;\r\n    };\r\n    ReactNodeView.prototype.renderReactComponent = function (component) {\r\n        if (!this.domRef || !component) {\r\n            return;\r\n        }\r\n        this.portalProviderAPI.render(component, this.domRef, this.hasContext);\r\n    };\r\n    ReactNodeView.prototype.createDomRef = function () {\r\n        return this.node.isInline\r\n            ? document.createElement('span')\r\n            : document.createElement('div');\r\n    };\r\n    ReactNodeView.prototype.getContentDOM = function () {\r\n        return undefined;\r\n    };\r\n    ReactNodeView.prototype._handleRef = function (node) {\r\n        var contentDOM = this.contentDOMWrapper || this.contentDOM;\r\n        // move the contentDOM node inside the inner reference after rendering\r\n        if (node && contentDOM && !node.contains(contentDOM)) {\r\n            node.appendChild(contentDOM);\r\n        }\r\n    };\r\n    ReactNodeView.prototype.render = function (props, forwardRef) {\r\n        return this.reactComponent ? (React.createElement(this.reactComponent, __assign({ view: this.view, getPos: this.getPos, node: this.node, forwardRef: forwardRef }, props))) : null;\r\n    };\r\n    ReactNodeView.prototype.update = function (node, _decorations, validUpdate) {\r\n        var _this = this;\r\n        if (validUpdate === void 0) { validUpdate = function () { return true; }; }\r\n        // @see https://github.com/ProseMirror/prosemirror/issues/648\r\n        var isValidUpdate = this.node.type === node.type && validUpdate(this.node, node);\r\n        if (!isValidUpdate) {\r\n            return false;\r\n        }\r\n        if (this.domRef && !this.node.sameMarkup(node)) {\r\n            this.setDomAttrs(node, this.domRef);\r\n        }\r\n        // View should not process a re-render if this is false.\r\n        // We dont want to destroy the view, so we return true.\r\n        if (!this.viewShouldUpdate(node)) {\r\n            this.node = node;\r\n            return true;\r\n        }\r\n        this.node = node;\r\n        this.renderReactComponent(function () {\r\n            return _this.render(_this.reactComponentProps, _this.handleRef);\r\n        });\r\n        return true;\r\n    };\r\n    ReactNodeView.prototype.viewShouldUpdate = function (nextNode) {\r\n        if (this._viewShouldUpdate) {\r\n            return this._viewShouldUpdate(nextNode);\r\n        }\r\n        return true;\r\n    };\r\n    /**\r\n     * Copies the attributes from a ProseMirror Node to a DOM node.\r\n     * @param node The Prosemirror Node from which to source the attributes\r\n     */\r\n    ReactNodeView.prototype.setDomAttrs = function (node, element) {\r\n        Object.keys(node.attrs || {}).forEach(function (attr) {\r\n            element.setAttribute(attr, node.attrs[attr]);\r\n        });\r\n    };\r\n    Object.defineProperty(ReactNodeView.prototype, \"dom\", {\r\n        get: function () {\r\n            return this.domRef;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    ReactNodeView.prototype.destroy = function () {\r\n        if (!this.domRef) {\r\n            return;\r\n        }\r\n        this.portalProviderAPI.remove(this.domRef);\r\n        this.domRef = undefined;\r\n        this.contentDOM = undefined;\r\n    };\r\n    ReactNodeView.fromComponent = function (component, portalProviderAPI, eventDispatcher, props, viewShouldUpdate) {\r\n        return function (node, view, getPos) {\r\n            return new ReactNodeView(node, view, getPos, portalProviderAPI, eventDispatcher, props, component, false, viewShouldUpdate).init();\r\n        };\r\n    };\r\n    return ReactNodeView;\r\n}());\n\nvar BlockQuote = forwardRef(function (props, ref) {\r\n    return (React.createElement(StyledBlockQuote, { ref: ref }));\r\n});\r\nvar StyledBlockQuote = styled.blockquote(templateObject_1 || (templateObject_1 = __makeTemplateObject([\"\\n  box-sizing: border-box;\\n  color: #6a737d;\\n  padding: 0 1em;\\n  border-left: 4px solid #dfe2e5;\\n  margin: 0.2rem 0 0 0;\\n  margin-right: 0;\\n\\n  [dir='rtl'] & {\\n    padding-left: 0;\\n    padding-right: 4px;\\n  }\\n\\n  &:first-child {\\n    margin-top: 0;\\n  }\\n\\n  &::before {\\n    content: '';\\n  }\\n\\n  &::after {\\n    content: none;\\n  }\\n\\n  & p {\\n    display: block;\\n  }\\n\\n  & table,\\n  & table:last-child {\\n    display: inline-table;\\n  }\\n\"], [\"\\n  box-sizing: border-box;\\n  color: #6a737d;\\n  padding: 0 1em;\\n  border-left: 4px solid #dfe2e5;\\n  margin: 0.2rem 0 0 0;\\n  margin-right: 0;\\n\\n  [dir='rtl'] & {\\n    padding-left: 0;\\n    padding-right: 4px;\\n  }\\n\\n  &:first-child {\\n    margin-top: 0;\\n  }\\n\\n  &::before {\\n    content: '';\\n  }\\n\\n  &::after {\\n    content: none;\\n  }\\n\\n  & p {\\n    display: block;\\n  }\\n\\n  & table,\\n  & table:last-child {\\n    display: inline-table;\\n  }\\n\"])));\r\nvar templateObject_1;\n\nvar BlockQuoteView = /** @class */ (function (_super) {\r\n    __extends(BlockQuoteView, _super);\r\n    function BlockQuoteView() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    BlockQuoteView.prototype.getContentDOM = function () {\r\n        var dom = document.createElement('div');\r\n        dom.classList.add(this.node.type.name + \"-dom-wrapper\");\r\n        return {\r\n            dom: dom\r\n        };\r\n    };\r\n    BlockQuoteView.prototype.render = function (_props, forwardRef) {\r\n        return (React.createElement(BlockQuote, { ref: forwardRef }));\r\n    };\r\n    return BlockQuoteView;\r\n}(ReactNodeView));\r\nfunction blockQuoteNodeView(portalProviderAPI, eventDispatcher, \r\n// providerFactory: ProviderFactory,\r\noptions) {\r\n    return function (node, view, getPos) {\r\n        return new BlockQuoteView(node, view, getPos, portalProviderAPI, eventDispatcher, {\r\n            // providerFactory,\r\n            options: options,\r\n        }).init();\r\n    };\r\n}\n\nvar pluginKey = new PluginKey('blockQuotePlugin');\n\nfunction blockQuotePluginFactory(\r\n// dispatch: Dispatch,\r\n// providerFactory: ProviderFactory,\r\nportalProviderAPI, eventDispatcher, options) {\r\n    return new Plugin({\r\n        state: {\r\n            init: function (_, state) {\r\n                return {\r\n                    count: 0\r\n                };\r\n            },\r\n            apply: function (tr, pluginState, _oldState, newState) {\r\n                if (tr.docChanged || tr.selectionSet) {\r\n                    var selection = newState.selection;\r\n                    // const node = findCodeBlock(newState, selection);\r\n                    var newPluginState = __assign(__assign({}, pluginState), { count: pluginState.count + 1 });\r\n                    return newPluginState;\r\n                }\r\n                // const meta = tr.getMeta(pluginKey);\r\n                // if (meta && meta.type === ACTIONS.SET_COPIED_TO_CLIPBOARD) {\r\n                //   return {\r\n                //     ...pluginState,\r\n                //     contentCopied: meta.data,\r\n                //   };\r\n                // }\r\n                return pluginState;\r\n            },\r\n        },\r\n        key: pluginKey,\r\n        props: {\r\n            nodeViews: {\r\n                blockquote: blockQuoteNodeView(portalProviderAPI, eventDispatcher, options),\r\n            },\r\n        },\r\n    });\r\n}\n\nvar result = {\r\n    mac: false,\r\n    ie: false,\r\n    ie_version: 0,\r\n    gecko: false,\r\n    chrome: false,\r\n    chrome_version: 0,\r\n    android: false,\r\n    ios: false,\r\n    webkit: false,\r\n};\r\nif (typeof navigator !== 'undefined') {\r\n    var ieEdge = /Edge\\/(\\d+)/.exec(navigator.userAgent);\r\n    var ieUpTo10 = /MSIE \\d/.test(navigator.userAgent);\r\n    var ie11up = /Trident\\/(?:[7-9]|\\d{2,})\\..*rv:(\\d+)/.exec(navigator.userAgent);\r\n    result.mac = /Mac/.test(navigator.platform);\r\n    var ie = (result.ie = !!(ieUpTo10 || ie11up || ieEdge));\r\n    result.ie_version = ieUpTo10\r\n        ? document.documentMode || 6\r\n        : ie11up\r\n            ? +ie11up[1]\r\n            : ieEdge\r\n                ? +ieEdge[1]\r\n                : null;\r\n    result.gecko = !ie && /gecko\\/\\d/i.test(navigator.userAgent);\r\n    result.chrome = !ie && /Chrome\\//.test(navigator.userAgent);\r\n    result.chrome_version = parseInt((navigator.userAgent.match(/Chrome\\/(\\d{2})/) || [])[1], 10);\r\n    result.android = /Android \\d/.test(navigator.userAgent);\r\n    result.ios =\r\n        !ie &&\r\n            /AppleWebKit/.test(navigator.userAgent) &&\r\n            /Mobile\\/\\w+/.test(navigator.userAgent);\r\n    result.webkit =\r\n        !ie &&\r\n            !!document.documentElement &&\r\n            'WebkitAppearance' in document.documentElement.style;\r\n}\r\nvar browser = result;\r\nfunction getUAPrefix() {\r\n    if (browser.chrome) {\r\n        return 'ua-chrome';\r\n    }\r\n    else if (browser.ie) {\r\n        return 'ua-ie';\r\n    }\r\n    else if (browser.gecko) {\r\n        return 'ua-firefox';\r\n    }\r\n    return '';\r\n}\n\nvar toggleBold = makeKeyMapWithCommon('Bold', 'Mod-b');\r\nvar toggleItalic = makeKeyMapWithCommon('Italic', 'Mod-i');\r\nvar toggleUnderline = makeKeyMapWithCommon('Underline', 'Mod-u');\r\nvar toggleCode = makeKeyMapWithCommon('Code', 'Mod-Shift-m');\r\nvar setNormalText = makeKeyMapWithCommon('Normal text', 'Mod-Alt-0');\r\nvar toggleHeading1 = makeKeyMapWithCommon('Heading 1', 'Mod-Alt-1');\r\n// export const toggleBlockQuote = makeKeymap('Quote', '', 'Cmd-Alt-9');\r\nvar toggleBlockQuote = makeKeyMapWithCommon('Quote', 'Ctrl-b');\r\nvar insertNewLine = makeKeyMapWithCommon('Insert new line', 'Shift-Enter');\r\nvar shiftBackspace = makeKeyMapWithCommon('Shift Backspace', 'Shift-Backspace');\r\nvar splitCodeBlock = makeKeyMapWithCommon('Split code block', 'Enter');\r\nvar undo = makeKeyMapWithCommon('Undo', 'Mod-z');\r\nvar moveUp = makeKeyMapWithCommon('Move up', 'ArrowUp');\r\nvar moveDown = makeKeyMapWithCommon('Move down', 'ArrowDown');\r\nvar moveLeft = makeKeyMapWithCommon('Move left', 'ArrowLeft');\r\nvar moveRight = makeKeyMapWithCommon('Move right', 'ArrowRight');\r\nvar backspace = makeKeyMapWithCommon('Backspace', 'Backspace');\r\nvar deleteKey = makeKeyMapWithCommon('Delete', 'Delete');\r\nvar space = makeKeyMapWithCommon('Space', 'Space');\r\nvar escape = makeKeyMapWithCommon('Escape', 'Escape');\r\nvar nextCell = makeKeyMapWithCommon('Next cell', 'Tab');\r\nvar previousCell = makeKeyMapWithCommon('Previous cell', 'Shift-Tab');\r\nvar toggleTable = makeKeyMapWithCommon('Table', 'Shift-Alt-t');\r\nvar cut = makeKeyMapWithCommon('Cut', 'Mod-x');\r\nvar copy = makeKeyMapWithCommon('Copy', 'Mod-c');\r\nvar paste = makeKeyMapWithCommon('Paste', 'Mod-v');\r\nvar altPaste = makeKeyMapWithCommon('Paste', 'Mod-Shift-v');\r\nvar find = makeKeyMapWithCommon('Find', 'Mod-f');\r\nvar arrowKeysMap = {\r\n    // for reference: https://wincent.com/wiki/Unicode_representations_of_modifier_keys\r\n    ARROWLEFT: '\\u2190',\r\n    ARROWRIGHT: '\\u2192',\r\n    ARROWUP: '\\u2191',\r\n    ARROWDOWN: '\\u2193',\r\n};\r\nvar TooltipShortcut = styled.span(templateObject_1$1 || (templateObject_1$1 = __makeTemplateObject([\"\\n  border-radius: 2px;\\n  background-color: blue;\\n  padding: 0 2px;\\n\"], [\"\\n  border-radius: 2px;\\n  background-color: blue;\\n  padding: 0 2px;\\n\"])));\r\nfunction formatShortcut(keymap) {\r\n    var shortcut;\r\n    if (browser.mac) {\r\n        // for reference: https://wincent.com/wiki/Unicode_representations_of_modifier_keys\r\n        shortcut = keymap.mac\r\n            .replace(/Cmd/i, '\\u2318')\r\n            .replace(/Shift/i, '\\u21E7')\r\n            .replace(/Ctrl/i, '\\u2303')\r\n            .replace(/Alt/i, '\\u2325')\r\n            .replace(/Backspace/i, '\\u232B')\r\n            .replace(/Enter/i, '\\u23CE');\r\n    }\r\n    else {\r\n        shortcut = keymap.windows.replace(/Backspace/i, '\\u232B');\r\n    }\r\n    var keys = shortcut.split('-');\r\n    var lastKey = keys[keys.length - 1];\r\n    if (lastKey.length === 1) {\r\n        // capitalise single letters\r\n        lastKey = lastKey.toUpperCase();\r\n    }\r\n    keys[keys.length - 1] = arrowKeysMap[lastKey.toUpperCase()] || lastKey;\r\n    return keys.join(browser.mac ? '' : '+');\r\n}\r\nvar ToolTipContent = React.memo(function (_a) {\r\n    var description = _a.description, shortcutOverride = _a.shortcutOverride, keymap = _a.keymap;\r\n    var shortcut = shortcutOverride || (keymap && formatShortcut(keymap));\r\n    return shortcut || description ? (React.createElement(React.Fragment, null,\r\n        description,\r\n        shortcut && description && '\\u00A0',\r\n        shortcut && React.createElement(TooltipShortcut, null, shortcut))) : null;\r\n});\r\nfunction makeKeymap(description, windows, mac, common) {\r\n    return {\r\n        description: description,\r\n        windows: windows,\r\n        mac: mac,\r\n        common: common,\r\n    };\r\n}\r\nfunction makeKeyMapWithCommon(description, common) {\r\n    var windows = common.replace(/Mod/i, 'Ctrl');\r\n    var mac = common.replace(/Mod/i, 'Cmd');\r\n    return makeKeymap(description, windows, mac, common);\r\n}\r\nfunction bindKeymapWithCommand(shortcut, cmd, keymap) {\r\n    var oldCmd = keymap[shortcut];\r\n    var newCmd = cmd;\r\n    if (keymap[shortcut]) {\r\n        newCmd = function (state, dispatch, editorView) {\r\n            return oldCmd(state, dispatch) || cmd(state, dispatch, editorView);\r\n        };\r\n    }\r\n    keymap[shortcut] = newCmd;\r\n}\r\nvar templateObject_1$1;\n\nvar createNewBlockQuote = function () { return function (state, dispatch) {\r\n    var _a = state.selection, $from = _a.$from, $to = _a.$to;\r\n    var blockquote = state.schema.nodes.blockquote;\r\n    var empty = blockquote.createAndFill();\r\n    var endOfBlock = $from.end();\r\n    if (empty && dispatch) {\r\n        var tr = state.tr.insert(endOfBlock + 1, empty);\r\n        dispatch(tr);\r\n    }\r\n    return false;\r\n}; };\n\nfunction keymapPlugin() {\r\n    var list = {};\r\n    bindKeymapWithCommand(toggleBlockQuote.common, createNewBlockQuote(), list);\r\n    return keymap(list);\r\n}\n\nvar blockQuotePlugin = function (options) {\r\n    if (options === void 0) { options = {}; }\r\n    return ({\r\n        name: 'blockquote',\r\n        nodes: function () {\r\n            return [{ name: 'blockquote', node: blockquote }];\r\n        },\r\n        pmPlugins: function () {\r\n            var plugins = [\r\n                {\r\n                    name: 'blockquote',\r\n                    plugin: function (_a) {\r\n                        var \r\n                        // providerFactory,\r\n                        // dispatch,\r\n                        portalProviderAPI = _a.portalProviderAPI, eventDispatcher = _a.eventDispatcher;\r\n                        return blockQuotePluginFactory(\r\n                        // dispatch,\r\n                        // providerFactory,\r\n                        portalProviderAPI, eventDispatcher, options);\r\n                    },\r\n                },\r\n                { name: 'blockquoteKeyMap', plugin: function () { return keymapPlugin(); } },\r\n            ];\r\n            return plugins;\r\n        },\r\n        pluginsOptions: {\r\n        // quickInsert: ({ formatMessage }) => [\r\n        //   {\r\n        // id: 'blockquote',\r\n        // title: formatMessage(messages.blockquote),\r\n        // description: formatMessage(messages.codeblockDescription),\r\n        // keywords: ['code block'],\r\n        // priority: 700,\r\n        // keyshortcut: '```',\r\n        // icon: () => <IconCode label={formatMessage(messages.blockquote)} />,\r\n        // action(insert, state) {\r\n        //   const schema = state.schema;\r\n        //   const tr = insert(schema.nodes.blockquote.createChecked());\r\n        //   return addAnalytics(state, tr, {\r\n        //     action: ACTION.INSERTED,\r\n        //     actionSubject: ACTION_SUBJECT.DOCUMENT,\r\n        //     actionSubjectId: ACTION_SUBJECT_ID.CODE_BLOCK,\r\n        //     attributes: { inputMethod: INPUT_METHOD.QUICK_INSERT },\r\n        //     eventType: EVENT_TYPE.TRACK,\r\n        //   });\r\n        // },\r\n        //   },\r\n        // ],\r\n        // floatingToolbar: getToolbarConfig(options.allowCopyToClipboard),\r\n        },\r\n    });\r\n};\n\nvar Preset = /** @class */ (function () {\r\n    function Preset() {\r\n        this.plugins = [];\r\n    }\r\n    Preset.prototype.add = function (plugin) {\r\n        this.plugins.push(plugin);\r\n        return this;\r\n    };\r\n    Preset.prototype.has = function (plugin) {\r\n        return this.plugins.some(function (pluginPreset) {\r\n            if (Array.isArray(pluginPreset)) {\r\n                return pluginPreset[0] === plugin;\r\n            }\r\n            return pluginPreset === plugin;\r\n        });\r\n    };\r\n    Preset.prototype.getEditorPlugins = function (excludes) {\r\n        var editorPlugins = this.processEditorPlugins();\r\n        return this.removeExcludedPlugins(editorPlugins, excludes);\r\n    };\r\n    Preset.prototype.processEditorPlugins = function () {\r\n        var cache = new Map();\r\n        this.plugins.forEach(function (pluginEntry) {\r\n            if (Array.isArray(pluginEntry)) {\r\n                var fn = pluginEntry[0], options = pluginEntry[1];\r\n                cache.set(fn, options);\r\n            }\r\n            else {\r\n                /**\r\n                 * Prevent usage of same plugin twice without override.\r\n                 * [\r\n                 *  plugin1,\r\n                 *  [plugin1, { option1: value }],\r\n                 *  plugin1, // This will throw\r\n                 * ]\r\n                 */\r\n                if (cache.has(pluginEntry) && cache.get(pluginEntry) === undefined) {\r\n                    throw new Error(pluginEntry + \" is already included!\");\r\n                }\r\n                cache.set(pluginEntry, undefined);\r\n            }\r\n        });\r\n        var plugins = [];\r\n        cache.forEach(function (options, fn) {\r\n            plugins.push(fn(options));\r\n        });\r\n        return plugins;\r\n    };\r\n    Preset.prototype.removeExcludedPlugins = function (plugins, excludes) {\r\n        if (excludes) {\r\n            return plugins.filter(function (plugin) { return !plugin || !excludes.has(plugin.name); });\r\n        }\r\n        return plugins;\r\n    };\r\n    return Preset;\r\n}());\n\n/**\r\n * Maps EditorProps to EditorPlugins\r\n */\r\nfunction createPluginsList(props, prevProps) {\r\n    var preset = new Preset();\r\n    preset.add(basePlugin);\r\n    preset.add(blockQuotePlugin);\r\n    return preset.getEditorPlugins();\r\n}\n\nfunction createSchema(editorConfig) {\r\n    var createdMarks = fixExcludes(editorConfig.marks.sort(sortByOrder('marks')).reduce(function (acc, mark) {\r\n        acc[mark.name] = mark.mark;\r\n        return acc;\r\n    }, {}));\r\n    var createdNodes = editorConfig.nodes.sort(sortByOrder('nodes')).reduce(function (acc, node) {\r\n        acc[node.name] = node.node;\r\n        return acc;\r\n    }, {});\r\n    return new Schema({ nodes: createdNodes, marks: createdMarks });\r\n}\n\n// interface IState {\r\n//   editorState: EditorState\r\n//   editorView?: EditorView\r\n//   eventDispatcher: EventDispatcher\r\n// }\r\n/**\r\n * The editor React component which is a class instead of a function component\r\n * since the exhaustive-deps linting rule drives me nuts as it requires adding everything\r\n * to the useEffect dependencies. Even adding values that should never change and if they did,\r\n * there should be an error instead of rerunning the useEffect hook.\r\n */\r\nvar ReactEditorView = /** @class */ (function (_super) {\r\n    __extends(ReactEditorView, _super);\r\n    function ReactEditorView(props) {\r\n        var _this = _super.call(this, props) || this;\r\n        // ProseMirror is instantiated prior to the initial React render cycle,\r\n        // so we allow transactions by default, to avoid discarding the initial one.\r\n        _this.canDispatchTransactions = true;\r\n        _this.createEditorState = function (options) {\r\n            if (_this.editorView) {\r\n                /**\r\n                 * There's presently a number of issues with changing the schema of a\r\n                 * editor inflight. A significant issue is that we lose the ability\r\n                 * to keep track of a user's history as the internal plugin state\r\n                 * keeps a list of Steps to undo/redo (which are tied to the schema).\r\n                 * Without a good way to do work around this, we prevent this for now.\r\n                 */\r\n                // eslint-disable-next-line no-console\r\n                console.warn('The editor does not support changing the schema dynamically.');\r\n                return _this.editorState;\r\n            }\r\n            _this.config = processPluginsList(_this.getPlugins(options.props.editorProps, undefined));\r\n            var schema = createSchema(_this.config);\r\n            var plugins = createPMPlugins({\r\n                schema: schema,\r\n                dispatch: _this.dispatch,\r\n                editorConfig: _this.config,\r\n                eventDispatcher: _this.eventDispatcher,\r\n                portalProviderAPI: _this.props.portalProviderAPI,\r\n            });\r\n            var doc;\r\n            // Workaround for ED-3507: When media node is the last element, scrollIntoView throws an error\r\n            var patchedSelection =  undefined;\r\n            return EditorState.create({\r\n                schema: schema,\r\n                plugins: plugins,\r\n                doc: doc,\r\n                selection: patchedSelection,\r\n            });\r\n        };\r\n        _this.reconfigureState = function (props) {\r\n            if (!_this.editorView) {\r\n                return;\r\n            }\r\n            // We cannot currently guarantee when all the portals will have re-rendered during a reconfigure\r\n            // so we blur here to stop ProseMirror from trying to apply selection to detached nodes or\r\n            // nodes that haven't been re-rendered to the document yet.\r\n            if (_this.editorView.dom instanceof HTMLElement && _this.editorView.hasFocus()) {\r\n                _this.editorView.dom.blur();\r\n            }\r\n            _this.config = processPluginsList(_this.getPlugins(props.editorProps, _this.props.editorProps));\r\n            var state = _this.editorState;\r\n            var plugins = createPMPlugins({\r\n                schema: state.schema,\r\n                dispatch: _this.dispatch,\r\n                editorConfig: _this.config,\r\n                eventDispatcher: _this.eventDispatcher,\r\n                portalProviderAPI: props.portalProviderAPI,\r\n            });\r\n            var newState = state.reconfigure({ plugins: plugins });\r\n            // need to update the state first so when the view builds the nodeviews it is\r\n            // using the latest plugins\r\n            _this.editorView.updateState(newState);\r\n            return _this.editorView.update(__assign(__assign({}, _this.editorView.props), { state: newState }));\r\n        };\r\n        _this.dispatchTransaction = function (transaction) {\r\n            if (!_this.editorView) {\r\n                return;\r\n            }\r\n             startMeasure(\"\\uD83E\\uDD89 ReactEditorView::dispatchTransaction\");\r\n            var nodes = findChangedNodesFromTransaction(transaction);\r\n            var changedNodesValid = validateNodes(nodes);\r\n            if (changedNodesValid) {\r\n                var oldEditorState = _this.editorView.state;\r\n                // go ahead and update the state now we know the transaction is good\r\n                 startMeasure(\"\\uD83E\\uDD89 EditorView::state::apply\");\r\n                var editorState = _this.editorView.state.apply(transaction);\r\n                 stopMeasure(\"\\uD83E\\uDD89 EditorView::state::apply\");\r\n                if (editorState === oldEditorState) {\r\n                    return;\r\n                }\r\n                 startMeasure(\"\\uD83E\\uDD89 EditorView::updateState\");\r\n                _this.editorView.updateState(editorState);\r\n                 stopMeasure(\"\\uD83E\\uDD89 EditorView::updateState\");\r\n                _this.editorState = editorState;\r\n            }\r\n            else {\r\n                var invalidNodes = nodes\r\n                    .filter(function (node) { return !validNode(node); })\r\n                    .map(function (node) { return getDocStructure(node); });\r\n                {\r\n                    console.error('Invalid nodes in transaction');\r\n                    console.log(transaction);\r\n                    console.log(invalidNodes);\r\n                }\r\n            }\r\n            \r\n                stopMeasure(\"\\uD83E\\uDD89 ReactEditorView::dispatchTransaction\", function () { });\r\n        };\r\n        _this.getDirectEditorProps = function (state) {\r\n            return {\r\n                state: state || _this.editorState,\r\n                dispatchTransaction: function (tr) {\r\n                    // Block stale transactions:\r\n                    // Prevent runtime exeptions from async transactions that would attempt to\r\n                    // update the DOM after React has unmounted the Editor.\r\n                    if (_this.canDispatchTransactions) {\r\n                        _this.dispatchTransaction(tr);\r\n                    }\r\n                },\r\n                // Disables the contentEditable attribute of the editor if the editor is disabled\r\n                editable: function (_state) { return true; },\r\n                attributes: { 'data-gramm': 'false' },\r\n            };\r\n        };\r\n        _this.handleEditorViewRef = function (node) {\r\n            if (!_this.editorView && node) {\r\n                _this.createEditorView(node);\r\n                var view = _this.editorView;\r\n                if (_this.props.editorProps.shouldFocus) {\r\n                    _this.focusTimeoutId = handleEditorFocus(view);\r\n                }\r\n                // Force React to re-render so consumers get a reference to the editor view\r\n                _this.forceUpdate();\r\n            }\r\n            else if (_this.editorView && !node) {\r\n                // When the appearance is changed, React will call handleEditorViewRef with node === null\r\n                // to destroy the old EditorView, before calling this method again with node === div to\r\n                // create the new EditorView\r\n                // this.props.onEditorDestroyed({\r\n                //   view: this.editorView,\r\n                //   config: this.config,\r\n                //   eventDispatcher: this.eventDispatcher,\r\n                // });\r\n                _this.editorView.destroy(); // Destroys the dom node & all node views\r\n                _this.editorView = undefined;\r\n            }\r\n        };\r\n        _this.editor = (React.createElement(\"div\", { className: getUAPrefix(), key: \"ProseMirror\", ref: _this.handleEditorViewRef }));\r\n        _this.eventDispatcher = new EventDispatcher();\r\n        _this.dispatch = createDispatch(_this.eventDispatcher);\r\n        _this.editorState = _this.createEditorState({\r\n            props: props,\r\n            replaceDoc: true,\r\n        });\r\n        return _this;\r\n    }\r\n    // componentDidMount() {\r\n    //   this.createEditorView(this.editorRef.current)\r\n    //   this.forceUpdate()\r\n    // }\r\n    // shouldComponentUpdate() {\r\n    //   return false\r\n    // }\r\n    ReactEditorView.prototype.componentDidMount = function () {\r\n        // Transaction dispatching is already enabled by default prior to\r\n        // mounting, but we reset it here, just in case the editor view\r\n        // instance is ever recycled (mounted again after unmounting) with\r\n        // the same key.\r\n        // Although storing mounted state is an anti-pattern in React,\r\n        // we do so here so that we can intercept and abort asynchronous\r\n        // ProseMirror transactions when a dismount is imminent.\r\n        this.canDispatchTransactions = true;\r\n    };\r\n    /**\r\n     * Clean up any non-PM resources when the editor is unmounted\r\n     */\r\n    ReactEditorView.prototype.componentWillUnmount = function () {\r\n        // We can ignore any transactions from this point onwards.\r\n        // This serves to avoid potential runtime exceptions which could arise\r\n        // from an async dispatched transaction after it's unmounted.\r\n        // this.canDispatchTransactions = false;\r\n        this.eventDispatcher.destroy();\r\n        clearTimeout(this.focusTimeoutId);\r\n        if (this.editorView) {\r\n            // Destroy the state if the Editor is being unmounted\r\n            var editorState_1 = this.editorView.state;\r\n            editorState_1.plugins.forEach(function (plugin) {\r\n                var state = plugin.getState(editorState_1);\r\n                if (state && state.destroy) {\r\n                    state.destroy();\r\n                }\r\n            });\r\n        }\r\n        // this.editorView will be destroyed when React unmounts in handleEditorViewRef\r\n    };\r\n    // Helper to allow tests to inject plugins directly\r\n    ReactEditorView.prototype.getPlugins = function (editorProps, prevEditorProps) {\r\n        return createPluginsList();\r\n    };\r\n    ReactEditorView.prototype.createEditorView = function (element) {\r\n        // Creates the editor-view from this.editorState. If an editor has been mounted\r\n        // previously, this will contain the previous state of the editor.\r\n        this.editorView = new EditorView({ mount: element }, this.getDirectEditorProps());\r\n        applyDevTools(this.editorView);\r\n    };\r\n    ReactEditorView.prototype.render = function () {\r\n        return this.props.render\r\n            ? this.props.render({\r\n                editor: this.editor,\r\n                view: this.editorView,\r\n                config: this.config,\r\n                eventDispatcher: this.eventDispatcher,\r\n            })\r\n            : this.editor;\r\n    };\r\n    return ReactEditorView;\r\n}(React.Component));\r\nfunction handleEditorFocus(view) {\r\n    if (view.hasFocus()) {\r\n        return;\r\n    }\r\n    return window.setTimeout(function () {\r\n        view.focus();\r\n    }, 0);\r\n}\n\nvar EditorActions = /** @class */ (function () {\r\n    function EditorActions() {\r\n        this.listeners = [];\r\n    }\r\n    EditorActions.from = function (view, eventDispatcher, transformer) {\r\n        var editorActions = new EditorActions();\r\n        editorActions._privateRegisterEditor(view, eventDispatcher, transformer);\r\n        return editorActions;\r\n    };\r\n    //#region private\r\n    // This method needs to be public for context based helper components.\r\n    EditorActions.prototype._privateGetEditorView = function () {\r\n        return this.editorView;\r\n    };\r\n    EditorActions.prototype._privateGetEventDispatcher = function () {\r\n        return this.eventDispatcher;\r\n    };\r\n    // This method needs to be public for EditorContext component.\r\n    EditorActions.prototype._privateRegisterEditor = function (editorView, eventDispatcher, contentTransformer) {\r\n        this.contentTransformer = contentTransformer;\r\n        this.eventDispatcher = eventDispatcher;\r\n        if (!this.editorView && editorView) {\r\n            this.editorView = editorView;\r\n            this.listeners.forEach(function (cb) { return cb(editorView, eventDispatcher); });\r\n        }\r\n        else if (this.editorView !== editorView) {\r\n            throw new Error(\"Editor has already been registered! It's not allowed to re-register editor with the new Editor instance.\");\r\n        }\r\n        if (this.contentTransformer) {\r\n            this.contentEncode = this.contentTransformer.encode.bind(this.contentTransformer);\r\n        }\r\n    };\r\n    // This method needs to be public for EditorContext component.\r\n    EditorActions.prototype._privateUnregisterEditor = function () {\r\n        this.editorView = undefined;\r\n        this.contentTransformer = undefined;\r\n        this.contentEncode = undefined;\r\n        this.eventDispatcher = undefined;\r\n    };\r\n    EditorActions.prototype._privateSubscribe = function (cb) {\r\n        // If editor is registered and somebody is trying to add a listener,\r\n        // just call it first.\r\n        if (this.editorView && this.eventDispatcher) {\r\n            cb(this.editorView, this.eventDispatcher);\r\n        }\r\n        this.listeners.push(cb);\r\n    };\r\n    EditorActions.prototype._privateUnsubscribe = function (cb) {\r\n        this.listeners = this.listeners.filter(function (c) { return c !== cb; });\r\n    };\r\n    //#endregion\r\n    EditorActions.prototype.focus = function () {\r\n        if (!this.editorView || this.editorView.hasFocus()) {\r\n            return false;\r\n        }\r\n        this.editorView.focus();\r\n        this.editorView.dispatch(this.editorView.state.tr.scrollIntoView());\r\n        return true;\r\n    };\r\n    EditorActions.prototype.blur = function () {\r\n        if (!this.editorView || !this.editorView.hasFocus()) {\r\n            return false;\r\n        }\r\n        this.editorView.dom.blur();\r\n        return true;\r\n    };\r\n    EditorActions.prototype.clear = function () {\r\n        if (!this.editorView) {\r\n            return false;\r\n        }\r\n        var editorView = this.editorView;\r\n        var state = editorView.state;\r\n        var tr = editorView.state.tr\r\n            .setSelection(TextSelection.create(state.doc, 0, state.doc.nodeSize - 2))\r\n            .deleteSelection();\r\n        editorView.dispatch(tr);\r\n        return true;\r\n    };\r\n    // async __temporaryFixForConfigPanel() {\r\n    //   const { editorView } = this;\r\n    //   if (!editorView) {\r\n    //     return;\r\n    //   }\r\n    //   __temporaryFixForConfigPanel(editorView);\r\n    // }\r\n    EditorActions.prototype.appendText = function (text) {\r\n        if (!this.editorView || !text) {\r\n            return false;\r\n        }\r\n        var state = this.editorView.state;\r\n        var lastChild = state.doc.lastChild;\r\n        if (lastChild && lastChild.type !== state.schema.nodes.paragraph) {\r\n            return false;\r\n        }\r\n        var tr = state.tr.insertText(text).scrollIntoView();\r\n        this.editorView.dispatch(tr);\r\n        return true;\r\n    };\r\n    return EditorActions;\r\n}());\n\nvar EditorContext = /** @class */ (function (_super) {\r\n    __extends(EditorContext, _super);\r\n    function EditorContext(props) {\r\n        var _this = _super.call(this, props) || this;\r\n        _this.editorActions = props.editorActions || new EditorActions();\r\n        return _this;\r\n    }\r\n    EditorContext.prototype.getChildContext = function () {\r\n        return {\r\n            editorActions: this.editorActions,\r\n        };\r\n    };\r\n    EditorContext.prototype.render = function () {\r\n        return React.Children.only(this.props.children);\r\n    };\r\n    EditorContext.childContextTypes = {\r\n        editorActions: PropTypes.object,\r\n    };\r\n    return EditorContext;\r\n}(React.Component));\n\nvar PortalProviderAPI = /** @class */ (function (_super) {\r\n    __extends(PortalProviderAPI, _super);\r\n    function PortalProviderAPI() {\r\n        var _this = _super.call(this) || this;\r\n        _this.portals = new Map();\r\n        _this.setContext = function (context) {\r\n            _this.context = context;\r\n        };\r\n        return _this;\r\n    }\r\n    PortalProviderAPI.prototype.render = function (children, container, hasReactContext) {\r\n        if (hasReactContext === void 0) { hasReactContext = false; }\r\n        this.portals.set(container, { children: children, hasReactContext: hasReactContext });\r\n        var wrappedChildren = children();\r\n        unstable_renderSubtreeIntoContainer(this.context, wrappedChildren, container);\r\n    };\r\n    // TODO: until https://product-fabric.atlassian.net/browse/ED-5013\r\n    // we (unfortunately) need to re-render to pass down any updated context.\r\n    // selectively do this for nodeviews that opt-in via `hasReactContext`\r\n    PortalProviderAPI.prototype.forceUpdate = function () {\r\n        var _this = this;\r\n        this.portals.forEach(function (portal, container) {\r\n            if (!portal.hasReactContext) {\r\n                return;\r\n            }\r\n            var wrappedChildren = portal.children();\r\n            unstable_renderSubtreeIntoContainer(_this.context, wrappedChildren, container);\r\n        });\r\n    };\r\n    PortalProviderAPI.prototype.remove = function (container) {\r\n        this.portals.delete(container);\r\n        // There is a race condition that can happen caused by Prosemirror vs React,\r\n        // where Prosemirror removes the container from the DOM before React gets\r\n        // around to removing the child from the container\r\n        // This will throw a NotFoundError: The node to be removed is not a child of this node\r\n        // Both Prosemirror and React remove the elements asynchronously, and in edge\r\n        // cases Prosemirror beats React\r\n        try {\r\n            unmountComponentAtNode(container);\r\n        }\r\n        catch (error) {\r\n            console.warn('Race condition in PortalProviderAPI where PM removed DOM node before React unmounted it');\r\n        }\r\n    };\r\n    return PortalProviderAPI;\r\n}(EventDispatcher));\n\nvar PortalProvider = /** @class */ (function (_super) {\r\n    __extends(PortalProvider, _super);\r\n    function PortalProvider(props) {\r\n        var _this = _super.call(this, props) || this;\r\n        _this.portalProviderAPI = new PortalProviderAPI();\r\n        return _this;\r\n    }\r\n    PortalProvider.prototype.render = function () {\r\n        return this.props.render(this.portalProviderAPI);\r\n    };\r\n    PortalProvider.prototype.componentDidUpdate = function () {\r\n        this.portalProviderAPI.forceUpdate();\r\n    };\r\n    PortalProvider.displayName = 'PortalProvider';\r\n    return PortalProvider;\r\n}(React.Component));\n\nvar PortalRenderer = /** @class */ (function (_super) {\r\n    __extends(PortalRenderer, _super);\r\n    function PortalRenderer(props) {\r\n        var _this = _super.call(this, props) || this;\r\n        _this.handleUpdate = function (portals) { return _this.setState({ portals: portals }); };\r\n        props.portalProviderAPI.setContext(_this);\r\n        props.portalProviderAPI.on('update', _this.handleUpdate);\r\n        _this.state = { portals: new Map() };\r\n        return _this;\r\n    }\r\n    PortalRenderer.prototype.render = function () {\r\n        var portals = this.state.portals;\r\n        return (React.createElement(React.Fragment, null, Array.from(portals.entries()).map(function (_a) {\r\n            var container = _a[0], children = _a[1];\r\n            return createPortal(children, container);\r\n        })));\r\n    };\r\n    return PortalRenderer;\r\n}(React.Component));\n\nfunction Toolbar(props) {\r\n    // Iterate over primaryToolbarComponents here\r\n    return (React.createElement(Container, null,\r\n        React.createElement(MarksRow, null)));\r\n}\r\nvar Container = styled.div(templateObject_1$2 || (templateObject_1$2 = __makeTemplateObject([\"\\n  background: snow;\\n  border: 1px solid black;\\n  border-bottom: 0;\\n  padding: 10px;\\n  & > h2 {\\n    margin: 0 0 5px 0;\\n  }\\n\"], [\"\\n  background: snow;\\n  border: 1px solid black;\\n  border-bottom: 0;\\n  padding: 10px;\\n  & > h2 {\\n    margin: 0 0 5px 0;\\n  }\\n\"])));\r\nvar MarksRow = styled.div(templateObject_2 || (templateObject_2 = __makeTemplateObject([\"\\n  display: flex;\\n\"], [\"\\n  display: flex;\\n\"])));\r\nvar MiddleRow = styled.div(templateObject_3 || (templateObject_3 = __makeTemplateObject([\"\\n  display: flex;\\n\"], [\"\\n  display: flex;\\n\"])));\r\nvar templateObject_1$2, templateObject_2, templateObject_3;\n\nfunction FullPage(props) {\r\n    var className = props.className, editorDOMElement = props.editorDOMElement;\r\n    return (React.createElement(Container$1, { className: className },\r\n        React.createElement(Toolbar, null),\r\n        React.createElement(ContentArea\r\n        // contentAreaRef={this.contentAreaRef}\r\n        , null, editorDOMElement)));\r\n}\r\nvar Container$1 = styled.div(templateObject_1$3 || (templateObject_1$3 = __makeTemplateObject([\"\"], [\"\"])));\r\nvar ContentArea = styled.div(templateObject_2$1 || (templateObject_2$1 = __makeTemplateObject([\"\\n  border: 1px solid black;\\n  & > .ProseMirror {\\n    min-height: 140px;\\n    overflow-wrap: break-word;\\n    outline: none;\\n    padding: 10px;\\n    white-space: pre-wrap;\\n  }\\n\"], [\"\\n  border: 1px solid black;\\n  & > .ProseMirror {\\n    min-height: 140px;\\n    overflow-wrap: break-word;\\n    outline: none;\\n    padding: 10px;\\n    white-space: pre-wrap;\\n  }\\n\"])));\r\nvar templateObject_1$3, templateObject_2$1;\n\n// An interesting feature of which I'm not completely sure what is its purpose\r\n// https://bitbucket.org/atlassian/atlassian-frontend-mirror/src/master/editor/editor-common/src/extensions/\r\n// extensionProvider: any\r\nfunction Editor(props) {\r\n    var _a = props.appearance, appearance = _a === void 0 ? 'full-page' : _a;\r\n    var editorActions = useState(new EditorActions())[0];\r\n    // const Component = useMemo(() => {\r\n    //   if (appearance === 'full-page') {\r\n    //     return FullPage\r\n    //   }\r\n    //   return null\r\n    // }, [appearance])\r\n    // useEffect(() => {\r\n    // }, [])\r\n    return (React.createElement(EditorContext, { editorActions: editorActions },\r\n        React.createElement(PortalProvider, { render: function (portalProviderAPI) { return (React.createElement(React.Fragment, null,\r\n                React.createElement(ReactEditorView, { editorProps: props, portalProviderAPI: portalProviderAPI, render: function (_a) {\r\n                        var editor = _a.editor, view = _a.view, eventDispatcher = _a.eventDispatcher, config = _a.config;\r\n                        return (React.createElement(FullPage, { appearance: appearance, editorActions: editorActions, editorDOMElement: editor, editorView: view, eventDispatcher: eventDispatcher, primaryToolbarComponents: config.primaryToolbarComponents }));\r\n                    } }),\r\n                React.createElement(PortalRenderer, { portalProviderAPI: portalProviderAPI }))); } })));\r\n}\r\n// export class Editor extends React.Component<EditorProps> {\r\n//   static defaultProps: EditorProps = {\r\n//     appearance: 'full-page',\r\n//   }\r\n//   // An interesting feature of which I'm not completely sure what is its purpose\r\n//   // https://bitbucket.org/atlassian/atlassian-frontend-mirror/src/master/editor/editor-common/src/extensions/\r\n//   // extensionProvider: any\r\n//   private editorActions: EditorActions\r\n//   constructor(props: EditorProps, context: { editorActions?: EditorActions }) {\r\n//     super(props)\r\n//     this.editorActions = (context || {}).editorActions || new EditorActions();\r\n//   }\r\n//   render() {\r\n//     const Component = getUiComponent(this.props.appearance!)\r\n//     return (\r\n//       <EditorContext editorActions={this.editorActions}>\r\n//         <PortalProvider render={portalProviderAPI => (\r\n//           <>\r\n//             <ReactEditorView\r\n//               render={({\r\n//                 editor,\r\n//                 view,\r\n//                 eventDispatcher,\r\n//                 config,\r\n//               }) => (\r\n//                 <Component\r\n//                 appearance={this.props.appearance!}\r\n//                 editorActions={this.editorActions}\r\n//                 // editorDOMElement={editor}\r\n//                 editorView={view}\r\n//                 eventDispatcher={eventDispatcher}\r\n//                 primaryToolbarComponents={\r\n//                   config.primaryToolbarComponents\r\n//                 }\r\n//               />)}\r\n//             />\r\n//             <PortalRenderer\r\n//               portalProviderAPI={portalProviderAPI}\r\n//             />\r\n//           </>\r\n//         )}>\r\n//         </PortalProvider>\r\n//       </EditorContext>\r\n//     )\r\n//   }\r\n// }\r\n// function Editor(props: EditorProps) {\r\n//   const plugins = usePresetContext();\r\n//   return (\r\n//     <IntlProvider locale=\"en\">\r\n//       <PortalProvider\r\n//         onAnalyticsEvent={props.onAnalyticsEvent}\r\n//         render={portalProviderAPI => (\r\n//           <>\r\n//             <EditorInternal\r\n//               {...props}\r\n//               plugins={plugins.length ? plugins : props.plugins}\r\n//               portalProviderAPI={portalProviderAPI}\r\n//               onAnalyticsEvent={props.onAnalyticsEvent}\r\n//             />\r\n//             <PortalRenderer portalProviderAPI={portalProviderAPI} />\r\n//           </>\r\n//         )}\r\n//       />\r\n//     </IntlProvider>\r\n//   );\r\n// }\n\nexport { Editor };\n","import * as React from 'react'\nimport styled from 'styled-components'\n\nimport { Editor } from 'atlassian'\n\nimport { PageHeader } from '../components/PageHeader'\n\ninterface IProps {\n  className?: string\n}\n\nexport function AtlassianPage(props: IProps) {\n  const { className } = props\n  return (\n    <Container className={className}>\n      <PageHeader>\n        <Editor performanceTracking/>\n      </PageHeader>\n    </Container>\n  )\n}\n\nconst Container = styled.div`\n`\n","import * as React from 'react'\nimport { BrowserRouter, Redirect, Switch } from 'react-router-dom'\n\nimport { WrappedRoute } from './components/WrappedRoute'\n\nimport { FrontPage } from './pages/FrontPage'\nimport { MinimalPage } from './pages/MinimalPage'\nimport { AtlassianPage } from './pages/AtlassianPage'\n\nexport const Routes = () => (\n  <BrowserRouter basename={process.env.PUBLIC_URL}>\n    <Switch>\n      <WrappedRoute exact path=\"/\" component={FrontPage}/>\n      <WrappedRoute exact path=\"/minimal\" component={MinimalPage}/>\n      <WrappedRoute exact path=\"/atlassian\" component={AtlassianPage}/>\n      <Redirect to=\"/\" />\n    </Switch>\n  </BrowserRouter>\n)\n","import * as React from 'react'\nimport { render } from 'react-dom'\n\nimport { Routes } from './routes'\n\nrender(\n  <Routes />,\n  document.getElementById('root')\n)\n"],"sourceRoot":""}