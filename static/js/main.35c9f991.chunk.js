(this["webpackJsonpfull-prosemirror-react-typescript-example"]=this["webpackJsonpfull-prosemirror-react-typescript-example"]||[]).push([[0],{105:function(e,t,n){e.exports=n(225)},224:function(e,t,n){},225:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n(16),i=n.n(o),a=n(102),c=n(4),l=n(27),s=n(12),p=n(13),u=n(30),d=n(29),h=n(28),f=n(103),m=n(2),v=n(99),b=n(1),O=new b.h({nodes:{doc:{content:"block+"},paragraph:{group:"block",content:"inline*",attrs:{spellcheck:{default:"false"}},parseDOM:[{tag:"p"}],toDOM:function(e){return["p",e.attrs,0]}},underline:{group:"block",content:"inline*",attrs:{spellcheck:{default:"false"}},parseDOM:[{tag:"p"}],toDOM:function(e){return["p",e.attrs,0]}},text:{group:"inline"}}}),k=n(104),y=n(72),w=n(100),E=n(3);function j(e,t){var n=e.selection,r=n.$from,o=n.$to;if(e.selection instanceof m.c&&e.selection.node.isBlock)return!(!r.parentOffset||!Object(E.f)(e.doc,r.pos))&&(t&&t(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.parent.isBlock)return!1;if(t){var i=o.parentOffset==o.parent.content.size,a=e.tr;e.selection instanceof m.g&&a.deleteSelection();var c=0==r.depth?void 0:r.node(-1).contentMatchAt(r.indexAfter(-1)).defaultType,l=i&&c?[{type:c}]:void 0,s=Object(E.f)(a.doc,a.mapping.map(r.pos),1,l);if(!l&&!s&&c&&Object(E.f)(a.doc,a.mapping.map(r.pos),1,c&&[{type:c}])&&(l=[{type:c}],s=!0),s&&c){a.split(a.mapping.map(r.pos),1,l);var p=!i&&!r.parentOffset&&r.parent.type!=c,u=r.node(-1).canReplace(r.index(-1),r.indexAfter(-1),b.c.from(c.create()));p&&u&&a.setNodeMarkup(a.mapping.map(r.before()),c)}t(a.scrollIntoView())}return!0}function g(e,t){var n=e.selection,r=n.$from,o=n.$to;if(r.parent.inlineContent||o.parent.inlineContent)return!1;var i=r.parent.contentMatchAt(o.indexAfter()).defaultType;if(!i||!i.isTextblock)return!1;var a=i.createAndFill();if(t&&a){var c=(!r.parentOffset&&o.index()<o.parent.childCount?r:o).pos,l=e.tr.insert(c,a);l.setSelection(m.g.create(l.doc,c+1)),t(l.scrollIntoView())}return!0}function C(e,t){var n=e.selection,r=n.$from,o=(n.$to,O.nodes.underline.createAndFill()),i=r.end();o&&t(e.tr.insert(i+1,o));return!1}var M=function(){var e=[];return e.push(Object(k.a)()),e.push(Object(y.a)(w.a)),e.push(Object(y.a)({"Ctrl-n":C,"Ctrl-p":g,"Ctrl-s":j})),e},x=function(){function e(){Object(s.a)(this,e),this.portals=new Map}return Object(p.a)(e,[{key:"render",value:function(e,t){this.portals.set(t,{component:e}),i.a.render(e,t)}},{key:"remove",value:function(e){this.portals.delete(e),i.a.unmountComponentAtNode(e)}}]),e}();function D(){var e=Object(l.a)(["\n  text-decoration: underline;\n"]);return D=function(){return e},e}var P=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var o;return Object(s.a)(this,n),(o=t.call(this,e)).hole=void 0,o.hole=r.createRef(),o}return Object(p.a)(n,[{key:"componentDidMount",value:function(){this.hole.current.appendChild(this.props.contentDOM)}},{key:"render",value:function(){var e=this.props.attrs;return r.createElement(R,{ref:this.hole,spellCheck:e.spellcheck})}}]),n}(r.Component),R=h.a.p(D()),V=function(){function e(t,n,o,i,a,c){Object(s.a)(this,e),this.dom=void 0,this.contentDOM=void 0,this.ref=void 0,this.node=void 0,this.view=void 0,this.getPos=void 0,this.decorations=void 0,this.attrs=void 0,this.portalProvider=void 0,this.reactComponent=void 0,this.attrs=t.attrs,this.node=t,this.view=n,this.getPos=o,this.decorations=i,this.portalProvider=a,this.reactComponent=c,this.ref=r.createRef(),this.dom=document.createElement("span"),this.contentDOM=document.createElement("span"),this.dom.classList.add("node__dom"),this.contentDOM.classList.add("node__content-dom"),this.renderReactComponent()}return Object(p.a)(e,[{key:"renderReactComponent",value:function(){this.portalProvider.render(r.createElement(this.reactComponent,{ref:this.ref,attrs:this.attrs,contentDOM:this.contentDOM}),this.dom)}},{key:"update",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){return!0},r=this.node.type===e.type&&n(this.node,e);return!!r&&(this.ref&&!this.node.sameMarkup(e)&&(this.attrs=e.attrs,this.renderReactComponent()),this.node=e,this.decorations=t,!0)}},{key:"destroy",value:function(){this.portalProvider.remove(this.dom)}}],[{key:"fromComponent",value:function(t,n){return function(r,o,i,a){return new e(r,o,i,a,n,t)}}}]),e}();function A(){var e=Object(l.a)(["\n  border: 1px solid black;\n  #editor > .ProseMirror {\n    min-height: 140px;\n    overflow-wrap: break-word;\n    outline: none;\n    padding: 10px;\n    white-space: pre-wrap;\n  }\n"]);return A=function(){return e},e}var S=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var o;return Object(s.a)(this,n),(o=t.call(this,e)).editorRef=void 0,o.editorState=void 0,o.editorView=void 0,o.portalProvider=void 0,o.editorState=m.b.create({schema:O,plugins:M()}),o.editorRef=r.createRef(),o.portalProvider=new x,o}return Object(p.a)(n,[{key:"createEditorView",value:function(e){var t;null!==e&&(this.editorView=new v.a(e,{nodeViews:(t=this.portalProvider,{underline:V.fromComponent(P,t)}),state:this.editorState}),Object(f.a)(this.editorView))}},{key:"componentDidMount",value:function(){this.createEditorView(this.editorRef.current),this.forceUpdate()}},{key:"componentWillUnmount",value:function(){this.editorView&&this.editorView.destroy()}},{key:"shouldComponentUpdate",value:function(){return!1}},{key:"render",value:function(){return r.createElement($,null,r.createElement("div",{id:"editor",ref:this.editorRef}))}}]),n}(r.Component),$=h.a.div(A());function I(){var e=Object(l.a)(["\n"]);return I=function(){return e},e}var N=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){return r.createElement(T,null,r.createElement("header",null,r.createElement("h1",null,r.createElement("a",{href:"https://teemukoivisto.github.io/prosemirror-react-typescript-example/"},"ProseMirror React Typescript Example")),r.createElement("p",null,"Demo application to show how to combine ProseMirror with React"),r.createElement("p",null,r.createElement("a",{href:"https://teemukoivisto.github.io/prosemirror-react-typescript-example/"},"Github repo"))),r.createElement("div",null,r.createElement("ul",null,r.createElement("li",null,r.createElement("b",null,"Ctrl + n"),": New underline paragraph"),r.createElement("li",null,r.createElement("b",null,"Ctrl + p"),": New normal paragraph (not working)"),r.createElement("li",null,r.createElement("b",null,"Ctrl + s"),": Split current block")),r.createElement(S,null)))}}]),n}(r.PureComponent),T=h.a.div(I()),_=function(){return r.createElement(a.a,{basename:"/prosemirror-react-typescript-example"},r.createElement(c.d,null,r.createElement(c.b,{exact:!0,path:"/",component:N}),r.createElement(c.a,{to:"/"})))};n(224);Object(o.render)(r.createElement(_,null),document.getElementById("root"))}},[[105,1,2]]]);
//# sourceMappingURL=main.35c9f991.chunk.js.map